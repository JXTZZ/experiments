
WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://archive.ubuntu.com/ubuntu xenial InRelease
Get:2 http://security.ubuntu.com/ubuntu xenial-security InRelease [106 kB]
Get:3 http://archive.ubuntu.com/ubuntu xenial-updates InRelease [106 kB]
Get:4 http://archive.ubuntu.com/ubuntu xenial-backports InRelease [106 kB]
Fetched 317 kB in 1s (254 kB/s)
Reading package lists...
Building dependency tree...
Reading state information...
2 packages can be upgraded. Run 'apt list --upgradable' to see them.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
patch is already the newest version (2.7.5-1ubuntu0.16.04.2).
patch set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded.
list.c
fun.c
hash.c
stack.c
ponyassert.c
threads.c
options.c
start.c
mpmcq.c
scheduler.c
cpu.c
mutemap.c
alloc.c
pool.c
pagemap.c
heap.c
stat.c
socket.c
stdfd.c
except_try_catch.ll
directory.c
posix_except.c
ssl.c
io.c
time.c
lsda.c
paths.c
actormap.c
cycle.c
delta.c
trace.c
objectmap.c
gc.c
serialise.c
messageq.c
actor.c
event.c
asio.c
epoll.c
Linking libponyrt
blake2b-ref.c
Linking libblake2
ffi.c
literal.c
control.c
lambda.c
reference.c
operator.c
match.c
postfix.c
array.c
call.c
typeparam.c
matchtype.c
sanitise.c
subtype.c
lookup.c
reify.c
cap.c
assemble.c
alias.c
safeto.c
compattype.c
viewpoint.c
control.c
type.c
fun.c
call.c
paths.c
host.cc
genopt.cc
genname.c
genprim.c
genoperator.c
gentype.c
gencontrol.c
genobj.c
gendesc.c
codegen.c
genexe.c
gendebug.cc
gentrace.c
genident.c
gencall.c
genfun.c
genbox.c
genheader.c
genmatch.c
genexpr.c
genserialise.c
genreference.c
genlib.c
genjit.cc
options.c
source.c
treecheck.c
parser.c
parserapi.c
printbuf.c
lexint.c
symtab.c
ast.c
token.c
bnfprint.c
stringtab.c
lexer.c
id.c
frame.c
error.c
package.c
program.c
buildflagset.c
ifdef.c
use.c
platformfuns.c
ponyc.c
reach.c
subtype.c
paint.c
plugin.c
import.c
traits.c
flatten.c
scope.c
sugar.c
pass.c
names.c
verify.c
syntax.c
expr.c
finalisers.c
serialisers.c
refer.c
docgen.c
Linking libponyc
list.c
fun.c
hash.c
stack.c
ponyassert.c
threads.c
options.c
start.c
mpmcq.c
scheduler.c
cpu.c
mutemap.c
alloc.c
pool.c
pagemap.c
heap.c
stat.c
socket.c
stdfd.c
except_try_catch.ll
directory.c
posix_except.c
ssl.c
io.c
time.c
lsda.c
paths.c
actormap.c
cycle.c
delta.c
trace.c
objectmap.c
gc.c
serialise.c
messageq.c
actor.c
event.c
asio.c
epoll.c
Linking libponyrt-pic
gtest-all.cc
Linking libgtest
colorprint.cc
sysinfo.cc
csv_reporter.cc
benchmark.cc
reporter.cc
json_reporter.cc
sleep.cc
statistics.cc
string_util.cc
benchmark_register.cc
counter.cc
timers.cc
console_reporter.cc
complexity.cc
commandlineflags.cc
Linking libgbenchmark
main.c
Linking ponyc
symtab.cc
ffi.cc
flatten.cc
token.cc
iftype.cc
parse_entity.cc
util.cc
lambda.cc
bare.cc
dontcare.cc
codegen_ffi.cc
compiler_serialisation.cc
sugar_expr.cc
refer.cc
annotations.cc
lexer.cc
sugar.cc
option_parser.cc
traits.cc
verify.cc
signature.cc
paint.cc
program.cc
local_inference.cc
array.cc
chain.cc
lexint.cc
id.cc
matchtype.cc
suggest_alt_name.cc
parse_expr.cc
finalisers.cc
reach.cc
recover.cc
buildflagset.cc
codegen.cc
type_check_bind.cc
use.cc
scope.cc
codegen_optimisation.cc
badpony.cc
literal_inference.cc
type_check_subtype.cc
sugar_traits.cc
literal_limits.cc
codegen_final.cc
codegen_trace.cc
codegen_identity.cc
Linking libponyc.tests
fun.cc
list.cc
hash.cc
util.cc
heap.cc
pool.cc
pagemap.cc
error.cc
Linking libponyrt.tests
gbenchmark_main.cc
common.cc
Linking libponyc.benchmarks
hash.cc
gbenchmark_main.cc
heap.cc
pool.cc
common.cc
Linking libponyrt.benchmarks
[==========] Running 1084 tests from 46 test cases.
[----------] Global test environment set-up.
[----------] 7 tests from SymtabTest
[ RUN      ] SymtabTest.AddGet
[       OK ] SymtabTest.AddGet (0 ms)
[ RUN      ] SymtabTest.InitiallyNotPresent
[       OK ] SymtabTest.InitiallyNotPresent (0 ms)
[ RUN      ] SymtabTest.RepeatAddBlocked
[       OK ] SymtabTest.RepeatAddBlocked (0 ms)
[ RUN      ] SymtabTest.AddAfterGetFail
[       OK ] SymtabTest.AddAfterGetFail (0 ms)
[ RUN      ] SymtabTest.Multiple
[       OK ] SymtabTest.Multiple (0 ms)
[ RUN      ] SymtabTest.TwoTables
[       OK ] SymtabTest.TwoTables (0 ms)
[ RUN      ] SymtabTest.Merge
[       OK ] SymtabTest.Merge (0 ms)
[----------] 7 tests from SymtabTest (0 ms total)

[----------] 22 tests from FFITest
[ RUN      ] FFITest.NoDeclaration
[       OK ] FFITest.NoDeclaration (4 ms)
[ RUN      ] FFITest.NoDeclarationArg
[       OK ] FFITest.NoDeclarationArg (4 ms)
[ RUN      ] FFITest.NoDeclarationMultipleArgs
[       OK ] FFITest.NoDeclarationMultipleArgs (3 ms)
[ RUN      ] FFITest.NoDeclarationNoReturn
[       OK ] FFITest.NoDeclarationNoReturn (3 ms)
[ RUN      ] FFITest.NoDeclarationMultipleReturn
[       OK ] FFITest.NoDeclarationMultipleReturn (1 ms)
[ RUN      ] FFITest.NoDeclarationLiteralIntArg
[       OK ] FFITest.NoDeclarationLiteralIntArg (3 ms)
[ RUN      ] FFITest.Declaration
[       OK ] FFITest.Declaration (3 ms)
[ RUN      ] FFITest.DeclarationArgs
[       OK ] FFITest.DeclarationArgs (4 ms)
[ RUN      ] FFITest.DeclarationBadArg
[       OK ] FFITest.DeclarationBadArg (3 ms)
[ RUN      ] FFITest.DeclarationTooFewArgs
[       OK ] FFITest.DeclarationTooFewArgs (3 ms)
[ RUN      ] FFITest.DeclarationTooManyArgs
[       OK ] FFITest.DeclarationTooManyArgs (4 ms)
[ RUN      ] FFITest.DeclarationWithReturn
[       OK ] FFITest.DeclarationWithReturn (3 ms)
[ RUN      ] FFITest.DeclarationWithDifferentReturn
[       OK ] FFITest.DeclarationWithDifferentReturn (4 ms)
[ RUN      ] FFITest.DeclarationVoidStarPointer
[       OK ] FFITest.DeclarationVoidStarPointer (3 ms)
[ RUN      ] FFITest.DeclarationVoidStarUSize
[       OK ] FFITest.DeclarationVoidStarUSize (3 ms)
[ RUN      ] FFITest.DeclarationVoidStarNotPointer
[       OK ] FFITest.DeclarationVoidStarNotPointer (3 ms)
[ RUN      ] FFITest.DeclarationEllipsisNoArgs
[       OK ] FFITest.DeclarationEllipsisNoArgs (2 ms)
[ RUN      ] FFITest.DeclarationEllipsisOneArg
[       OK ] FFITest.DeclarationEllipsisOneArg (4 ms)
[ RUN      ] FFITest.DeclarationEllipsisMultipleArgs
[       OK ] FFITest.DeclarationEllipsisMultipleArgs (5 ms)
[ RUN      ] FFITest.DeclarationEllipsisNotFirst
[       OK ] FFITest.DeclarationEllipsisNotFirst (4 ms)
[ RUN      ] FFITest.DeclarationEllipsisNotLast
[       OK ] FFITest.DeclarationEllipsisNotLast (1 ms)
[ RUN      ] FFITest.DeclarationAlias
[       OK ] FFITest.DeclarationAlias (3 ms)
[----------] 22 tests from FFITest (71 ms total)

[----------] 1 test from FlattenTest
[ RUN      ] FlattenTest.TypeparamCap
[       OK ] FlattenTest.TypeparamCap (1 ms)
[----------] 1 test from FlattenTest (1 ms total)

[----------] 4 tests from TokenTest
[ RUN      ] TokenTest.PrintEscapedString
[       OK ] TokenTest.PrintEscapedString (0 ms)
[ RUN      ] TokenTest.PrintEscapedStringContainingDoubleQuotes
[       OK ] TokenTest.PrintEscapedStringContainingDoubleQuotes (0 ms)
[ RUN      ] TokenTest.PrintEscapedStringContainingBackslashes
[       OK ] TokenTest.PrintEscapedStringContainingBackslashes (0 ms)
[ RUN      ] TokenTest.PrintEscapedStringContainingNullBytes
[       OK ] TokenTest.PrintEscapedStringContainingNullBytes (0 ms)
[----------] 4 tests from TokenTest (0 ms total)

[----------] 16 tests from IftypeTest
[ RUN      ] IftypeTest.ThenClause_TypeConstraint
[       OK ] IftypeTest.ThenClause_TypeConstraint (7 ms)
[ RUN      ] IftypeTest.ElseClause_NoTypeConstraint
[       OK ] IftypeTest.ElseClause_NoTypeConstraint (2 ms)
[ RUN      ] IftypeTest.ThenClause_CapConstraint
[       OK ] IftypeTest.ThenClause_CapConstraint (5 ms)
[ RUN      ] IftypeTest.ElseClause_NoCapConstraint
[       OK ] IftypeTest.ElseClause_NoCapConstraint (4 ms)
[ RUN      ] IftypeTest.Cond_InvalidType
[       OK ] IftypeTest.Cond_InvalidType (1 ms)
[ RUN      ] IftypeTest.TupleCond_Valid
[       OK ] IftypeTest.TupleCond_Valid (7 ms)
[ RUN      ] IftypeTest.TupleCond_InvalidType
[       OK ] IftypeTest.TupleCond_InvalidType (1 ms)
[ RUN      ] IftypeTest.TupleCond_InvalidCardinality
[       OK ] IftypeTest.TupleCond_InvalidCardinality (1 ms)
[ RUN      ] IftypeTest.Codegen_True
[       OK ] IftypeTest.Codegen_True (21 ms)
[ RUN      ] IftypeTest.Codegen_False
[       OK ] IftypeTest.Codegen_False (16 ms)
[ RUN      ] IftypeTest.Codegen_ElseIfTrue
[       OK ] IftypeTest.Codegen_ElseIfTrue (17 ms)
[ RUN      ] IftypeTest.UnconstrainedTypeparam
[       OK ] IftypeTest.UnconstrainedTypeparam (10 ms)
[ RUN      ] IftypeTest.RecursiveConstraint
[       OK ] IftypeTest.RecursiveConstraint (8 ms)
[ RUN      ] IftypeTest.Tuple_MutuallyRecursiveConstraint
[       OK ] IftypeTest.Tuple_MutuallyRecursiveConstraint (7 ms)
[ RUN      ] IftypeTest.NestedCond
[       OK ] IftypeTest.NestedCond (5 ms)
[ RUN      ] IftypeTest.ReplaceTypeargs
[       OK ] IftypeTest.ReplaceTypeargs (6 ms)
[----------] 16 tests from IftypeTest (119 ms total)

[----------] 105 tests from ParseEntityTest
[ RUN      ] ParseEntityTest.Rubbish
[       OK ] ParseEntityTest.Rubbish (1 ms)
[ RUN      ] ParseEntityTest.Empty
[       OK ] ParseEntityTest.Empty (1 ms)
[ RUN      ] ParseEntityTest.ActorMinimal
[       OK ] ParseEntityTest.ActorMinimal (0 ms)
[ RUN      ] ParseEntityTest.ActorCApi
[       OK ] ParseEntityTest.ActorCApi (1 ms)
[ RUN      ] ParseEntityTest.ActorMaximal
[       OK ] ParseEntityTest.ActorMaximal (1 ms)
[ RUN      ] ParseEntityTest.ActorCanBeCalledMain
[       OK ] ParseEntityTest.ActorCanBeCalledMain (1 ms)
[ RUN      ] ParseEntityTest.ActorCannotSpecifyCapability
[       OK ] ParseEntityTest.ActorCannotSpecifyCapability (1 ms)
[ RUN      ] ParseEntityTest.ActorCannotBeGenericAndCApi
[       OK ] ParseEntityTest.ActorCannotBeGenericAndCApi (0 ms)
[ RUN      ] ParseEntityTest.ActorCannotBeDontcare
[       OK ] ParseEntityTest.ActorCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.ClassMinimal
[       OK ] ParseEntityTest.ClassMinimal (0 ms)
[ RUN      ] ParseEntityTest.ClassMaximal
[       OK ] ParseEntityTest.ClassMaximal (0 ms)
[ RUN      ] ParseEntityTest.ClassCannotBeCalledMain
[       OK ] ParseEntityTest.ClassCannotBeCalledMain (1 ms)
[ RUN      ] ParseEntityTest.ClassCannotHaveBehaviour
[       OK ] ParseEntityTest.ClassCannotHaveBehaviour (0 ms)
[ RUN      ] ParseEntityTest.ClassCannotBeCApi
[       OK ] ParseEntityTest.ClassCannotBeCApi (1 ms)
[ RUN      ] ParseEntityTest.ClassCannotBeDontcare
[       OK ] ParseEntityTest.ClassCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveMinimal
[       OK ] ParseEntityTest.PrimitiveMinimal (0 ms)
[ RUN      ] ParseEntityTest.PrimitiveMaximal
[       OK ] ParseEntityTest.PrimitiveMaximal (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveCannotBeCalledMain
[       OK ] ParseEntityTest.PrimitiveCannotBeCalledMain (0 ms)
[ RUN      ] ParseEntityTest.PrimitiveCannotHaveFields
[       OK ] ParseEntityTest.PrimitiveCannotHaveFields (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveCannotSpecifyCapability
[       OK ] ParseEntityTest.PrimitiveCannotSpecifyCapability (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveCannotHaveBehaviour
[       OK ] ParseEntityTest.PrimitiveCannotHaveBehaviour (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveCannotBeCApi
[       OK ] ParseEntityTest.PrimitiveCannotBeCApi (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveCannotBeDontcare
[       OK ] ParseEntityTest.PrimitiveCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.TraitMinimal
[       OK ] ParseEntityTest.TraitMinimal (1 ms)
[ RUN      ] ParseEntityTest.TraitMaximal
[       OK ] ParseEntityTest.TraitMaximal (1 ms)
[ RUN      ] ParseEntityTest.TraitCannotBeCalledMain
[       OK ] ParseEntityTest.TraitCannotBeCalledMain (1 ms)
[ RUN      ] ParseEntityTest.TraitCannotHaveFields
[       OK ] ParseEntityTest.TraitCannotHaveFields (0 ms)
[ RUN      ] ParseEntityTest.TraitCannotHaveConstructor
[       OK ] ParseEntityTest.TraitCannotHaveConstructor (2 ms)
[ RUN      ] ParseEntityTest.TraitCannotBeCApi
[       OK ] ParseEntityTest.TraitCannotBeCApi (1 ms)
[ RUN      ] ParseEntityTest.TraitCannotBeDontcare
[       OK ] ParseEntityTest.TraitCannotBeDontcare (0 ms)
[ RUN      ] ParseEntityTest.InterfaceMinimal
[       OK ] ParseEntityTest.InterfaceMinimal (1 ms)
[ RUN      ] ParseEntityTest.InterfaceMaximal
[       OK ] ParseEntityTest.InterfaceMaximal (1 ms)
[ RUN      ] ParseEntityTest.InterfaceCannotBeCalledMain
[       OK ] ParseEntityTest.InterfaceCannotBeCalledMain (1 ms)
[ RUN      ] ParseEntityTest.InterfaceCannotHaveFields
[       OK ] ParseEntityTest.InterfaceCannotHaveFields (0 ms)
[ RUN      ] ParseEntityTest.InterfaceCannotHaveConstructor
[       OK ] ParseEntityTest.InterfaceCannotHaveConstructor (1 ms)
[ RUN      ] ParseEntityTest.InterfaceCannotBeCApi
[       OK ] ParseEntityTest.InterfaceCannotBeCApi (0 ms)
[ RUN      ] ParseEntityTest.InterfaceCannotBeDontcare
[       OK ] ParseEntityTest.InterfaceCannotBeDontcare (0 ms)
[ RUN      ] ParseEntityTest.Alias
[       OK ] ParseEntityTest.Alias (1 ms)
[ RUN      ] ParseEntityTest.AliasMustHaveType
[       OK ] ParseEntityTest.AliasMustHaveType (1 ms)
[ RUN      ] ParseEntityTest.AliasCannotBeDontcare
[       OK ] ParseEntityTest.AliasCannotBeDontcare (0 ms)
[ RUN      ] ParseEntityTest.FunctionMinimal
[       OK ] ParseEntityTest.FunctionMinimal (1 ms)
[ RUN      ] ParseEntityTest.FunctionMaximal
[       OK ] ParseEntityTest.FunctionMaximal (1 ms)
[ RUN      ] ParseEntityTest.FunctionCannotHaveEllipsis
[       OK ] ParseEntityTest.FunctionCannotHaveEllipsis (0 ms)
[ RUN      ] ParseEntityTest.TraitFunctionBodiesAreOptional
[       OK ] ParseEntityTest.TraitFunctionBodiesAreOptional (1 ms)
[ RUN      ] ParseEntityTest.InterfaceFunctionBodiesAreOptional
[       OK ] ParseEntityTest.InterfaceFunctionBodiesAreOptional (0 ms)
[ RUN      ] ParseEntityTest.ClassFunctionMustHaveBody
[       OK ] ParseEntityTest.ClassFunctionMustHaveBody (0 ms)
[ RUN      ] ParseEntityTest.ClassFunctionCannotBeCCallable
[       OK ] ParseEntityTest.ClassFunctionCannotBeCCallable (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveFunctionCannotBeCCallable
[       OK ] ParseEntityTest.PrimitiveFunctionCannotBeCCallable (1 ms)
[ RUN      ] ParseEntityTest.TraitFunctionCannotBeCCallable
[       OK ] ParseEntityTest.TraitFunctionCannotBeCCallable (1 ms)
[ RUN      ] ParseEntityTest.InterfaceFunctionCannotBeCCallable
[       OK ] ParseEntityTest.InterfaceFunctionCannotBeCCallable (0 ms)
[ RUN      ] ParseEntityTest.FunctionCannotBeDontcare
[       OK ] ParseEntityTest.FunctionCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.Behaviour
[       OK ] ParseEntityTest.Behaviour (1 ms)
[ RUN      ] ParseEntityTest.BehaviourCannotHaveCapability
[       OK ] ParseEntityTest.BehaviourCannotHaveCapability (1 ms)
[ RUN      ] ParseEntityTest.BehaviourCannotHaveEllipsis
[       OK ] ParseEntityTest.BehaviourCannotHaveEllipsis (0 ms)
[ RUN      ] ParseEntityTest.BehaviourCannotHaveReturnType
[       OK ] ParseEntityTest.BehaviourCannotHaveReturnType (1 ms)
[ RUN      ] ParseEntityTest.BehaviourCannotBePartial
[       OK ] ParseEntityTest.BehaviourCannotBePartial (1 ms)
[ RUN      ] ParseEntityTest.ActorBehaviourMustHaveBody
[       OK ] ParseEntityTest.ActorBehaviourMustHaveBody (1 ms)
[ RUN      ] ParseEntityTest.TraitBehaviourBodiesAreOptional
[       OK ] ParseEntityTest.TraitBehaviourBodiesAreOptional (1 ms)
[ RUN      ] ParseEntityTest.InterfaceBehaviourBodiesAreOptional
[       OK ] ParseEntityTest.InterfaceBehaviourBodiesAreOptional (1 ms)
[ RUN      ] ParseEntityTest.TraitBehaviourCannotBeCCallable
[       OK ] ParseEntityTest.TraitBehaviourCannotBeCCallable (1 ms)
[ RUN      ] ParseEntityTest.InterfaceBehaviourCannotBeCCallable
[       OK ] ParseEntityTest.InterfaceBehaviourCannotBeCCallable (0 ms)
[ RUN      ] ParseEntityTest.BehaviourCannotBeDontcare
[       OK ] ParseEntityTest.BehaviourCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.ConstructorMinimal
[       OK ] ParseEntityTest.ConstructorMinimal (1 ms)
[ RUN      ] ParseEntityTest.ConstructorMaximal
[       OK ] ParseEntityTest.ConstructorMaximal (1 ms)
[ RUN      ] ParseEntityTest.PrimitiveConstructorCannotHaveCapability
[       OK ] ParseEntityTest.PrimitiveConstructorCannotHaveCapability (1 ms)
[ RUN      ] ParseEntityTest.ActorConstructorCannotHaveCapability
[       OK ] ParseEntityTest.ActorConstructorCannotHaveCapability (1 ms)
[ RUN      ] ParseEntityTest.ConstructorCannotHaveEllipsis
[       OK ] ParseEntityTest.ConstructorCannotHaveEllipsis (1 ms)
[ RUN      ] ParseEntityTest.ConstructorCannotHaveReturnType
[       OK ] ParseEntityTest.ConstructorCannotHaveReturnType (0 ms)
[ RUN      ] ParseEntityTest.ActorConstructorCannotBePartial
[       OK ] ParseEntityTest.ActorConstructorCannotBePartial (1 ms)
[ RUN      ] ParseEntityTest.ConstructorMustHaveBody
[       OK ] ParseEntityTest.ConstructorMustHaveBody (1 ms)
[ RUN      ] ParseEntityTest.ConstructorCannotBeDontcare
[       OK ] ParseEntityTest.ConstructorCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.DoubleArrowMissing
[       OK ] ParseEntityTest.DoubleArrowMissing (1 ms)
[ RUN      ] ParseEntityTest.DoubleArrowWithoutBody
[       OK ] ParseEntityTest.DoubleArrowWithoutBody (0 ms)
[ RUN      ] ParseEntityTest.FieldMustHaveType
[       OK ] ParseEntityTest.FieldMustHaveType (2 ms)
[ RUN      ] ParseEntityTest.FieldCanHaveADocString
[       OK ] ParseEntityTest.FieldCanHaveADocString (1 ms)
[ RUN      ] ParseEntityTest.LetFieldMustHaveType
[       OK ] ParseEntityTest.LetFieldMustHaveType (1 ms)
[ RUN      ] ParseEntityTest.FieldCannotBeDontcare
[       OK ] ParseEntityTest.FieldCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.ProvidesListCanBeIntersect
[       OK ] ParseEntityTest.ProvidesListCanBeIntersect (1 ms)
[ RUN      ] ParseEntityTest.ProvidesListCannotBeUnion
[       OK ] ParseEntityTest.ProvidesListCannotBeUnion (1 ms)
[ RUN      ] ParseEntityTest.ProvidesListCannotBeTuple
[       OK ] ParseEntityTest.ProvidesListCannotBeTuple (1 ms)
[ RUN      ] ParseEntityTest.ProvidesListCannotBeArrow
[       OK ] ParseEntityTest.ProvidesListCannotBeArrow (1 ms)
[ RUN      ] ParseEntityTest.ProvidesListCannotHaveCapability
[       OK ] ParseEntityTest.ProvidesListCannotHaveCapability (1 ms)
[ RUN      ] ParseEntityTest.UseUri
[       OK ] ParseEntityTest.UseUri (0 ms)
[ RUN      ] ParseEntityTest.UseFfi
[       OK ] ParseEntityTest.UseFfi (0 ms)
[ RUN      ] ParseEntityTest.UseMustBeBeforeClass
[       OK ] ParseEntityTest.UseMustBeBeforeClass (1 ms)
[ RUN      ] ParseEntityTest.UseFfiMustHaveReturnType
[       OK ] ParseEntityTest.UseFfiMustHaveReturnType (1 ms)
[ RUN      ] ParseEntityTest.UseFfiMustHaveOnlyOneReturnType
[       OK ] ParseEntityTest.UseFfiMustHaveOnlyOneReturnType (0 ms)
[ RUN      ] ParseEntityTest.UseFfiCannotHaveDefaultArguments
[       OK ] ParseEntityTest.UseFfiCannotHaveDefaultArguments (1 ms)
[ RUN      ] ParseEntityTest.UseFfiEllipsisMustBeLast
[       OK ] ParseEntityTest.UseFfiEllipsisMustBeLast (1 ms)
[ RUN      ] ParseEntityTest.UseGuardsAreExpressions
[       OK ] ParseEntityTest.UseGuardsAreExpressions (1 ms)
[ RUN      ] ParseEntityTest.UseGuardsDoNotAllowOperatorPrecedence
[       OK ] ParseEntityTest.UseGuardsDoNotAllowOperatorPrecedence (2 ms)
[ RUN      ] ParseEntityTest.UseGuardsUserAndPlatformFlagsCanCollide
[       OK ] ParseEntityTest.UseGuardsUserAndPlatformFlagsCanCollide (2 ms)
[ RUN      ] ParseEntityTest.UseGuardsOutlawedFlagName
[       OK ] ParseEntityTest.UseGuardsOutlawedFlagName (2 ms)
[ RUN      ] ParseEntityTest.UserFlagInCondition
[       OK ] ParseEntityTest.UserFlagInCondition (1 ms)
[ RUN      ] ParseEntityTest.UnquotedUserFlagInCondition
[       OK ] ParseEntityTest.UnquotedUserFlagInCondition (1 ms)
[ RUN      ] ParseEntityTest.OsNameCaseSensitiveInConditionRight
[       OK ] ParseEntityTest.OsNameCaseSensitiveInConditionRight (1 ms)
[ RUN      ] ParseEntityTest.OsNameCaseSensitiveInConditionWrong
[       OK ] ParseEntityTest.OsNameCaseSensitiveInConditionWrong (1 ms)
[ RUN      ] ParseEntityTest.UseUriCannotBeDontcare
[       OK ] ParseEntityTest.UseUriCannotBeDontcare (1 ms)
[ RUN      ] ParseEntityTest.CompileIntrinsicAllowedAsFunctionBody
[       OK ] ParseEntityTest.CompileIntrinsicAllowedAsFunctionBody (0 ms)
[ RUN      ] ParseEntityTest.DocstringAllowedBeforeCompileIntrinsic
[       OK ] ParseEntityTest.DocstringAllowedBeforeCompileIntrinsic (1 ms)
[ RUN      ] ParseEntityTest.TwoDocstringsNotAllowedBeforeCompileIntrinsic
[       OK ] ParseEntityTest.TwoDocstringsNotAllowedBeforeCompileIntrinsic (1 ms)
[ RUN      ] ParseEntityTest.NonDocExpressionNotAllowedBeforeCompileIntrinsic
[       OK ] ParseEntityTest.NonDocExpressionNotAllowedBeforeCompileIntrinsic (1 ms)
[ RUN      ] ParseEntityTest.DocstringNotAllowedAfterCompileIntrinsic
[       OK ] ParseEntityTest.DocstringNotAllowedAfterCompileIntrinsic (1 ms)
[ RUN      ] ParseEntityTest.NonDocExpressionNotAllowedAfterCompileIntrinsic
[       OK ] ParseEntityTest.NonDocExpressionNotAllowedAfterCompileIntrinsic (0 ms)
[ RUN      ] ParseEntityTest.CompileIntrinsicNotAllowedInControlStructure
[       OK ] ParseEntityTest.CompileIntrinsicNotAllowedInControlStructure (1 ms)
[----------] 105 tests from ParseEntityTest (88 ms total)

[----------] 32 tests from LambdaTest
[ RUN      ] LambdaTest.Lambda
[       OK ] LambdaTest.Lambda (5 ms)
[ RUN      ] LambdaTest.LambdaCap
[       OK ] LambdaTest.LambdaCap (4 ms)
[ RUN      ] LambdaTest.LambdaCaptureVariable
[       OK ] LambdaTest.LambdaCaptureVariable (4 ms)
[ RUN      ] LambdaTest.LambdaCaptureExpression
[       OK ] LambdaTest.LambdaCaptureExpression (4 ms)
[ RUN      ] LambdaTest.LambdaCaptureExpressionAndType
[       OK ] LambdaTest.LambdaCaptureExpressionAndType (3 ms)
[ RUN      ] LambdaTest.LambdaCaptureTypeWithoutExpressionFail
[       OK ] LambdaTest.LambdaCaptureTypeWithoutExpressionFail (1 ms)
[ RUN      ] LambdaTest.LambdaCaptureFree
[       OK ] LambdaTest.LambdaCaptureFree (3 ms)
[ RUN      ] LambdaTest.LambdaCaptureRefInIso
[       OK ] LambdaTest.LambdaCaptureRefInIso (2 ms)
[ RUN      ] LambdaTest.LambdaCaptureRefInVal
[       OK ] LambdaTest.LambdaCaptureRefInVal (1 ms)
[ RUN      ] LambdaTest.LambdaCaptureDontcareVariable
[       OK ] LambdaTest.LambdaCaptureDontcareVariable (3 ms)
[ RUN      ] LambdaTest.LambdaCaptureDontcareExpression
[       OK ] LambdaTest.LambdaCaptureDontcareExpression (4 ms)
[ RUN      ] LambdaTest.LambdaCaptureDontcareExpressionAndType
[       OK ] LambdaTest.LambdaCaptureDontcareExpressionAndType (4 ms)
[ RUN      ] LambdaTest.LambdaCaptureDontcareFree
[       OK ] LambdaTest.LambdaCaptureDontcareFree (3 ms)
[ RUN      ] LambdaTest.ObjectCaptureFree
[       OK ] LambdaTest.ObjectCaptureFree (2 ms)
[ RUN      ] LambdaTest.ObjectCaptureRefInActor
[       OK ] LambdaTest.ObjectCaptureRefInActor (2 ms)
[ RUN      ] LambdaTest.ObjectSyntaxErrorInMethod
[       OK ] LambdaTest.ObjectSyntaxErrorInMethod (0 ms)
[ RUN      ] LambdaTest.InferFromArgType
[       OK ] LambdaTest.InferFromArgType (4 ms)
[ RUN      ] LambdaTest.InferFromNamedArgType
[       OK ] LambdaTest.InferFromNamedArgType (5 ms)
[ RUN      ] LambdaTest.InferFromParamType
[       OK ] LambdaTest.InferFromParamType (4 ms)
[ RUN      ] LambdaTest.InferFromAssignType
[       OK ] LambdaTest.InferFromAssignType (4 ms)
[ RUN      ] LambdaTest.InferFromLambdaCaptureType
[       OK ] LambdaTest.InferFromLambdaCaptureType (8 ms)
[ RUN      ] LambdaTest.InferFromReturnType
[       OK ] LambdaTest.InferFromReturnType (5 ms)
[ RUN      ] LambdaTest.InferFromEarlyReturnType
[       OK ] LambdaTest.InferFromEarlyReturnType (4 ms)
[ RUN      ] LambdaTest.InferFromCallToCallableObject
[       OK ] LambdaTest.InferFromCallToCallableObject (5 ms)
[ RUN      ] LambdaTest.InferFromArrayElementType
[       OK ] LambdaTest.InferFromArrayElementType (8 ms)
[ RUN      ] LambdaTest.InferFromInferredArrayElementType
[       OK ] LambdaTest.InferFromInferredArrayElementType (6 ms)
[ RUN      ] LambdaTest.InferThroughDeeplyNestedExpressions
Error:
function body isn't the result type
    if true then
    ^
    Info:
function return type: {iso(X, Y): Z} iso
      fun apply(): Fn =>
                   ^
function body type: ({(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | None val^)
            {(_, _) => Z }
            ^
None val^ is not a subtype of {iso(X, Y): Z} iso: val^ is not a subcap of iso
    primitive None
    ^
None val^ is not a subtype of {iso(X, Y): Z} iso: it has no method 'apply'
    primitive None
    ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/lambda.cc:480: Failure
Expected: test_compile(src, "expr") doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] LambdaTest.InferThroughDeeplyNestedExpressions (6 ms)
[ RUN      ] LambdaTest.InferThroughComplexTypes
not every element of ({(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | {(X val, Y val): Z val}[A val] iso^ | None val^) is a subtype of {iso(X, Y): Z} iso
    primitive None
    ^
[       OK ] LambdaTest.InferThroughComplexTypes (6 ms)
[ RUN      ] LambdaTest.InferThroughComplexTypesWithTypeArgs
[       OK ] LambdaTest.InferThroughComplexTypesWithTypeArgs (5 ms)
[ RUN      ] LambdaTest.InferFromUnambiguousLambdaChoices
[       OK ] LambdaTest.InferFromUnambiguousLambdaChoices (4 ms)
[ RUN      ] LambdaTest.CantInferFromAmbiguousLambdaChoices
[       OK ] LambdaTest.CantInferFromAmbiguousLambdaChoices (2 ms)
[ RUN      ] LambdaTest.InferWithTypeParamRefInLambdaTypeSignature
[       OK ] LambdaTest.InferWithTypeParamRefInLambdaTypeSignature (4 ms)
[----------] 32 tests from LambdaTest (125 ms total)

[----------] 29 tests from BareTest
[ RUN      ] BareTest.BareMethod_Simple
[       OK ] BareTest.BareMethod_Simple (6 ms)
[ RUN      ] BareTest.BareMethod_ConstructorCantBeBare
[       OK ] BareTest.BareMethod_ConstructorCantBeBare (0 ms)
[ RUN      ] BareTest.BareMethod_BehaviourCantBeBare
[       OK ] BareTest.BareMethod_BehaviourCantBeBare (1 ms)
[ RUN      ] BareTest.BareMethod_ThisReference
[       OK ] BareTest.BareMethod_ThisReference (4 ms)
[ RUN      ] BareTest.BareMethod_Subtyping
[       OK ] BareTest.BareMethod_Subtyping (7 ms)
[ RUN      ] BareTest.BareMethod_AbstractCall
[       OK ] BareTest.BareMethod_AbstractCall (4 ms)
[ RUN      ] BareTest.BareMethod_PartialApplicationYieldsBareLambda
[       OK ] BareTest.BareMethod_PartialApplicationYieldsBareLambda (6 ms)
[ RUN      ] BareTest.BareMethod_PartialApplicationArguments
[       OK ] BareTest.BareMethod_PartialApplicationArguments (3 ms)
[ RUN      ] BareTest.BareMethod_PartialApplicationTypeArguments
[       OK ] BareTest.BareMethod_PartialApplicationTypeArguments (4 ms)
[ RUN      ] BareTest.BareLambda_Simple
[       OK ] BareTest.BareLambda_Simple (6 ms)
[ RUN      ] BareTest.BareLambda_IsVal
[       OK ] BareTest.BareLambda_IsVal (6 ms)
[ RUN      ] BareTest.BareLambda_CantChangeCap
[       OK ] BareTest.BareLambda_CantChangeCap (1 ms)
[ RUN      ] BareTest.BareLambda_TypeCantChangeCap
[       OK ] BareTest.BareLambda_TypeCantChangeCap (1 ms)
[ RUN      ] BareTest.BareLambda_Captures
[       OK ] BareTest.BareLambda_Captures (0 ms)
[ RUN      ] BareTest.BareLambda_ThisReference
[       OK ] BareTest.BareLambda_ThisReference (3 ms)
[ RUN      ] BareTest.BareLambda_ReceiverCap
[       OK ] BareTest.BareLambda_ReceiverCap (1 ms)
[ RUN      ] BareTest.BareLambda_TypeParameters
[       OK ] BareTest.BareLambda_TypeParameters (0 ms)
[ RUN      ] BareTest.BareLambda_TypeTypeParameters
[       OK ] BareTest.BareLambda_TypeTypeParameters (1 ms)
[ RUN      ] BareTest.BareLambda_Subtyping
[       OK ] BareTest.BareLambda_Subtyping (7 ms)
[ RUN      ] BareTest.BareType_Union
[       OK ] BareTest.BareType_Union (3 ms)
[ RUN      ] BareTest.BareType_Match
[       OK ] BareTest.BareType_Match (3 ms)
[ RUN      ] BareTest.BareType_TypeArgument
[       OK ] BareTest.BareType_TypeArgument (3 ms)
[ RUN      ] BareTest.Codegen_BareFunctionCall
[       OK ] BareTest.Codegen_BareFunctionCall (15 ms)
[ RUN      ] BareTest.Codegen_BareLambdaCall
[       OK ] BareTest.Codegen_BareLambdaCall (21 ms)
[ RUN      ] BareTest.Codegen_BareFunctionCallbackAddressof
[       OK ] BareTest.Codegen_BareFunctionCallbackAddressof (16 ms)
[ RUN      ] BareTest.Codegen_BareFunctionCallbackPartialApplication
[       OK ] BareTest.Codegen_BareFunctionCallbackPartialApplication (43 ms)
[ RUN      ] BareTest.Codegen_BareLambdaCallback
[       OK ] BareTest.Codegen_BareLambdaCallback (25 ms)
[ RUN      ] BareTest.BareFunction_TyperefCallNoConstructorCall
[       OK ] BareTest.BareFunction_TyperefCallNoConstructorCall (19 ms)
[ RUN      ] BareTest.BareFunction_ReceiverSideEffect
[       OK ] BareTest.BareFunction_ReceiverSideEffect (15 ms)
[----------] 29 tests from BareTest (227 ms total)

[----------] 15 tests from DontcareTest
[ RUN      ] DontcareTest.TypeCantBeDontcare
[       OK ] DontcareTest.TypeCantBeDontcare (2 ms)
[ RUN      ] DontcareTest.ComplexTypeCantBeDontcare
[       OK ] DontcareTest.ComplexTypeCantBeDontcare (2 ms)
[ RUN      ] DontcareTest.CanAssignToDontcare
[       OK ] DontcareTest.CanAssignToDontcare (6 ms)
[ RUN      ] DontcareTest.CanAssignToDontcareDeclInfer
[       OK ] DontcareTest.CanAssignToDontcareDeclInfer (5 ms)
[ RUN      ] DontcareTest.CanAssignToDontcareDeclWithType
[       OK ] DontcareTest.CanAssignToDontcareDeclWithType (10 ms)
[ RUN      ] DontcareTest.CannotAssignFromDontcare
[       OK ] DontcareTest.CannotAssignFromDontcare (5 ms)
[ RUN      ] DontcareTest.CannotChainAssignDontcare
[       OK ] DontcareTest.CannotChainAssignDontcare (3 ms)
[ RUN      ] DontcareTest.CannotCallMethodOnDontcare
[       OK ] DontcareTest.CannotCallMethodOnDontcare (6 ms)
[ RUN      ] DontcareTest.CanUseDontcareNamedCapture
[       OK ] DontcareTest.CanUseDontcareNamedCapture (5 ms)
[ RUN      ] DontcareTest.CannotUseDontcareNamedCaptureNoType
[       OK ] DontcareTest.CannotUseDontcareNamedCaptureNoType (2 ms)
[ RUN      ] DontcareTest.CanUseDontcareInTupleLHS
[       OK ] DontcareTest.CanUseDontcareInTupleLHS (3 ms)
[ RUN      ] DontcareTest.CannotUseDontcareInTupleRHS
[       OK ] DontcareTest.CannotUseDontcareInTupleRHS (3 ms)
[ RUN      ] DontcareTest.CannotUseDontcareAsArgumentInCaseExpression
[       OK ] DontcareTest.CannotUseDontcareAsArgumentInCaseExpression (4 ms)
[ RUN      ] DontcareTest.CannotUseDontcareAsFunctionArgument
[       OK ] DontcareTest.CannotUseDontcareAsFunctionArgument (2 ms)
[ RUN      ] DontcareTest.CannotUseDontcareInCaseExpression
[       OK ] DontcareTest.CannotUseDontcareInCaseExpression (4 ms)
[----------] 15 tests from DontcareTest (63 ms total)

[----------] 13 tests from CodegenFFITest
[ RUN      ] CodegenFFITest.ReferenceReferenceCompatibility
[       OK ] CodegenFFITest.ReferenceReferenceCompatibility (6 ms)
[ RUN      ] CodegenFFITest.ReferencePointerCompatibility
[       OK ] CodegenFFITest.ReferencePointerCompatibility (6 ms)
[ RUN      ] CodegenFFITest.ReferenceUSizeCompatibility
[       OK ] CodegenFFITest.ReferenceUSizeCompatibility (6 ms)
[ RUN      ] CodegenFFITest.PointerPointerCompatibility
[       OK ] CodegenFFITest.PointerPointerCompatibility (8 ms)
[ RUN      ] CodegenFFITest.PointerUSizeCompatibility
[       OK ] CodegenFFITest.PointerUSizeCompatibility (6 ms)
[ RUN      ] CodegenFFITest.RuntimeCall
[       OK ] CodegenFFITest.RuntimeCall (7 ms)
[ RUN      ] CodegenFFITest.RuntimeCallConflict
[       OK ] CodegenFFITest.RuntimeCallConflict (6 ms)
[ RUN      ] CodegenFFITest.DeclParameterCountConflict
[       OK ] CodegenFFITest.DeclParameterCountConflict (6 ms)
[ RUN      ] CodegenFFITest.DeclParameterTypeConflict
[       OK ] CodegenFFITest.DeclParameterTypeConflict (5 ms)
[ RUN      ] CodegenFFITest.DeclReturnTypeConflict
[       OK ] CodegenFFITest.DeclReturnTypeConflict (8 ms)
[ RUN      ] CodegenFFITest.DeclReturnTypeVoidConflict
[       OK ] CodegenFFITest.DeclReturnTypeVoidConflict (5 ms)
[ RUN      ] CodegenFFITest.InternalABIFunctionConflict
[       OK ] CodegenFFITest.InternalABIFunctionConflict (5 ms)
[ RUN      ] CodegenFFITest.InternalABIObjectConflict
[       OK ] CodegenFFITest.InternalABIObjectConflict (5 ms)
[----------] 13 tests from CodegenFFITest (80 ms total)

[----------] 12 tests from CompilerSerialisationTest
[ RUN      ] CompilerSerialisationTest.SerialiseAfterSugar
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
    
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:344: Failure
Expected: build_package(pass, __null, __null, true, __null, true) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:120: Failure
Expected: test_compile_resume("ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type

    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
    
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
    
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter

                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
    
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
    
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    
    ^
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterSugar (358 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterScope
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter

                   ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:344: Failure
Expected: build_package(pass, __null, __null, true, __null, true) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:120: Failure
Expected: test_compile_resume("ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type

    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
    
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
    
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter

                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
    
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
    
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    
    ^
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterScope (428 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterImport
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type

    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
    
                       ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:344: Failure
Expected: build_package(pass, __null, __null, true, __null, true) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:120: Failure
Expected: test_compile_resume("ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
    
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter

                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
    
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
    
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    
    ^
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterImport (432 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterName
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type

    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
    
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
    
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:344: Failure
Expected: build_package(pass, __null, __null, true, __null, true) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:120: Failure
Expected: test_compile_resume("ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter

                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
    
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
    
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    
    ^
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterName (467 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterFlatten
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:344: Failure
Expected: build_package(pass, __null, __null, true, __null, true) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:120: Failure
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type

    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
    
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
    
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
Expected: test_compile_resume("ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter

                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
    
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
    
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    
    ^
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterFlatten (484 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterTraits
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
    
test/libponyc/util.cc:604: Failure
                       ^
Expected: ((void*)__null) != (program), actual: NULL vs NULL
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
test/libponyc/util.cc:344: Failure
    
Expected: build_package(pass, __null, __null, true, __null, true) doesn't generate new fatal failures in the current thread.
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
  Actual: it does.
    
test/libponyc/compiler_serialisation.cc:120: Failure
    ^
Expected: test_compile_resume("ir") doesn't generate new fatal failures in the current thread.
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
  Actual: it does.
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type

    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
    
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
    
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter

                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
    
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
    
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    
    ^
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterTraits (619 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterRefer
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter

                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
    
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
    
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:344: Failure
Expected: build_package(pass, __null, __null, true, __null, true) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:120: Failure
Expected: test_compile_resume("ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type

    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
    
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
    
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter

             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
    
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
    
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter

                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
    
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
    
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    
    ^
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterRefer (657 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterExpr
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:95: Failure
Expected: test_compile(src, pass) doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterExpr (400 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterVerify
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:95: Failure
Expected: test_compile(src, pass) doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterVerify (416 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterFinal
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:95: Failure
Expected: test_compile(src, pass) doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterFinal (423 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterReach
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:131: Failure
Expected: test_compile(src, pass) doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterReach (443 ms)
[ RUN      ] CompilerSerialisationTest.SerialiseAfterPaint
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/compiler_serialisation.cc:131: Failure
Expected: test_compile(src, pass) doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CompilerSerialisationTest.SerialiseAfterPaint (449 ms)
[----------] 12 tests from CompilerSerialisationTest (5576 ms total)

[----------] 58 tests from SugarExprTest
[ RUN      ] SugarExprTest.PartialMinimal
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
[       OK ] SugarExprTest.PartialMinimal (11 ms)
[ RUN      ] SugarExprTest.PartialReceiverCapability
[       OK ] SugarExprTest.PartialReceiverCapability (10 ms)
[ RUN      ] SugarExprTest.PartialReceiverCapabilityFail
[       OK ] SugarExprTest.PartialReceiverCapabilityFail (6 ms)
[ RUN      ] SugarExprTest.PartialMemberAccessFail
[       OK ] SugarExprTest.PartialMemberAccessFail (4 ms)
[ RUN      ] SugarExprTest.PartialTupleElementAccessFail
[       OK ] SugarExprTest.PartialTupleElementAccessFail (3 ms)
[ RUN      ] SugarExprTest.PartialSomeArgs
[       OK ] SugarExprTest.PartialSomeArgs (12 ms)
[ RUN      ] SugarExprTest.PartialAllArgs
[       OK ] SugarExprTest.PartialAllArgs (15 ms)
[ RUN      ] SugarExprTest.PartialDefaultArgs
[       OK ] SugarExprTest.PartialDefaultArgs (13 ms)
[ RUN      ] SugarExprTest.PartialResult
[       OK ] SugarExprTest.PartialResult (13 ms)
[ RUN      ] SugarExprTest.PartialBehaviour
[       OK ] SugarExprTest.PartialBehaviour (11 ms)
[ RUN      ] SugarExprTest.PartialRaisesError
[       OK ] SugarExprTest.PartialRaisesError (10 ms)
[ RUN      ] SugarExprTest.PartialParameterTypeParameters
[       OK ] SugarExprTest.PartialParameterTypeParameters (12 ms)
[ RUN      ] SugarExprTest.PartialReceiverTypeParameters
[       OK ] SugarExprTest.PartialReceiverTypeParameters (15 ms)
[ RUN      ] SugarExprTest.PartialFunctionTypeParameter
[       OK ] SugarExprTest.PartialFunctionTypeParameter (13 ms)
[ RUN      ] SugarExprTest.LambdaMinimal
[       OK ] SugarExprTest.LambdaMinimal (14 ms)
[ RUN      ] SugarExprTest.LambdaFull
[       OK ] SugarExprTest.LambdaFull (11 ms)
[ RUN      ] SugarExprTest.LambdaThrow
[       OK ] SugarExprTest.LambdaThrow (11 ms)
[ RUN      ] SugarExprTest.LambdaWithTypeArgs
[       OK ] SugarExprTest.LambdaWithTypeArgs (12 ms)
[ RUN      ] SugarExprTest.LambdaCaptureLocalLet
[       OK ] SugarExprTest.LambdaCaptureLocalLet (13 ms)
[ RUN      ] SugarExprTest.LambdaCaptureLocalVar
[       OK ] SugarExprTest.LambdaCaptureLocalVar (16 ms)
[ RUN      ] SugarExprTest.LambdaCaptureParameter
[       OK ] SugarExprTest.LambdaCaptureParameter (15 ms)
[ RUN      ] SugarExprTest.LambdaCaptureFieldLet
[       OK ] SugarExprTest.LambdaCaptureFieldLet (14 ms)
[ RUN      ] SugarExprTest.LambdaCaptureFieldVar
[       OK ] SugarExprTest.LambdaCaptureFieldVar (11 ms)
[ RUN      ] SugarExprTest.LambdaNamed
[       OK ] SugarExprTest.LambdaNamed (13 ms)
[ RUN      ] SugarExprTest.Location
[       OK ] SugarExprTest.Location (12 ms)
[ RUN      ] SugarExprTest.LocationDefaultArg
[       OK ] SugarExprTest.LocationDefaultArg (17 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveAllCasesOfUnion
[       OK ] SugarExprTest.MatchExhaustiveAllCasesOfUnion (7 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustiveSomeCasesMissing
[       OK ] SugarExprTest.MatchNonExhaustiveSomeCasesMissing (5 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustiveSomeCasesGuarded
[       OK ] SugarExprTest.MatchNonExhaustiveSomeCasesGuarded (5 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveAllCasesPlusSomeCasesGuarded
[       OK ] SugarExprTest.MatchExhaustiveAllCasesPlusSomeCasesGuarded (6 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustiveSomeCasesEqMethod
[       OK ] SugarExprTest.MatchNonExhaustiveSomeCasesEqMethod (5 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveAllCasesPlusSomeCasesEqMethod
[       OK ] SugarExprTest.MatchExhaustiveAllCasesPlusSomeCasesEqMethod (5 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveAllCasesIncludingDontCareAndTuple
[       OK ] SugarExprTest.MatchExhaustiveAllCasesIncludingDontCareAndTuple (4 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustiveSomeTupleCaseElementsMatchOnValue
[       OK ] SugarExprTest.MatchNonExhaustiveSomeTupleCaseElementsMatchOnValue (4 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveAllCasesPrimitiveValues
[       OK ] SugarExprTest.MatchExhaustiveAllCasesPrimitiveValues (5 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustivePrimitiveValuesSomeCasesMissing
[       OK ] SugarExprTest.MatchNonExhaustivePrimitiveValuesSomeCasesMissing (4 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustivePrimitiveValuesMachineWords
[       OK ] SugarExprTest.MatchNonExhaustivePrimitiveValuesMachineWords (4 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustivePrimitiveValuesCustomEqMethod
[       OK ] SugarExprTest.MatchNonExhaustivePrimitiveValuesCustomEqMethod (4 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustiveClassValues
[       OK ] SugarExprTest.MatchNonExhaustiveClassValues (4 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveTupleIncludesDontCareType
[       OK ] SugarExprTest.MatchExhaustiveTupleIncludesDontCareType (4 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustiveAllCasesJumpAway
[       OK ] SugarExprTest.MatchNonExhaustiveAllCasesJumpAway (4 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveSomeCasesJumpAway
[       OK ] SugarExprTest.MatchExhaustiveSomeCasesJumpAway (4 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveSingleElementTuples
[       OK ] SugarExprTest.MatchExhaustiveSingleElementTuples (5 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveElseClause
[       OK ] SugarExprTest.MatchExhaustiveElseClause (4 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveUnreachableCase
[       OK ] SugarExprTest.MatchExhaustiveUnreachableCase (4 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveUnreachableCases
[       OK ] SugarExprTest.MatchExhaustiveUnreachableCases (4 ms)
[ RUN      ] SugarExprTest.MatchExhaustiveEquatableOfSubType
[       OK ] SugarExprTest.MatchExhaustiveEquatableOfSubType (4 ms)
[ RUN      ] SugarExprTest.MatchNonExhaustiveSubsetOfEquatableOfSubType
[       OK ] SugarExprTest.MatchNonExhaustiveSubsetOfEquatableOfSubType (4 ms)
[ RUN      ] SugarExprTest.MatchStructuralEqualityOnIncompatibleUnion
[       OK ] SugarExprTest.MatchStructuralEqualityOnIncompatibleUnion (5 ms)
[ RUN      ] SugarExprTest.As
[       OK ] SugarExprTest.As (14 ms)
[ RUN      ] SugarExprTest.AsSameType
[       OK ] SugarExprTest.AsSameType (3 ms)
[ RUN      ] SugarExprTest.AsSubtype
[       OK ] SugarExprTest.AsSubtype (1 ms)
[ RUN      ] SugarExprTest.AsTupleSubtype
[       OK ] SugarExprTest.AsTupleSubtype (2 ms)
[ RUN      ] SugarExprTest.AsTuple
[       OK ] SugarExprTest.AsTuple (13 ms)
[ RUN      ] SugarExprTest.AsNestedTuple
[       OK ] SugarExprTest.AsNestedTuple (11 ms)
[ RUN      ] SugarExprTest.AsDontCare
[       OK ] SugarExprTest.AsDontCare (2 ms)
[ RUN      ] SugarExprTest.AsDontCare2Tuple
[       OK ] SugarExprTest.AsDontCare2Tuple (11 ms)
[ RUN      ] SugarExprTest.AsDontCareMultiTuple
[       OK ] SugarExprTest.AsDontCareMultiTuple (11 ms)
[----------] 58 tests from SugarExprTest (481 ms total)

[----------] 10 tests from ReferTest
[ RUN      ] ReferTest.WhileLoopConsumeLet
[       OK ] ReferTest.WhileLoopConsumeLet (3 ms)
[ RUN      ] ReferTest.WhileLoopConsumeLetInCondition
[       OK ] ReferTest.WhileLoopConsumeLetInCondition (3 ms)
[ RUN      ] ReferTest.WhileLoopDeclareLetAndUseOutside
[       OK ] ReferTest.WhileLoopDeclareLetAndUseOutside (3 ms)
[ RUN      ] ReferTest.RepeatLoopConsumeLet
[       OK ] ReferTest.RepeatLoopConsumeLet (2 ms)
[ RUN      ] ReferTest.RepeatLoopConsumeLetInCondition
[       OK ] ReferTest.RepeatLoopConsumeLetInCondition (1 ms)
[ RUN      ] ReferTest.RepeatLoopDeclareLetAndUseOutside
[       OK ] ReferTest.RepeatLoopDeclareLetAndUseOutside (2 ms)
[ RUN      ] ReferTest.RepeatLoopDefineVarAndUseOutside
[       OK ] ReferTest.RepeatLoopDefineVarAndUseOutside (2 ms)
[ RUN      ] ReferTest.RepeatLoopDefineVarAfterBreakAndUseOutside
[       OK ] ReferTest.RepeatLoopDefineVarAfterBreakAndUseOutside (3 ms)
[ RUN      ] ReferTest.RepeatLoopDefineVarAfterNestedBreakAndUseOutside
[       OK ] ReferTest.RepeatLoopDefineVarAfterNestedBreakAndUseOutside (1 ms)
[ RUN      ] ReferTest.RepeatLoopDefineVarAndUseInCondition
[       OK ] ReferTest.RepeatLoopDefineVarAndUseInCondition (2 ms)
[----------] 10 tests from ReferTest (23 ms total)

[----------] 11 tests from AnnotationsTest
[ RUN      ] AnnotationsTest.AnnotateTypes
[       OK ] AnnotationsTest.AnnotateTypes (1 ms)
[ RUN      ] AnnotationsTest.AnnotateMethods
[       OK ] AnnotationsTest.AnnotateMethods (1 ms)
[ RUN      ] AnnotationsTest.AnnotateCompoundExpr
[       OK ] AnnotationsTest.AnnotateCompoundExpr (1 ms)
[ RUN      ] AnnotationsTest.UnterminatedAnnotationError
[       OK ] AnnotationsTest.UnterminatedAnnotationError (0 ms)
[ RUN      ] AnnotationsTest.InvalidAnnotationError
[       OK ] AnnotationsTest.InvalidAnnotationError (1 ms)
[ RUN      ] AnnotationsTest.AnnotationsArePresent
[       OK ] AnnotationsTest.AnnotationsArePresent (1 ms)
[ RUN      ] AnnotationsTest.AnnotateSugar
[       OK ] AnnotationsTest.AnnotateSugar (2 ms)
[ RUN      ] AnnotationsTest.AnnotateLambda
[       OK ] AnnotationsTest.AnnotateLambda (6 ms)
[ RUN      ] AnnotationsTest.InternalAnnotation
[       OK ] AnnotationsTest.InternalAnnotation (1 ms)
[ RUN      ] AnnotationsTest.StandardAnnotationLocationGood
[       OK ] AnnotationsTest.StandardAnnotationLocationGood (1 ms)
[ RUN      ] AnnotationsTest.StandardAnnotationLocationBad
[       OK ] AnnotationsTest.StandardAnnotationLocationBad (1 ms)
[----------] 11 tests from AnnotationsTest (16 ms total)

[----------] 117 tests from LexerTest
[ RUN      ] LexerTest.Id
[       OK ] LexerTest.Id (0 ms)
[ RUN      ] LexerTest.IdStartingWithKeyword
[       OK ] LexerTest.IdStartingWithKeyword (0 ms)
[ RUN      ] LexerTest.Keyword
[       OK ] LexerTest.Keyword (0 ms)
[ RUN      ] LexerTest.Symbol1Char
[       OK ] LexerTest.Symbol1Char (0 ms)
[ RUN      ] LexerTest.Symbol2CharStartingWith1CharSymbol
[       OK ] LexerTest.Symbol2CharStartingWith1CharSymbol (0 ms)
[ RUN      ] LexerTest.Symbol3CharStartingWith1CharSymbol
[       OK ] LexerTest.Symbol3CharStartingWith1CharSymbol (0 ms)
[ RUN      ] LexerTest.SymbolNewAtStart
[       OK ] LexerTest.SymbolNewAtStart (0 ms)
[ RUN      ] LexerTest.SymbolNewAfterWhitespace
[       OK ] LexerTest.SymbolNewAfterWhitespace (0 ms)
[ RUN      ] LexerTest.SymbolNewAfterNewline
[       OK ] LexerTest.SymbolNewAfterNewline (0 ms)
[ RUN      ] LexerTest.SymbolNotNewAfterOther
[       OK ] LexerTest.SymbolNotNewAfterOther (0 ms)
[ RUN      ] LexerTest.EofIfEmpty
[       OK ] LexerTest.EofIfEmpty (0 ms)
[ RUN      ] LexerTest.BadChar
[       OK ] LexerTest.BadChar (0 ms)
[ RUN      ] LexerTest.Lparen
[       OK ] LexerTest.Lparen (0 ms)
[ RUN      ] LexerTest.LparenNew
[       OK ] LexerTest.LparenNew (0 ms)
[ RUN      ] LexerTest.LparenAfterBlockComment
[       OK ] LexerTest.LparenAfterBlockComment (0 ms)
[ RUN      ] LexerTest.Lsquare
[       OK ] LexerTest.Lsquare (0 ms)
[ RUN      ] LexerTest.LsquareNew
[       OK ] LexerTest.LsquareNew (0 ms)
[ RUN      ] LexerTest.LsquareAfterBlockComment
[       OK ] LexerTest.LsquareAfterBlockComment (0 ms)
[ RUN      ] LexerTest.Minus
[       OK ] LexerTest.Minus (0 ms)
[ RUN      ] LexerTest.MinusNew
[       OK ] LexerTest.MinusNew (0 ms)
[ RUN      ] LexerTest.MinusAfterBlockComment
[       OK ] LexerTest.MinusAfterBlockComment (0 ms)
[ RUN      ] LexerTest.String
[       OK ] LexerTest.String (0 ms)
[ RUN      ] LexerTest.StringEnds
[       OK ] LexerTest.StringEnds (0 ms)
[ RUN      ] LexerTest.StringEscapedDoubleQuote
[       OK ] LexerTest.StringEscapedDoubleQuote (0 ms)
[ RUN      ] LexerTest.StringEscapedSlashAtEnd
[       OK ] LexerTest.StringEscapedSlashAtEnd (0 ms)
[ RUN      ] LexerTest.StringHexEscape
[       OK ] LexerTest.StringHexEscape (0 ms)
[ RUN      ] LexerTest.StringUnicode4Escape
[       OK ] LexerTest.StringUnicode4Escape (0 ms)
[ RUN      ] LexerTest.StringUnicode6Escape
[       OK ] LexerTest.StringUnicode6Escape (0 ms)
[ RUN      ] LexerTest.TripleString
[       OK ] LexerTest.TripleString (0 ms)
[ RUN      ] LexerTest.TripleStringEnds
[       OK ] LexerTest.TripleStringEnds (0 ms)
[ RUN      ] LexerTest.TripleStringContainingDoubleQuote
[       OK ] LexerTest.TripleStringContainingDoubleQuote (0 ms)
[ RUN      ] LexerTest.TripleStringContaining2DoubleQuotes
[       OK ] LexerTest.TripleStringContaining2DoubleQuotes (0 ms)
[ RUN      ] LexerTest.TripleStringEndingWithExtraDoubleQuotes
[       OK ] LexerTest.TripleStringEndingWithExtraDoubleQuotes (0 ms)
[ RUN      ] LexerTest.TripleStringEndingWith3ExtraDoubleQuotes
[       OK ] LexerTest.TripleStringEndingWith3ExtraDoubleQuotes (0 ms)
[ RUN      ] LexerTest.TripleStringEndingWith4ExtraDoubleQuotes
[       OK ] LexerTest.TripleStringEndingWith4ExtraDoubleQuotes (0 ms)
[ RUN      ] LexerTest.TripleStringMultipleLines
[       OK ] LexerTest.TripleStringMultipleLines (0 ms)
[ RUN      ] LexerTest.TripleStringMultipleLinesBlocksNewline
[       OK ] LexerTest.TripleStringMultipleLinesBlocksNewline (0 ms)
[ RUN      ] LexerTest.TripleStringEmpty
[       OK ] LexerTest.TripleStringEmpty (0 ms)
[ RUN      ] LexerTest.TripleStringOnlyLinebreak
[       OK ] LexerTest.TripleStringOnlyLinebreak (0 ms)
[ RUN      ] LexerTest.TripleStringOnlyWhitespace
[       OK ] LexerTest.TripleStringOnlyWhitespace (0 ms)
[ RUN      ] LexerTest.TripleStringWithoutNewline
[       OK ] LexerTest.TripleStringWithoutNewline (0 ms)
[ RUN      ] LexerTest.TripleStringWithNonWhiteSpaceBeforeFirstNewline
[       OK ] LexerTest.TripleStringWithNonWhiteSpaceBeforeFirstNewline (0 ms)
[ RUN      ] LexerTest.TripleStringContainingEscape
[       OK ] LexerTest.TripleStringContainingEscape (0 ms)
[ RUN      ] LexerTest.TripleStringStripsEqualLeadingWhitespace
[       OK ] LexerTest.TripleStringStripsEqualLeadingWhitespace (0 ms)
[ RUN      ] LexerTest.TripleStringStripsIncreasingLeadingWhitespace
[       OK ] LexerTest.TripleStringStripsIncreasingLeadingWhitespace (0 ms)
[ RUN      ] LexerTest.TripleStringStripsDecreasingLeadingWhitespace
[       OK ] LexerTest.TripleStringStripsDecreasingLeadingWhitespace (0 ms)
[ RUN      ] LexerTest.TripleStringStripsVariableLeadingWhitespace
[       OK ] LexerTest.TripleStringStripsVariableLeadingWhitespace (0 ms)
[ RUN      ] LexerTest.TripleStringStripsVariableLeadingWhitespaceWithBlankLines
[       OK ] LexerTest.TripleStringStripsVariableLeadingWhitespaceWithBlankLines (0 ms)
[ RUN      ] LexerTest.TripleStringWithLeadingEmptyLine
[       OK ] LexerTest.TripleStringWithLeadingEmptyLine (0 ms)
[ RUN      ] LexerTest.TripleStringWithLeadingEmptyLineAndIndentedFirstLine
[       OK ] LexerTest.TripleStringWithLeadingEmptyLineAndIndentedFirstLine (0 ms)
[ RUN      ] LexerTest.TripleStringWithNonLeadingEmptyLine
[       OK ] LexerTest.TripleStringWithNonLeadingEmptyLine (0 ms)
[ RUN      ] LexerTest.TripleStringWithoutIndentWithTrailingWsLine
[       OK ] LexerTest.TripleStringWithoutIndentWithTrailingWsLine (0 ms)
[ RUN      ] LexerTest.TripleStringWithoutIndentWithTrailingWsAndNonWsLine
[       OK ] LexerTest.TripleStringWithoutIndentWithTrailingWsAndNonWsLine (0 ms)
[ RUN      ] LexerTest.TripleStringUnterminated
[       OK ] LexerTest.TripleStringUnterminated (0 ms)
[ RUN      ] LexerTest.TripleStringUnterminatedEndWithDoubleQuote
[       OK ] LexerTest.TripleStringUnterminatedEndWithDoubleQuote (0 ms)
[ RUN      ] LexerTest.TripleStringUnterminatedEndWith2DoubleQuotes
[       OK ] LexerTest.TripleStringUnterminatedEndWith2DoubleQuotes (0 ms)
[ RUN      ] LexerTest.EmptyStringAtEndOfSource
[       OK ] LexerTest.EmptyStringAtEndOfSource (0 ms)
[ RUN      ] LexerTest.SingleCharacterLiteral
[       OK ] LexerTest.SingleCharacterLiteral (0 ms)
[ RUN      ] LexerTest.EscapeCharacterLiteral
[       OK ] LexerTest.EscapeCharacterLiteral (0 ms)
[ RUN      ] LexerTest.HexEscapeCharacterLiteral
[       OK ] LexerTest.HexEscapeCharacterLiteral (0 ms)
[ RUN      ] LexerTest.UTF8CharacterLiteral
[       OK ] LexerTest.UTF8CharacterLiteral (0 ms)
[ RUN      ] LexerTest.MixedMultiCharacterLiteral
[       OK ] LexerTest.MixedMultiCharacterLiteral (0 ms)
[ RUN      ] LexerTest.InvalidEscapeCharacterLiteral
[       OK ] LexerTest.InvalidEscapeCharacterLiteral (0 ms)
[ RUN      ] LexerTest.EmptyCharacterLiteral
[       OK ] LexerTest.EmptyCharacterLiteral (0 ms)
[ RUN      ] LexerTest.KeywordAfterError
[       OK ] LexerTest.KeywordAfterError (0 ms)
[ RUN      ] LexerTest.IdAfterError
[       OK ] LexerTest.IdAfterError (0 ms)
[ RUN      ] LexerTest.OperatorAfterError
[       OK ] LexerTest.OperatorAfterError (0 ms)
[ RUN      ] LexerTest.IntegerAfterError
[       OK ] LexerTest.IntegerAfterError (0 ms)
[ RUN      ] LexerTest.MultipleAfterError
[       OK ] LexerTest.MultipleAfterError (0 ms)
[ RUN      ] LexerTest.Int0
[       OK ] LexerTest.Int0 (0 ms)
[ RUN      ] LexerTest.Int0Finishes
[       OK ] LexerTest.Int0Finishes (0 ms)
[ RUN      ] LexerTest.IntDecimal
[       OK ] LexerTest.IntDecimal (0 ms)
[ RUN      ] LexerTest.IntDecimalWithSeparators
[       OK ] LexerTest.IntDecimalWithSeparators (0 ms)
[ RUN      ] LexerTest.IntDecimalWithTrailingSeparator
[       OK ] LexerTest.IntDecimalWithTrailingSeparator (0 ms)
[ RUN      ] LexerTest.IntDecimalDot
[       OK ] LexerTest.IntDecimalDot (0 ms)
[ RUN      ] LexerTest.IntDecimalBadChar
[       OK ] LexerTest.IntDecimalBadChar (0 ms)
[ RUN      ] LexerTest.IntBinary
[       OK ] LexerTest.IntBinary (0 ms)
[ RUN      ] LexerTest.IntBinaryWithSeparators
[       OK ] LexerTest.IntBinaryWithSeparators (0 ms)
[ RUN      ] LexerTest.IntBinaryIncomplete
[       OK ] LexerTest.IntBinaryIncomplete (0 ms)
[ RUN      ] LexerTest.IntBinaryBadChar
[       OK ] LexerTest.IntBinaryBadChar (0 ms)
[ RUN      ] LexerTest.IntHex
[       OK ] LexerTest.IntHex (0 ms)
[ RUN      ] LexerTest.IntHexWithSeparator
[       OK ] LexerTest.IntHexWithSeparator (0 ms)
[ RUN      ] LexerTest.IntHexIncomplete
[       OK ] LexerTest.IntHexIncomplete (0 ms)
[ RUN      ] LexerTest.IntHexBadChar
[       OK ] LexerTest.IntHexBadChar (0 ms)
[ RUN      ] LexerTest.IntHexNoOverflow
[       OK ] LexerTest.IntHexNoOverflow (0 ms)
[ RUN      ] LexerTest.IntHexOverflow
[       OK ] LexerTest.IntHexOverflow (0 ms)
[ RUN      ] LexerTest.IntHexDigitOverflow
[       OK ] LexerTest.IntHexDigitOverflow (0 ms)
[ RUN      ] LexerTest.IntNoOctal
[       OK ] LexerTest.IntNoOctal (0 ms)
[ RUN      ] LexerTest.FloatDotOnly
[       OK ] LexerTest.FloatDotOnly (0 ms)
[ RUN      ] LexerTest.FloatEOnly
[       OK ] LexerTest.FloatEOnly (0 ms)
[ RUN      ] LexerTest.FloatNegativeE
[       OK ] LexerTest.FloatNegativeE (0 ms)
[ RUN      ] LexerTest.FloatPositiveE
[       OK ] LexerTest.FloatPositiveE (0 ms)
[ RUN      ] LexerTest.FloatDotAndE
[       OK ] LexerTest.FloatDotAndE (0 ms)
[ RUN      ] LexerTest.FloatDotAndNegativeE
[       OK ] LexerTest.FloatDotAndNegativeE (0 ms)
[ RUN      ] LexerTest.FloatLeading0
[       OK ] LexerTest.FloatLeading0 (0 ms)
[ RUN      ] LexerTest.FloatExpLeading0
[       OK ] LexerTest.FloatExpLeading0 (0 ms)
[ RUN      ] LexerTest.FloatIllegalExp
[       OK ] LexerTest.FloatIllegalExp (0 ms)
[ RUN      ] LexerTest.LineComment
[       OK ] LexerTest.LineComment (0 ms)
[ RUN      ] LexerTest.LineCommentWith3Slashes
[       OK ] LexerTest.LineCommentWith3Slashes (0 ms)
[ RUN      ] LexerTest.LineCommentContainingBlockCommentStart
[       OK ] LexerTest.LineCommentContainingBlockCommentStart (0 ms)
[ RUN      ] LexerTest.LineCommentEndingWithSlash
[       OK ] LexerTest.LineCommentEndingWithSlash (0 ms)
[ RUN      ] LexerTest.BlockComment
[       OK ] LexerTest.BlockComment (0 ms)
[ RUN      ] LexerTest.BlockCommentOverMultipleLines
[       OK ] LexerTest.BlockCommentOverMultipleLines (0 ms)
[ RUN      ] LexerTest.BlockCommentStartingWith2Stars
[       OK ] LexerTest.BlockCommentStartingWith2Stars (0 ms)
[ RUN      ] LexerTest.BlockCommentEndingWith2Stars
[       OK ] LexerTest.BlockCommentEndingWith2Stars (0 ms)
[ RUN      ] LexerTest.BlockCommentNested
[       OK ] LexerTest.BlockCommentNested (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedStartingWith2Slashes
[       OK ] LexerTest.BlockCommentNestedStartingWith2Slashes (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedStartingWith2Stars
[       OK ] LexerTest.BlockCommentNestedStartingWith2Stars (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedEndingWith2Stars
[       OK ] LexerTest.BlockCommentNestedEndingWith2Stars (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedEndingWith2Slashes
[       OK ] LexerTest.BlockCommentNestedEndingWith2Slashes (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedInnerEmpty
[       OK ] LexerTest.BlockCommentNestedInnerEmpty (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedInner3Stars
[       OK ] LexerTest.BlockCommentNestedInner3Stars (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedStartsNoWhitespace
[       OK ] LexerTest.BlockCommentNestedStartsNoWhitespace (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedEndsNoWhitespace
[       OK ] LexerTest.BlockCommentNestedEndsNoWhitespace (0 ms)
[ RUN      ] LexerTest.BlockCommentContainsLineComment
[       OK ] LexerTest.BlockCommentContainsLineComment (0 ms)
[ RUN      ] LexerTest.BlockCommentNestedDeeper
[       OK ] LexerTest.BlockCommentNestedDeeper (0 ms)
[ RUN      ] LexerTest.Print
[       OK ] LexerTest.Print (0 ms)
[----------] 117 tests from LexerTest (0 ms total)

[----------] 99 tests from SugarTest
[ RUN      ] SugarTest.DataType
[       OK ] SugarTest.DataType (3 ms)
[ RUN      ] SugarTest.ClassWithoutCreate
[       OK ] SugarTest.ClassWithoutCreate (1 ms)
[ RUN      ] SugarTest.ClassWithCreateConstructor
[       OK ] SugarTest.ClassWithCreateConstructor (2 ms)
[ RUN      ] SugarTest.ClassWithConstructor
[       OK ] SugarTest.ClassWithConstructor (1 ms)
[ RUN      ] SugarTest.ClassWithCreateFunction
[       OK ] SugarTest.ClassWithCreateFunction (2 ms)
[ RUN      ] SugarTest.ClassWithoutFieldOrCreate
[       OK ] SugarTest.ClassWithoutFieldOrCreate (2 ms)
[ RUN      ] SugarTest.ClassWithoutDefCap
[       OK ] SugarTest.ClassWithoutDefCap (2 ms)
[ RUN      ] SugarTest.ClassWithInitializedField
[       OK ] SugarTest.ClassWithInitializedField (2 ms)
[ RUN      ] SugarTest.ClassWithInitializedFieldAndManyConstructors
[       OK ] SugarTest.ClassWithInitializedFieldAndManyConstructors (3 ms)
[ RUN      ] SugarTest.ClassWithInitializedFieldsAndDocString
[       OK ] SugarTest.ClassWithInitializedFieldsAndDocString (1 ms)
[ RUN      ] SugarTest.ActorWithInitializedField
[       OK ] SugarTest.ActorWithInitializedField (3 ms)
[ RUN      ] SugarTest.ActorWithInitializedFieldAndManyConstructors
[       OK ] SugarTest.ActorWithInitializedFieldAndManyConstructors (3 ms)
[ RUN      ] SugarTest.ActorWithInitializedFieldsAndDocString
[       OK ] SugarTest.ActorWithInitializedFieldsAndDocString (1 ms)
[ RUN      ] SugarTest.ActorWithCreateConstructor
[       OK ] SugarTest.ActorWithCreateConstructor (3 ms)
[ RUN      ] SugarTest.ActorWithConstructor
[       OK ] SugarTest.ActorWithConstructor (2 ms)
[ RUN      ] SugarTest.ActorWithCreateFunction
[       OK ] SugarTest.ActorWithCreateFunction (2 ms)
[ RUN      ] SugarTest.ActorWithCreateBehaviour
[       OK ] SugarTest.ActorWithCreateBehaviour (1 ms)
[ RUN      ] SugarTest.ActorWithoutFieldOrCreate
[       OK ] SugarTest.ActorWithoutFieldOrCreate (2 ms)
[ RUN      ] SugarTest.ActorWithoutDefCap
[       OK ] SugarTest.ActorWithoutDefCap (2 ms)
[ RUN      ] SugarTest.TraitWithCap
[       OK ] SugarTest.TraitWithCap (1 ms)
[ RUN      ] SugarTest.TraitWithoutCap
[       OK ] SugarTest.TraitWithoutCap (2 ms)
[ RUN      ] SugarTest.TypeParamWithConstraint
[       OK ] SugarTest.TypeParamWithConstraint (1 ms)
[ RUN      ] SugarTest.TypeParamWithoutConstraint
[       OK ] SugarTest.TypeParamWithoutConstraint (1 ms)
[ RUN      ] SugarTest.ConstructorNoReturnType
[       OK ] SugarTest.ConstructorNoReturnType (2 ms)
[ RUN      ] SugarTest.ConstructorInActor
[       OK ] SugarTest.ConstructorInActor (1 ms)
[ RUN      ] SugarTest.ConstructorInDataType
[       OK ] SugarTest.ConstructorInDataType (2 ms)
[ RUN      ] SugarTest.ConstructorInGenericClass
[       OK ] SugarTest.ConstructorInGenericClass (1 ms)
[ RUN      ] SugarTest.BehaviourReturnType
[       OK ] SugarTest.BehaviourReturnType (1 ms)
[ RUN      ] SugarTest.FunctionComplete
[       OK ] SugarTest.FunctionComplete (2 ms)
[ RUN      ] SugarTest.FunctionNoReturnNoBody
[       OK ] SugarTest.FunctionNoReturnNoBody (1 ms)
[ RUN      ] SugarTest.FunctionNoReturnBody
[       OK ] SugarTest.FunctionNoReturnBody (2 ms)
[ RUN      ] SugarTest.FunctionParamMustBeId
[       OK ] SugarTest.FunctionParamMustBeId (3 ms)
[ RUN      ] SugarTest.FunctionParamTypeRequired
[       OK ] SugarTest.FunctionParamTypeRequired (1 ms)
[ RUN      ] SugarTest.FunctionGuardsNotAllowed
[       OK ] SugarTest.FunctionGuardsNotAllowed (2 ms)
[ RUN      ] SugarTest.IfWithoutElse
[       OK ] SugarTest.IfWithoutElse (1 ms)
[ RUN      ] SugarTest.IfWithElse
[       OK ] SugarTest.IfWithElse (0 ms)
[ RUN      ] SugarTest.WhileWithoutElse
[       OK ] SugarTest.WhileWithoutElse (2 ms)
[ RUN      ] SugarTest.WhileWithElse
[       OK ] SugarTest.WhileWithElse (1 ms)
[ RUN      ] SugarTest.TryWithElseAndThen
[       OK ] SugarTest.TryWithElseAndThen (1 ms)
[ RUN      ] SugarTest.TryWithoutElseOrThen
[       OK ] SugarTest.TryWithoutElseOrThen (2 ms)
[ RUN      ] SugarTest.TryWithoutElse
[       OK ] SugarTest.TryWithoutElse (3 ms)
[ RUN      ] SugarTest.TryWithoutThen
[       OK ] SugarTest.TryWithoutThen (1 ms)
[ RUN      ] SugarTest.ForWithoutElse
[       OK ] SugarTest.ForWithoutElse (2 ms)
[ RUN      ] SugarTest.ForWithElse
[       OK ] SugarTest.ForWithElse (3 ms)
[ RUN      ] SugarTest.MultiIteratorFor
[       OK ] SugarTest.MultiIteratorFor (2 ms)
[ RUN      ] SugarTest.CaseWithBody
[       OK ] SugarTest.CaseWithBody (1 ms)
[ RUN      ] SugarTest.CaseWithBodyAndFollowingCase
[       OK ] SugarTest.CaseWithBodyAndFollowingCase (1 ms)
[ RUN      ] SugarTest.CaseWithNoBody
[       OK ] SugarTest.CaseWithNoBody (2 ms)
[ RUN      ] SugarTest.CaseWithNoBodyMultiple
[       OK ] SugarTest.CaseWithNoBodyMultiple (2 ms)
[ RUN      ] SugarTest.CasePatternCapture
[       OK ] SugarTest.CasePatternCapture (2 ms)
[ RUN      ] SugarTest.CasePatternCaptureVar
[       OK ] SugarTest.CasePatternCaptureVar (1 ms)
[ RUN      ] SugarTest.CasePatternCaptureInTuple
[       OK ] SugarTest.CasePatternCaptureInTuple (2 ms)
[ RUN      ] SugarTest.CasePatternCaptureInNestedTuple
[       OK ] SugarTest.CasePatternCaptureInNestedTuple (2 ms)
[ RUN      ] SugarTest.CasePatternCaptureNoType
[       OK ] SugarTest.CasePatternCaptureNoType (1 ms)
[ RUN      ] SugarTest.CasePatternCaptureTupleType
[       OK ] SugarTest.CasePatternCaptureTupleType (0 ms)
[ RUN      ] SugarTest.CasePatternNotCaptureInSequence
[       OK ] SugarTest.CasePatternNotCaptureInSequence (2 ms)
[ RUN      ] SugarTest.MatchWithNoElse
[       OK ] SugarTest.MatchWithNoElse (2 ms)
[ RUN      ] SugarTest.UpdateLhsNotCall
[       OK ] SugarTest.UpdateLhsNotCall (2 ms)
[ RUN      ] SugarTest.UpdateNoArgs
[       OK ] SugarTest.UpdateNoArgs (2 ms)
[ RUN      ] SugarTest.UpdateWithArgs
[       OK ] SugarTest.UpdateWithArgs (2 ms)
[ RUN      ] SugarTest.Add
[       OK ] SugarTest.Add (2 ms)
[ RUN      ] SugarTest.Sub
[       OK ] SugarTest.Sub (1 ms)
[ RUN      ] SugarTest.Multiply
[       OK ] SugarTest.Multiply (3 ms)
[ RUN      ] SugarTest.Divide
[       OK ] SugarTest.Divide (1 ms)
[ RUN      ] SugarTest.Mod
[       OK ] SugarTest.Mod (2 ms)
[ RUN      ] SugarTest.UnaryMinus
[       OK ] SugarTest.UnaryMinus (1 ms)
[ RUN      ] SugarTest.ShiftLeft
[       OK ] SugarTest.ShiftLeft (1 ms)
[ RUN      ] SugarTest.ShiftRight
[       OK ] SugarTest.ShiftRight (1 ms)
[ RUN      ] SugarTest.And
[       OK ] SugarTest.And (1 ms)
[ RUN      ] SugarTest.Or
[       OK ] SugarTest.Or (1 ms)
[ RUN      ] SugarTest.Xor
[       OK ] SugarTest.Xor (2 ms)
[ RUN      ] SugarTest.Not
[       OK ] SugarTest.Not (1 ms)
[ RUN      ] SugarTest.Eq
[       OK ] SugarTest.Eq (2 ms)
[ RUN      ] SugarTest.Ne
[       OK ] SugarTest.Ne (1 ms)
[ RUN      ] SugarTest.Lt
[       OK ] SugarTest.Lt (2 ms)
[ RUN      ] SugarTest.Le
[       OK ] SugarTest.Le (2 ms)
[ RUN      ] SugarTest.Gt
[       OK ] SugarTest.Gt (3 ms)
[ RUN      ] SugarTest.Ge
[       OK ] SugarTest.Ge (2 ms)
[ RUN      ] SugarTest.LambdaTypeSimple
[       OK ] SugarTest.LambdaTypeSimple (1 ms)
[ RUN      ] SugarTest.LambdaTypeNamed
[       OK ] SugarTest.LambdaTypeNamed (2 ms)
[ RUN      ] SugarTest.LambdaTypeParamsAndReturn
[       OK ] SugarTest.LambdaTypeParamsAndReturn (1 ms)
[ RUN      ] SugarTest.LambdaTypeFunTypeParams
[       OK ] SugarTest.LambdaTypeFunTypeParams (2 ms)
[ RUN      ] SugarTest.LambdaTypeCapAndError
[       OK ] SugarTest.LambdaTypeCapAndError (1 ms)
[ RUN      ] SugarTest.LambdaTypeScopeTypeParams
[       OK ] SugarTest.LambdaTypeScopeTypeParams (2 ms)
[ RUN      ] SugarTest.LambdaTypeScopeTypeParamsInFlet
[       OK ] SugarTest.LambdaTypeScopeTypeParamsInFlet (2 ms)
[ RUN      ] SugarTest.LambdaTypeSimpleAliased
[       OK ] SugarTest.LambdaTypeSimpleAliased (2 ms)
[ RUN      ] SugarTest.UseGuardNormalises
[       OK ] SugarTest.UseGuardNormalises (3 ms)
[ RUN      ] SugarTest.UseGuardNeverTrue
[       OK ] SugarTest.UseGuardNeverTrue (1 ms)
[ RUN      ] SugarTest.UseGuardAlwaysTrue
[       OK ] SugarTest.UseGuardAlwaysTrue (1 ms)
[ RUN      ] SugarTest.UseGuardUserFlagNormalises
[       OK ] SugarTest.UseGuardUserFlagNormalises (2 ms)
[ RUN      ] SugarTest.IfdefElseCondition
[       OK ] SugarTest.IfdefElseCondition (1 ms)
[ RUN      ] SugarTest.IfdefSugarElse
[       OK ] SugarTest.IfdefSugarElse (2 ms)
[ RUN      ] SugarTest.NestedIfdefCondition
[       OK ] SugarTest.NestedIfdefCondition (2 ms)
[ RUN      ] SugarTest.IfdefElseConditionNeverTrue
[       OK ] SugarTest.IfdefElseConditionNeverTrue (1 ms)
[ RUN      ] SugarTest.IfdefElseConditionAlwaysTrue
[       OK ] SugarTest.IfdefElseConditionAlwaysTrue (1 ms)
[ RUN      ] SugarTest.NestedIfdefElseConditionNeverTrue
[       OK ] SugarTest.NestedIfdefElseConditionNeverTrue (1 ms)
[ RUN      ] SugarTest.NestedIfdefElseConditionAlwaysTrue
[       OK ] SugarTest.NestedIfdefElseConditionAlwaysTrue (1 ms)
[ RUN      ] SugarTest.IfdefPosix
[       OK ] SugarTest.IfdefPosix (3 ms)
[ RUN      ] SugarTest.AsOperatorWithLambdaType
[       OK ] SugarTest.AsOperatorWithLambdaType (1 ms)
[----------] 99 tests from SugarTest (168 ms total)

[----------] 40 tests from TraitsTest
[ RUN      ] TraitsTest.InheritMethod
[       OK ] TraitsTest.InheritMethod (12 ms)
[ RUN      ] TraitsTest.TransitiveTraits
[       OK ] TraitsTest.TransitiveTraits (13 ms)
[ RUN      ] TraitsTest.CannotProvideClass
[       OK ] TraitsTest.CannotProvideClass (2 ms)
[ RUN      ] TraitsTest.SingleTraitLoop
[       OK ] TraitsTest.SingleTraitLoop (2 ms)
[ RUN      ] TraitsTest.MultiTraitLoop
[       OK ] TraitsTest.MultiTraitLoop (1 ms)
[ RUN      ] TraitsTest.TraitAndClassNamesDontClash
[       OK ] TraitsTest.TraitAndClassNamesDontClash (6 ms)
[ RUN      ] TraitsTest.TraitMethodAndCLassFieldNamesDoClash
[       OK ] TraitsTest.TraitMethodAndCLassFieldNamesDoClash (2 ms)
[ RUN      ] TraitsTest.MultiInheritNoLocal
[       OK ] TraitsTest.MultiInheritNoLocal (14 ms)
[ RUN      ] TraitsTest.MultiInheritNoLocalParamTypeFail
[       OK ] TraitsTest.MultiInheritNoLocalParamTypeFail (1 ms)
[ RUN      ] TraitsTest.MultiInheritNoLocalParamNameFail
[       OK ] TraitsTest.MultiInheritNoLocalParamNameFail (1 ms)
[ RUN      ] TraitsTest.MultiInheritNoLocalParamDefaultValueFail
[       OK ] TraitsTest.MultiInheritNoLocalParamDefaultValueFail (1 ms)
[ RUN      ] TraitsTest.MultiInheritNoLocalReturnTypeFail
[       OK ] TraitsTest.MultiInheritNoLocalReturnTypeFail (0 ms)
[ RUN      ] TraitsTest.MultiInheritNoLocalErrorsFail
[       OK ] TraitsTest.MultiInheritNoLocalErrorsFail (1 ms)
[ RUN      ] TraitsTest.MultiInheritNoLocalCapFail
[       OK ] TraitsTest.MultiInheritNoLocalCapFail (2 ms)
[ RUN      ] TraitsTest.ParamWrongTypeFail
[       OK ] TraitsTest.ParamWrongTypeFail (6 ms)
[ RUN      ] TraitsTest.ReturnWrongTypeFail
[       OK ] TraitsTest.ReturnWrongTypeFail (4 ms)
[ RUN      ] TraitsTest.ParamContravariance
[       OK ] TraitsTest.ParamContravariance (6 ms)
[ RUN      ] TraitsTest.ParamCovarianceFail
[       OK ] TraitsTest.ParamCovarianceFail (8 ms)
[ RUN      ] TraitsTest.MultiParamContravariance
[       OK ] TraitsTest.MultiParamContravariance (5 ms)
[ RUN      ] TraitsTest.MultiParamCovarianceFail
[       OK ] TraitsTest.MultiParamCovarianceFail (4 ms)
[ RUN      ] TraitsTest.IndependentParamContravariance
[       OK ] TraitsTest.IndependentParamContravariance (5 ms)
[ RUN      ] TraitsTest.ReturnCovariance
[       OK ] TraitsTest.ReturnCovariance (4 ms)
[ RUN      ] TraitsTest.ReturnContravarianceFail
[       OK ] TraitsTest.ReturnContravarianceFail (6 ms)
[ RUN      ] TraitsTest.ClassGetsTraitBody
[       OK ] TraitsTest.ClassGetsTraitBody (15 ms)
[ RUN      ] TraitsTest.ClassBodyNotOverriddenByTrait
[       OK ] TraitsTest.ClassBodyNotOverriddenByTrait (5 ms)
[ RUN      ] TraitsTest.NoBodyFail
[       OK ] TraitsTest.NoBodyFail (2 ms)
[ RUN      ] TraitsTest.AmbiguousBodyTrait
[       OK ] TraitsTest.AmbiguousBodyTrait (13 ms)
[ RUN      ] TraitsTest.AmbiguousBodyClassFail
[       OK ] TraitsTest.AmbiguousBodyClassFail (3 ms)
[ RUN      ] TraitsTest.AmbiguousBodyPropogates
[       OK ] TraitsTest.AmbiguousBodyPropogates (3 ms)
[ RUN      ] TraitsTest.ParentOverridesGrandparentBody
[       OK ] TraitsTest.ParentOverridesGrandparentBody (18 ms)
[ RUN      ] TraitsTest.DiamondInheritance
[       OK ] TraitsTest.DiamondInheritance (18 ms)
[ RUN      ] TraitsTest.ClassInheritFunction
[       OK ] TraitsTest.ClassInheritFunction (6 ms)
[ RUN      ] TraitsTest.ClassInheritBehaviourFail
[       OK ] TraitsTest.ClassInheritBehaviourFail (2 ms)
[ RUN      ] TraitsTest.PrimitiveInheritFunction
[       OK ] TraitsTest.PrimitiveInheritFunction (5 ms)
[ RUN      ] TraitsTest.PrimitiveInheritBehaviourFail
[       OK ] TraitsTest.PrimitiveInheritBehaviourFail (2 ms)
[ RUN      ] TraitsTest.ActorInheritFunction
[       OK ] TraitsTest.ActorInheritFunction (8 ms)
[ RUN      ] TraitsTest.ActorInheritBehaviour
[       OK ] TraitsTest.ActorInheritBehaviour (7 ms)
[ RUN      ] TraitsTest.LetInFunction
[       OK ] TraitsTest.LetInFunction (5 ms)
[ RUN      ] TraitsTest.TypeargInFunction
[       OK ] TraitsTest.TypeargInFunction (6 ms)
[ RUN      ] TraitsTest.TypeargInFunction2
[       OK ] TraitsTest.TypeargInFunction2 (7 ms)
[----------] 40 tests from TraitsTest (232 ms total)

[----------] 58 tests from VerifyTest
[ RUN      ] VerifyTest.MainActorFunCreate
[       OK ] VerifyTest.MainActorFunCreate (4 ms)
[ RUN      ] VerifyTest.MainActorNewCreateTypeParams
[       OK ] VerifyTest.MainActorNewCreateTypeParams (5 ms)
[ RUN      ] VerifyTest.MainActorNewCreateTwoParams
[       OK ] VerifyTest.MainActorNewCreateTwoParams (6 ms)
[ RUN      ] VerifyTest.MainActorNewCreateParamWrongType
[       OK ] VerifyTest.MainActorNewCreateParamWrongType (7 ms)
[ RUN      ] VerifyTest.MainActorNoConstructor
[       OK ] VerifyTest.MainActorNoConstructor (7 ms)
[ RUN      ] VerifyTest.PrimitiveWithTypeParamsInit
[       OK ] VerifyTest.PrimitiveWithTypeParamsInit (6 ms)
[ RUN      ] VerifyTest.PrimitiveNewInit
[       OK ] VerifyTest.PrimitiveNewInit (5 ms)
[ RUN      ] VerifyTest.PrimitiveFunRefInit
[       OK ] VerifyTest.PrimitiveFunRefInit (4 ms)
[ RUN      ] VerifyTest.PrimitiveInitWithTypeParams
[       OK ] VerifyTest.PrimitiveInitWithTypeParams (5 ms)
[ RUN      ] VerifyTest.PrimitiveInitWithParams
[       OK ] VerifyTest.PrimitiveInitWithParams (6 ms)
[ RUN      ] VerifyTest.PrimitiveInitReturnBool
[       OK ] VerifyTest.PrimitiveInitReturnBool (4 ms)
[ RUN      ] VerifyTest.PrimitiveInitPartial
[       OK ] VerifyTest.PrimitiveInitPartial (6 ms)
[ RUN      ] VerifyTest.StructFinal
[       OK ] VerifyTest.StructFinal (6 ms)
[ RUN      ] VerifyTest.StructEmbedFieldFinal
[       OK ] VerifyTest.StructEmbedFieldFinal (6 ms)
[ RUN      ] VerifyTest.PrimitiveWithTypeParamsFinal
[       OK ] VerifyTest.PrimitiveWithTypeParamsFinal (5 ms)
[ RUN      ] VerifyTest.ClassWithTypeParamsFinal
[       OK ] VerifyTest.ClassWithTypeParamsFinal (4 ms)
[ RUN      ] VerifyTest.ActorBeFinal
[       OK ] VerifyTest.ActorBeFinal (5 ms)
[ RUN      ] VerifyTest.ClassFunRefFinal
[       OK ] VerifyTest.ClassFunRefFinal (5 ms)
[ RUN      ] VerifyTest.ClassFinalWithTypeParams
[       OK ] VerifyTest.ClassFinalWithTypeParams (7 ms)
[ RUN      ] VerifyTest.ClassFinalWithParams
[       OK ] VerifyTest.ClassFinalWithParams (5 ms)
[ RUN      ] VerifyTest.ClassFinalReturnBool
[       OK ] VerifyTest.ClassFinalReturnBool (5 ms)
[ RUN      ] VerifyTest.ClassFinalPartial
[       OK ] VerifyTest.ClassFinalPartial (5 ms)
[ RUN      ] VerifyTest.TryNoError
[       OK ] VerifyTest.TryNoError (4 ms)
[ RUN      ] VerifyTest.TryError
[       OK ] VerifyTest.TryError (4 ms)
[ RUN      ] VerifyTest.TryTryElseError
[       OK ] VerifyTest.TryTryElseError (6 ms)
[ RUN      ] VerifyTest.TryBranchedError
[       OK ] VerifyTest.TryBranchedError (4 ms)
[ RUN      ] VerifyTest.TryCallPartialFunction
[       OK ] VerifyTest.TryCallPartialFunction (4 ms)
[ RUN      ] VerifyTest.TryCallCurriedPartialFunction
[       OK ] VerifyTest.TryCallCurriedPartialFunction (5 ms)
[ RUN      ] VerifyTest.TryCallChainedPartialFunction
[       OK ] VerifyTest.TryCallChainedPartialFunction (4 ms)
[ RUN      ] VerifyTest.PartialFunctionNoError
[       OK ] VerifyTest.PartialFunctionNoError (5 ms)
[ RUN      ] VerifyTest.PartialFunctionError
[       OK ] VerifyTest.PartialFunctionError (6 ms)
[ RUN      ] VerifyTest.PartialFunctionBranchedError
[       OK ] VerifyTest.PartialFunctionBranchedError (5 ms)
[ RUN      ] VerifyTest.PartialFunctionCallPartialFunction
[       OK ] VerifyTest.PartialFunctionCallPartialFunction (6 ms)
[ RUN      ] VerifyTest.PartialFunctionCallCurriedPartialFunction
[       OK ] VerifyTest.PartialFunctionCallCurriedPartialFunction (6 ms)
[ RUN      ] VerifyTest.PartialFunctionCallNonPartialFunction
[       OK ] VerifyTest.PartialFunctionCallNonPartialFunction (4 ms)
[ RUN      ] VerifyTest.NonPartialFunctionCallPartialFunction
[       OK ] VerifyTest.NonPartialFunctionCallPartialFunction (5 ms)
[ RUN      ] VerifyTest.NonPartialFunctionError
[       OK ] VerifyTest.NonPartialFunctionError (4 ms)
[ RUN      ] VerifyTest.ErroringBehaviourError
[       OK ] VerifyTest.ErroringBehaviourError (5 ms)
[ RUN      ] VerifyTest.ErroringActorConstructorError
[       OK ] VerifyTest.ErroringActorConstructorError (5 ms)
[ RUN      ] VerifyTest.TraitPartialFunctionNoError
[       OK ] VerifyTest.TraitPartialFunctionNoError (5 ms)
[ RUN      ] VerifyTest.TraitNonPartialFunctionError
[       OK ] VerifyTest.TraitNonPartialFunctionError (5 ms)
[ RUN      ] VerifyTest.InterfacePartialFunctionNoError
[       OK ] VerifyTest.InterfacePartialFunctionNoError (4 ms)
[ RUN      ] VerifyTest.InterfaceNonPartialFunctionError
[       OK ] VerifyTest.InterfaceNonPartialFunctionError (5 ms)
[ RUN      ] VerifyTest.IfTypeError
[       OK ] VerifyTest.IfTypeError (3 ms)
[ RUN      ] VerifyTest.NonPartialSugaredApplyCall
[       OK ] VerifyTest.NonPartialSugaredApplyCall (5 ms)
[ RUN      ] VerifyTest.PartialSugaredApplyCall
[       OK ] VerifyTest.PartialSugaredApplyCall (5 ms)
[ RUN      ] VerifyTest.NonPartialSugaredApplyCallAfterSugaredConstructor
[       OK ] VerifyTest.NonPartialSugaredApplyCallAfterSugaredConstructor (4 ms)
[ RUN      ] VerifyTest.PartialSugaredApplyCallAfterSugaredConstructor
[       OK ] VerifyTest.PartialSugaredApplyCallAfterSugaredConstructor (5 ms)
[ RUN      ] VerifyTest.FFICallPartial
[       OK ] VerifyTest.FFICallPartial (6 ms)
[ RUN      ] VerifyTest.FFICallPartialWithPartialDeclaration
[       OK ] VerifyTest.FFICallPartialWithPartialDeclaration (5 ms)
[ RUN      ] VerifyTest.FFICallWithPartialDeclaration
[       OK ] VerifyTest.FFICallWithPartialDeclaration (4 ms)
[ RUN      ] VerifyTest.FFICallPartialWithNonPartialDeclaration
[       OK ] VerifyTest.FFICallPartialWithNonPartialDeclaration (4 ms)
[ RUN      ] VerifyTest.FFICallNonPartialWithPartialDeclaration
[       OK ] VerifyTest.FFICallNonPartialWithPartialDeclaration (5 ms)
[ RUN      ] VerifyTest.NonPartialSugaredBinaryOperatorCall
[       OK ] VerifyTest.NonPartialSugaredBinaryOperatorCall (6 ms)
[ RUN      ] VerifyTest.PartialSugaredBinaryOperatorCall
[       OK ] VerifyTest.PartialSugaredBinaryOperatorCall (5 ms)
[ RUN      ] VerifyTest.PartialTraitCall
[       OK ] VerifyTest.PartialTraitCall (5 ms)
[ RUN      ] VerifyTest.LambdaTypeGenericAliased
[       OK ] VerifyTest.LambdaTypeGenericAliased (5 ms)
[ RUN      ] VerifyTest.PartialFunCallInTryBlock
[       OK ] VerifyTest.PartialFunCallInTryBlock (5 ms)
[----------] 58 tests from VerifyTest (293 ms total)

[----------] 4 tests from SignatureTest
[ RUN      ] SignatureTest.RecompilationSameSignature
[       OK ] SignatureTest.RecompilationSameSignature (21 ms)
[ RUN      ] SignatureTest.PackageReferences
[       OK ] SignatureTest.PackageReferences (19 ms)
[ RUN      ] SignatureTest.DocstringIgnored
[       OK ] SignatureTest.DocstringIgnored (28 ms)
[ RUN      ] SignatureTest.SerialiseSignature
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/serialise/_test.pony:84:9: argument not a subtype of parameter
        try
        ^
    Info:
    /home/ponyc/packages/serialise/_test.pony:84:9: argument type is (Bool val | None val)
            try
            ^
    /home/ponyc/packages/builtin/bool.pony:6:14: parameter type is Bool val
      fun op_and(y: Bool): Bool => this and y
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:90:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:85:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/ponytest/test_helper.pony:96:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:108:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:103:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/ponytest/test_helper.pony:114:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:305:16: a member of the union type has an incompatible method signature
          if e == a then
               ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'eq' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'ne' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of every element of (Equatable[A #read] #read & Stringable #read)
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/compare.pony:19:3: parameter box->A #read is not a supertype of None val
      fun eq(that: box->A): Bool => this is that
      ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:312:24: argument not a subtype of parameter
          missing.push(e)
                       ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:312:24: argument type is (ReadSeq[A #read] box->A #read | None val)
              missing.push(e)
                           ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is box->A #read
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'eq' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'ne' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of every element of (Equatable[A #read] #read & Stringable #read)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (ReadSeq[A #read] box->A #read | None val) is a subtype of box->A #read
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:317:12: could not infer type of local
      for (i, c) in consumed.pairs() do
           ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:318:16: cannot infer type of c

        if not c then extra.push(actual(i)?) end
               ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: can't lookup by name on a tuple
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find _1 in (String val, _Group tag)
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find '_1' in 'None'
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find _1 in None val
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: can't lookup by name on a tuple
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find _2 in (String val, _Group tag)
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find '_2' in 'None'
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find _2 in None val
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:383:18: right side must be a subtype of left side
        exe_name = arg
                 ^
    Info:
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:387:14: a member of the union type has an incompatible method signature
      if arg == "--sequential" then
             ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:389:18: a member of the union type has an incompatible method signature
      elseif arg == "--verbose" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:391:18: a member of the union type has an incompatible method signature
      elseif arg == "--noprog" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:393:18: a member of the union type has an incompatible method signature
      elseif arg == "--list" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:395:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--exclude=", 10) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:395:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--exclude=", 10) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:396:23: couldn't find 'substring' in 'None'
        _exclude = arg.substring(10)
                      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:396:23: couldn't find substring in None val
        _exclude = arg.substring(10)
                      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:397:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--label=", 8) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:397:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--label=", 8) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:398:21: couldn't find 'substring' in 'None'
        _label = arg.substring(8)
                    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:398:21: couldn't find substring in None val
        _label = arg.substring(8)
                    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:399:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--only=", 7) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:399:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--only=", 7) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:400:20: couldn't find 'substring' in 'None'
        _only = arg.substring(7)
                   ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:400:20: couldn't find substring in None val
        _only = arg.substring(7)
                   ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:402:53: argument not a subtype of parameter
        _env.out.print("Unrecognised argument \"" + arg + "\"")
                                                    ^
    Info:
    /home/ponyc/packages/ponytest/pony_test.pony:402:53: argument type is (String val | None val)
            _env.out.print("Unrecognised argument \"" + arg + "\"")
                                                        ^
    /home/ponyc/packages/builtin/string.pony:1188:11: parameter type is String box
      fun add(that: String box): String =>
              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String box
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String box
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:432:13: couldn't find '_report' in 'None'
      if rec._report(_verbose) then
            ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:432:13: couldn't find _report in None val
      if rec._report(_verbose) then
            ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:457:10: couldn't find '_list_failed' in 'None'
      rec._list_failed()
         ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:457:10: couldn't find _list_failed in None val
      rec._list_failed()
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:109:22: argument not a subtype of parameter
      _timers.cancel(timer)
                     ^
    Info:
    /home/ponyc/packages/ponytest/_test_runner.pony:109:22: argument type is (Timer tag | None val)
          _timers.cancel(timer)
                         ^
    /home/ponyc/packages/time/timers.pony:49:13: parameter type is Timer tag
      be cancel(timer: Timer tag) =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Timer tag
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Timer tag | None val) is a subtype of Timer tag
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:152:10: could not infer type of local
    for (i, action) in _expect_actions.pairs() do
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:153:10: cannot infer type of action

      if action == name then
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:231:41: argument not a subtype of parameter
      _log("Action never completed: " + action, false)
                                        ^
    Info:
    /home/ponyc/packages/ponytest/_test_runner.pony:231:41: argument type is (String val | None val)
          _log("Action never completed: " + action, false)
                                            ^
    /home/ponyc/packages/builtin/string.pony:1188:11: parameter type is String box
      fun add(that: String box): String =>
              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String box
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String box
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:258:19: couldn't find 'dispose' in 'None'
        disposable.dispose()
                  ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:258:19: couldn't find dispose in None val
        disposable.dispose()
                  ^
Error:
/home/ponyc/packages/ponytest/_test_record.pony:43:26: argument not a subtype of parameter
          _env.out.print(msg)
                         ^
    Info:
    /home/ponyc/packages/ponytest/_test_record.pony:43:26: argument type is (String val | None val)
              _env.out.print(msg)
                             ^
    /home/ponyc/packages/builtin/std_stream.pony:13:12: parameter type is (String val | Array[U8 val] val)
      be print(data: ByteSeq)
               ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:35:32: argument not a subtype of parameter
      _wheel.push(_TimingWheel(i))
                               ^
    Info:
    /home/ponyc/packages/time/timers.pony:35:32: argument type is (USize val | None val)
          _wheel.push(_TimingWheel(i))
                                   ^
    /home/ponyc/packages/time/_timing_wheel.pony:13:14: parameter type is USize val
      new create(index: USize) =>
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:69:12: couldn't find 'clear' in 'None'
      wheel.clear()
           ^
Error:
/home/ponyc/packages/time/timers.pony:69:12: couldn't find clear in None val
      wheel.clear()
           ^
Error:
/home/ponyc/packages/time/timers.pony:97:23: argument not a subtype of parameter
        if not _wheel(i)?.advance(_pending, _current, elapsed) then
                      ^
    Info:
    /home/ponyc/packages/time/timers.pony:97:23: argument type is (USize val | None val)
            if not _wheel(i)?.advance(_pending, _current, elapsed) then
                          ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:103:15: argument not a subtype of parameter
        _fire(timer)
              ^
    Info:
    /home/ponyc/packages/time/timers.pony:103:15: argument type is (Timer ref | None val)
            _fire(timer)
                  ^
    /home/ponyc/packages/time/timers.pony:128:17: parameter type is Timer ref
      fun ref _fire(timer: Timer) =>
                    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Timer ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Timer ref | None val) is a subtype of Timer ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:155:32: argument not a subtype of parameter
        next = next.min(_wheel(i)?.next(_current))
                               ^
    Info:
    /home/ponyc/packages/time/timers.pony:155:32: argument type is (USize val | None val)
            next = next.min(_wheel(i)?.next(_current))
                                   ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:24: couldn't find 'values' in 'None'
      for timer in list.values() do
                       ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:24: couldn't find values in None val
      for timer in list.values() do
                       ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:7: cannot infer type of for loop iterator

      for timer in list.values() do
      ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:88:9: cannot infer type of timer

        timer._cancel()
        ^
Error:
/home/ponyc/packages/collections/set.pony:72:11: argument not a subtype of parameter
      set(consume value)
          ^
    Info:
    /home/ponyc/packages/collections/set.pony:72:11: argument type is (A #any | None val)
          set(consume value)
              ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is A #any
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:102:17: argument not a subtype of parameter
        extract(value)?
                ^
    Info:
    /home/ponyc/packages/collections/set.pony:102:17: argument type is (A #any ! | None val)
            extract(value)?
                    ^
    /home/ponyc/packages/collections/set.pony:60:19: parameter type is box->A #any !
      fun ref extract(value: box->A!): A^ ? =>
                      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:104:13: argument not a subtype of parameter
        set(consume value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:104:13: argument type is (A #any | None val)
            set(consume value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is A #any
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:113:13: argument not a subtype of parameter
      unset(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:113:13: argument type is (box->A #any ! | None val)
          unset(value)
                ^
    /home/ponyc/packages/collections/set.pony:54:17: parameter type is box->A #any !
      fun ref unset(value: box->A!) =>
                    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (box->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:144:13: argument not a subtype of parameter
      r.set(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:144:13: argument type is (this->A #any ! | None val)
          r.set(value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:159:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:159:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:160:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:160:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:176:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:176:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:178:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:178:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:184:14: argument not a subtype of parameter
        this(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:184:14: argument type is (this->A #any ! | None val)
            this(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:186:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:186:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:202:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:202:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:204:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:204:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:217:13: argument not a subtype of parameter
      r.set(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:217:13: argument type is (this->A #any ! | None val)
          r.set(value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:246:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:246:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:132:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:128:37: function return type: V #any
      fun ref insert(key: K, value: V): V ? =>
                                        ^
    /home/ponyc/packages/collections/map.pony:146:25: function body type: (V #any | None val^)
          _array(i)? as (_, V)
                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (V #any | None val^) is a subtype of V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:166:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:152:47: function return type: V #any
      fun ref insert_if_absent(key: K, value: V): V ? =>
                                                  ^
    /home/ponyc/packages/collections/map.pony:181:25: function body type: (V #any | None val^)
          _array(i)? as (_, V)
                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (V #any | None val^) is a subtype of V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:213:5: function body isn't the result type
    if found then
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:206:48: function return type: this->V #any
      fun get_or_else(key: box->K!, alt: this->V): this->V =>
                                                   ^
    /home/ponyc/packages/collections/map.pony:215:27: function body type: (this->V #any | None val^)
            _array(i)? as (_, this->V)
                              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->V #any | None val^) is a subtype of this->V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:236:10: could not infer type of local
    for (k, v) in iter do
         ^
Error:
/home/ponyc/packages/collections/map.pony:237:33: cannot infer type of v

      this(consume k) = consume v
                                ^
Error:
/home/ponyc/packages/collections/map.pony:270:20: argument not a subtype of parameter
      match _array(i)?
                   ^
    Info:
    /home/ponyc/packages/collections/map.pony:270:20: argument type is (USize val | None val)
          match _array(i)?
                       ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:271:26: returned value isn't the return type
      | (_, _) => return i
                         ^
    Info:
    /home/ponyc/packages/collections/map.pony:264:37: function return type: USize val
      fun next_index(prev: USize = -1): USize ? =>
                                        ^
    /home/ponyc/packages/collections/range.pony:1:41: returned value type: (USize val^ | None val^)
    class Range[A: (Real[A] val & Number) = USize] is Iterator[A]
                                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val^ | None val^) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:298:10: could not infer type of local
    for (k, v) in pairs() do
         ^
Error:
/home/ponyc/packages/collections/map.pony:299:14: cannot infer type of v

      r(k) = v
             ^
Error:
/home/ponyc/packages/collections/map.pony:342:24: couldn't find 'add' in 'None'
        idx = (h + ((i + (i * i)) / 2)) and mask
                       ^
Error:
/home/ponyc/packages/collections/map.pony:342:24: couldn't find add in None val
        idx = (h + ((i + (i * i)) / 2)) and mask
                       ^
Error:
/home/ponyc/packages/collections/map.pony:342:29: couldn't find 'mul' in 'None'
        idx = (h + ((i + (i * i)) / 2)) and mask
                            ^
Error:
/home/ponyc/packages/collections/map.pony:342:29: couldn't find mul in None val
        idx = (h + ((i + (i * i)) / 2)) and mask
                            ^
Error:
/home/ponyc/packages/collections/map.pony:360:19: argument not a subtype of parameter
        match old(i)? = _MapDeleted
                  ^
    Info:
    /home/ponyc/packages/collections/map.pony:360:19: argument type is (USize val | None val)
            match old(i)? = _MapDeleted
                      ^
    /home/ponyc/packages/builtin/array.pony:213:18: parameter type is USize val
      fun ref update(i: USize, value: A): A^ ? =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:26:12: argument not a subtype of parameter
      push(consume value)
           ^
    Info:
    /home/ponyc/packages/collections/list.pony:26:12: argument type is (A #any | None val)
          push(consume value)
               ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is A #any
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:232:16: argument not a subtype of parameter
      out.push(v)
               ^
    Info:
    /home/ponyc/packages/collections/list.pony:232:16: argument type is (this->A #any ! | None val)
          out.push(v)
                   ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:240:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:236:40: function return type: List[B #any] ref^
      fun map[B](f: {(this->A!): B^} box): List[B]^ =>
                                           ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[B #any] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref^ | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:257:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:250:7: function return type: List[B #any] ref^
        : List[B]^
          ^
    /home/ponyc/packages/collections/list.pony:249:10: function body type: (List[B #any] ref | None val^)
        acc: List[B])
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:268:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:263:50: function return type: List[B #any] ref^
      fun flat_map[B](f: {(this->A!): List[B]} box): List[B]^ =>
                                                     ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[B #any] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref^ | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:284:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:277:20: function return type: List[B #any] ref^
        acc: List[B]): List[B]^
                       ^
    /home/ponyc/packages/collections/list.pony:277:10: function body type: (List[B #any] ref | None val^)
        acc: List[B]): List[B]^
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:294:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:290:42: function return type: List[this->A #any !] ref^
      fun filter(f: {(this->A!): Bool} box): List[this->A!]^ =>
                                             ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[this->A #any !] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref^ | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:313:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:303:27: function return type: List[this->A #any !] ref
        acc: List[this->A!]): List[this->A!]
                              ^
    /home/ponyc/packages/collections/list.pony:303:10: function body type: (List[this->A #any !] ref | None val^)
        acc: List[this->A!]): List[this->A!]
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref | None val^) is a subtype of List[this->A #any !] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:329:14: argument not a subtype of parameter
    _fold[B](h, f, consume acc)
             ^
    Info:
    /home/ponyc/packages/collections/list.pony:329:14: argument type is (this->ListNode[A #any] ref | None val)
        _fold[B](h, f, consume acc)
                 ^
    /home/ponyc/packages/collections/list.pony:332:5: parameter type is this->ListNode[A #any] ref
        ln: this->ListNode[A],
        ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of ListNode[A #any] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->ListNode[A #any] ref | None val) is a subtype of this->ListNode[A #any] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:340:20: right side must be a subtype of left side
    let nextAcc: B = try f(acc, ln()?) else consume acc end
                   ^
    Info:
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of B #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (B #any | None val) is a subtype of B #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:347:14: argument not a subtype of parameter
    _fold[B](h, f, consume nextAcc)
             ^
    Info:
    /home/ponyc/packages/collections/list.pony:347:14: argument type is (this->ListNode[A #any] ref | None val)
        _fold[B](h, f, consume nextAcc)
                 ^
    /home/ponyc/packages/collections/list.pony:332:5: parameter type is this->ListNode[A #any] ref
        ln: this->ListNode[A],
        ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of ListNode[A #any] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->ListNode[A #any] ref | None val) is a subtype of this->ListNode[A #any] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:354:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:349:41: function return type: Bool val
      fun every(f: {(this->A!): Bool} box): Bool =>
                                            ^
    /home/ponyc/packages/collections/list.pony:357:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:364:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:360:65: function return type: Bool val
      fun _every(ln: this->ListNode[A], f: {(this->A!): Bool} box): Bool =>
                                                                    ^
    /home/ponyc/packages/collections/list.pony:371:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:379:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:374:42: function return type: Bool val
      fun exists(f: {(this->A!): Bool} box): Bool =>
                                             ^
    /home/ponyc/packages/collections/list.pony:382:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:389:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:385:66: function return type: Bool val
      fun _exists(ln: this->ListNode[A], f: {(this->A!): Bool} box): Bool =>
                                                                     ^
    /home/ponyc/packages/collections/list.pony:396:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:12: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
           ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:12: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
               ^
    /home/ponyc/packages/collections/list.pony:400:14: parameter type is {(this->A!): Bool}[A #any] box->A #any !
        f: {(this->A!): Bool} box)
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of {(this->A!): Bool}[A #any] box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:31: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
                              ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:31: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
                                  ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:50: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
                                                 ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:50: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
                                                     ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:475:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:471:18: function return type: List[this->A #any !] ref^
      fun reverse(): List[this->A!]^ =>
                     ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[this->A #any !] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref^ | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:487:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:481:61: function return type: List[this->A #any !] ref^
      fun _reverse(ln: this->ListNode[A], acc: List[this->A!]): List[this->A!]^ =>
                                                                ^
    /home/ponyc/packages/collections/list.pony:481:44: function body type: (List[this->A #any !] ref | None val^)
      fun _reverse(ln: this->ListNode[A], acc: List[this->A!]): List[this->A!]^ =>
                                               ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:497:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:493:58: function return type: Bool val
      fun contains[B: (A & HasEq[A!] #read) = A](a: box->B): Bool =>
                                                             ^
    /home/ponyc/packages/collections/list.pony:500:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:511:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:506:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/collections/list.pony:518:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/_test.pony:111:10: could not infer type of local
    for (k, v) in a.pairs() do
         ^
Error:
/home/ponyc/packages/collections/_test.pony:112:31: cannot infer type of v

      h.assert_eq[U32](b(k)?, v)
                              ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: can't lookup by name on a tuple
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find _1 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find '_1' in 'None'
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find _1 in None val
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: can't lookup by name on a tuple
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find _2 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find '_2' in 'None'
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find _2 in None val
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:532:23: cannot infer type of sa

      let intersect = sa .> intersect(sb)
                      ^
Error:
/home/ponyc/packages/collections/_test.pony:532:39: cannot infer type of sb

      let intersect = sa .> intersect(sb)
                                      ^
Error:
/home/ponyc/packages/collections/_test.pony:533:26: cannot infer type of intersect

      h.assert_eq[USize](intersect.size(), test._3.size())
                         ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: can't lookup by name on a tuple
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find _3 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find '_3' in 'None'
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find _3 in None val
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: can't lookup by name on a tuple
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find _3 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find '_3' in 'None'
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find _3 in None val
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:7: cannot infer type of for loop iterator

      for v in test._3.values() do
      ^
Error:
/home/ponyc/packages/collections/_test.pony:535:42: cannot infer type of v

        h.assert_true(intersect.contains(v))
                                         ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/signature.cc:162: Failure
Expected: test_compile(src, "ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] SignatureTest.SerialiseSignature (848 ms)
[----------] 4 tests from SignatureTest (916 ms total)

[----------] 5 tests from PaintTest
[ RUN      ] PaintTest.SingleTypeSingleFunction
[       OK ] PaintTest.SingleTypeSingleFunction (0 ms)
[ RUN      ] PaintTest.MultiTypeMultiFunction
[       OK ] PaintTest.MultiTypeMultiFunction (0 ms)
[ RUN      ] PaintTest.ThreeTypeTwoFunctionForcedSparse
[       OK ] PaintTest.ThreeTypeTwoFunctionForcedSparse (0 ms)
[ RUN      ] PaintTest.MultiNoCollision
[       OK ] PaintTest.MultiNoCollision (0 ms)
[ RUN      ] PaintTest.MultiComplex
[       OK ] PaintTest.MultiComplex (0 ms)
[----------] 5 tests from PaintTest (0 ms total)

[----------] 9 tests from ProgramTest
[ RUN      ] ProgramTest.PackageID
[       OK ] ProgramTest.PackageID (0 ms)
[ RUN      ] ProgramTest.NoLibs
[       OK ] ProgramTest.NoLibs (0 ms)
[ RUN      ] ProgramTest.OneLib
[       OK ] ProgramTest.OneLib (0 ms)
[ RUN      ] ProgramTest.OneLibWithAmbles
[       OK ] ProgramTest.OneLibWithAmbles (0 ms)
[ RUN      ] ProgramTest.MultipleLibs
[       OK ] ProgramTest.MultipleLibs (0 ms)
[ RUN      ] ProgramTest.MultipleLibsWithAmbles
[       OK ] ProgramTest.MultipleLibsWithAmbles (0 ms)
[ RUN      ] ProgramTest.RepeatedLibs
[       OK ] ProgramTest.RepeatedLibs (0 ms)
[ RUN      ] ProgramTest.BadLibName
[       OK ] ProgramTest.BadLibName (0 ms)
[ RUN      ] ProgramTest.LibPaths
[       OK ] ProgramTest.LibPaths (0 ms)
[----------] 9 tests from ProgramTest (0 ms total)

[----------] 8 tests from LocalInferTest
[ RUN      ] LocalInferTest.Simple
[       OK ] LocalInferTest.Simple (9 ms)
[ RUN      ] LocalInferTest.Tuple
[       OK ] LocalInferTest.Tuple (10 ms)
[ RUN      ] LocalInferTest.NestedTuple
[       OK ] LocalInferTest.NestedTuple (9 ms)
[ RUN      ] LocalInferTest.DontCare
[       OK ] LocalInferTest.DontCare (11 ms)
[ RUN      ] LocalInferTest.Union
[       OK ] LocalInferTest.Union (9 ms)
[ RUN      ] LocalInferTest.UnionOfTuples
[       OK ] LocalInferTest.UnionOfTuples (4 ms)
[ RUN      ] LocalInferTest.VarAndLet
[       OK ] LocalInferTest.VarAndLet (9 ms)
[ RUN      ] LocalInferTest.DeclAndNot
[       OK ] LocalInferTest.DeclAndNot (12 ms)
[----------] 8 tests from LocalInferTest (73 ms total)

[----------] 30 tests from ArrayTest
[ RUN      ] ArrayTest.AsVal
[       OK ] ArrayTest.AsVal (4 ms)
[ RUN      ] ArrayTest.AsIso
[       OK ] ArrayTest.AsIso (3 ms)
[ RUN      ] ArrayTest.AsIsoAliasedElements
[       OK ] ArrayTest.AsIsoAliasedElements (4 ms)
[ RUN      ] ArrayTest.AsIsoConsumedElements
[       OK ] ArrayTest.AsIsoConsumedElements (3 ms)
[ RUN      ] ArrayTest.NoAsVal
[       OK ] ArrayTest.NoAsVal (3 ms)
[ RUN      ] ArrayTest.NoAsIso
[       OK ] ArrayTest.NoAsIso (4 ms)
[ RUN      ] ArrayTest.NoAsIsoAliasedElements
[       OK ] ArrayTest.NoAsIsoAliasedElements (3 ms)
[ RUN      ] ArrayTest.NoAsIsoConsumedElements
[       OK ] ArrayTest.NoAsIsoConsumedElements (5 ms)
[ RUN      ] ArrayTest.InferFromArrayType
[       OK ] ArrayTest.InferFromArrayType (4 ms)
[ RUN      ] ArrayTest.InferFromInterfaceWithTypeParam
[       OK ] ArrayTest.InferFromInterfaceWithTypeParam (4 ms)
[ RUN      ] ArrayTest.InferFromSeq
[       OK ] ArrayTest.InferFromSeq (5 ms)
[ RUN      ] ArrayTest.InferFromApplyInterface
[       OK ] ArrayTest.InferFromApplyInterface (4 ms)
[ RUN      ] ArrayTest.InferFromApplyInterfaceValElementNoArrowThis
[       OK ] ArrayTest.InferFromApplyInterfaceValElementNoArrowThis (4 ms)
[ RUN      ] ArrayTest.InferFromApplyInterfaceIsoElementNoArrowThis
[       OK ] ArrayTest.InferFromApplyInterfaceIsoElementNoArrowThis (4 ms)
[ RUN      ] ArrayTest.InferFromApplyInterfaceBoxElementInTuple
[       OK ] ArrayTest.InferFromApplyInterfaceBoxElementInTuple (3 ms)
[ RUN      ] ArrayTest.InferFromValuesInterface
[       OK ] ArrayTest.InferFromValuesInterface (3 ms)
[ RUN      ] ArrayTest.InferFromValuesOfArrayInterface
[       OK ] ArrayTest.InferFromValuesOfArrayInterface (3 ms)
[ RUN      ] ArrayTest.InferFromReadSeqAndReadElementInterface
[       OK ] ArrayTest.InferFromReadSeqAndReadElementInterface (4 ms)
[ RUN      ] ArrayTest.InferFromValuesCallWithIteratorAntecedent
[       OK ] ArrayTest.InferFromValuesCallWithIteratorAntecedent (4 ms)
[ RUN      ] ArrayTest.InferFromArrayIso
[       OK ] ArrayTest.InferFromArrayIso (4 ms)
[ RUN      ] ArrayTest.InferFromArrayVal
[       OK ] ArrayTest.InferFromArrayVal (4 ms)
[ RUN      ] ArrayTest.InferFromArrayIsoWithAs
[       OK ] ArrayTest.InferFromArrayIsoWithAs (3 ms)
[ RUN      ] ArrayTest.InferFromArrayValWithAs
[       OK ] ArrayTest.InferFromArrayValWithAs (5 ms)
[ RUN      ] ArrayTest.InferFromArrayIsoMustBeRecovered
[       OK ] ArrayTest.InferFromArrayIsoMustBeRecovered (4 ms)
[ RUN      ] ArrayTest.InferFromArrayValMustBeRecovered
[       OK ] ArrayTest.InferFromArrayValMustBeRecovered (4 ms)
[ RUN      ] ArrayTest.InferFromArrayIsoMayBeExplicitlyRecovered
[       OK ] ArrayTest.InferFromArrayIsoMayBeExplicitlyRecovered (5 ms)
[ RUN      ] ArrayTest.InferFromArrayValMayBeExplicitlyRecovered
[       OK ] ArrayTest.InferFromArrayValMayBeExplicitlyRecovered (3 ms)
[ RUN      ] ArrayTest.InferFromArrayBoxNeedNotRecovered
[       OK ] ArrayTest.InferFromArrayBoxNeedNotRecovered (3 ms)
[ RUN      ] ArrayTest.EmptyArrayLiteral
[       OK ] ArrayTest.EmptyArrayLiteral (4 ms)
[ RUN      ] ArrayTest.EmptyArrayLiteralMustBeInferable
[       OK ] ArrayTest.EmptyArrayLiteralMustBeInferable (3 ms)
[----------] 30 tests from ArrayTest (115 ms total)

[----------] 6 tests from ChainTest
[ RUN      ] ChainTest.Chain_AliasRefcap
[       OK ] ChainTest.Chain_AliasRefcap (3 ms)
[ RUN      ] ChainTest.Chain_UniqueRefcap
[       OK ] ChainTest.Chain_UniqueRefcap (3 ms)
[ RUN      ] ChainTest.Chain_UniqueEphRecoverCall
[       OK ] ChainTest.Chain_UniqueEphRecoverCall (3 ms)
[ RUN      ] ChainTest.Chain_UniqueEphSubtypeMethodCap
[       OK ] ChainTest.Chain_UniqueEphSubtypeMethodCap (4 ms)
[ RUN      ] ChainTest.Chain_UniqueEphSameMethodCap
[       OK ] ChainTest.Chain_UniqueEphSameMethodCap (4 ms)
[ RUN      ] ChainTest.Chain_UniqueEphNoRecoverCall
[       OK ] ChainTest.Chain_UniqueEphNoRecoverCall (4 ms)
[----------] 6 tests from ChainTest (22 ms total)

[----------] 17 tests from LexIntTest
[ RUN      ] LexIntTest.LexIntCmp
[       OK ] LexIntTest.LexIntCmp (0 ms)
[ RUN      ] LexIntTest.LexIntCmp64
[       OK ] LexIntTest.LexIntCmp64 (0 ms)
[ RUN      ] LexIntTest.LexIntShiftLeft
[       OK ] LexIntTest.LexIntShiftLeft (0 ms)
[ RUN      ] LexIntTest.LexIntShiftRight
[       OK ] LexIntTest.LexIntShiftRight (0 ms)
[ RUN      ] LexIntTest.LexIntTestBit
[       OK ] LexIntTest.LexIntTestBit (0 ms)
[ RUN      ] LexIntTest.LexIntSetBit
[       OK ] LexIntTest.LexIntSetBit (0 ms)
[ RUN      ] LexIntTest.LexIntAdd
[       OK ] LexIntTest.LexIntAdd (0 ms)
[ RUN      ] LexIntTest.LexIntAdd64
[       OK ] LexIntTest.LexIntAdd64 (0 ms)
[ RUN      ] LexIntTest.LexIntSub
[       OK ] LexIntTest.LexIntSub (0 ms)
[ RUN      ] LexIntTest.LexIntSub64
[       OK ] LexIntTest.LexIntSub64 (0 ms)
[ RUN      ] LexIntTest.LexIntMul64
[       OK ] LexIntTest.LexIntMul64 (0 ms)
[ RUN      ] LexIntTest.LexIntDiv64
[       OK ] LexIntTest.LexIntDiv64 (0 ms)
[ RUN      ] LexIntTest.LexIntChar
[       OK ] LexIntTest.LexIntChar (0 ms)
[ RUN      ] LexIntTest.LexIntAccumBase10
[       OK ] LexIntTest.LexIntAccumBase10 (0 ms)
[ RUN      ] LexIntTest.LexIntAccumBase16
[       OK ] LexIntTest.LexIntAccumBase16 (0 ms)
[ RUN      ] LexIntTest.LexIntAccumBase2
[       OK ] LexIntTest.LexIntAccumBase2 (0 ms)
[ RUN      ] LexIntTest.LexIntCastDouble
[       OK ] LexIntTest.LexIntCastDouble (0 ms)
[----------] 17 tests from LexIntTest (0 ms total)

[----------] 15 tests from IdTest
[ RUN      ] IdTest.LeadingUnderscore
[       OK ] IdTest.LeadingUnderscore (0 ms)
[ RUN      ] IdTest.StartUpperCase
[       OK ] IdTest.StartUpperCase (0 ms)
[ RUN      ] IdTest.StartLowerCase
[       OK ] IdTest.StartLowerCase (0 ms)
[ RUN      ] IdTest.StartAnyCase
[       OK ] IdTest.StartAnyCase (0 ms)
[ RUN      ] IdTest.ContainUnderscore
[       OK ] IdTest.ContainUnderscore (0 ms)
[ RUN      ] IdTest.DoubleUnderscore
[       OK ] IdTest.DoubleUnderscore (0 ms)
[ RUN      ] IdTest.TripleUnderscore
[       OK ] IdTest.TripleUnderscore (0 ms)
[ RUN      ] IdTest.TrailingUnderscore
[       OK ] IdTest.TrailingUnderscore (0 ms)
[ RUN      ] IdTest.Prime
[       OK ] IdTest.Prime (0 ms)
[ RUN      ] IdTest.Dontcare
[       OK ] IdTest.Dontcare (0 ms)
[ RUN      ] IdTest.PrivateName
[       OK ] IdTest.PrivateName (0 ms)
[ RUN      ] IdTest.TypeName
[       OK ] IdTest.TypeName (0 ms)
[ RUN      ] IdTest.FFIType
[       OK ] IdTest.FFIType (0 ms)
[ RUN      ] IdTest.InternalTypeName
[       OK ] IdTest.InternalTypeName (0 ms)
[ RUN      ] IdTest.DontcareName
[       OK ] IdTest.DontcareName (0 ms)
[----------] 15 tests from IdTest (0 ms total)

[----------] 8 tests from MatchTypeTest
[ RUN      ] MatchTypeTest.SimpleTypes
[       OK ] MatchTypeTest.SimpleTypes (3 ms)
[ RUN      ] MatchTypeTest.CompoundOperand
[       OK ] MatchTypeTest.CompoundOperand (3 ms)
[ RUN      ] MatchTypeTest.CompoundPattern
[       OK ] MatchTypeTest.CompoundPattern (3 ms)
[ RUN      ] MatchTypeTest.BothCompound
[       OK ] MatchTypeTest.BothCompound (4 ms)
[ RUN      ] MatchTypeTest.Tuples
[       OK ] MatchTypeTest.Tuples (3 ms)
[ RUN      ] MatchTypeTest.Capabilities
[       OK ] MatchTypeTest.Capabilities (5 ms)
[ RUN      ] MatchTypeTest.TypeParams
[       OK ] MatchTypeTest.TypeParams (3 ms)
[ RUN      ] MatchTypeTest.GenericCap
[       OK ] MatchTypeTest.GenericCap (3 ms)
[----------] 8 tests from MatchTypeTest (27 ms total)

[----------] 4 tests from SuggestAltNameTest
[ RUN      ] SuggestAltNameTest.SuggestAltName_Private
[       OK ] SuggestAltNameTest.SuggestAltName_Private (1 ms)
[ RUN      ] SuggestAltNameTest.SuggestAltName_DifferentCaseVariable
[       OK ] SuggestAltNameTest.SuggestAltName_DifferentCaseVariable (1 ms)
[ RUN      ] SuggestAltNameTest.SuggestAltName_DifferentCaseMethod
[       OK ] SuggestAltNameTest.SuggestAltName_DifferentCaseMethod (2 ms)
[ RUN      ] SuggestAltNameTest.SuggestAltName_NothingToSuggest
[       OK ] SuggestAltNameTest.SuggestAltName_NothingToSuggest (2 ms)
[----------] 4 tests from SuggestAltNameTest (6 ms total)

[----------] 7 tests from ParseExprTest
[ RUN      ] ParseExprTest.CompileErrorAllowedAsIfdefClause
[       OK ] ParseExprTest.CompileErrorAllowedAsIfdefClause (0 ms)
[ RUN      ] ParseExprTest.CompileErrorNeedsReason
[       OK ] ParseExprTest.CompileErrorNeedsReason (1 ms)
[ RUN      ] ParseExprTest.CompileErrorReasonMustBeAString
[       OK ] ParseExprTest.CompileErrorReasonMustBeAString (1 ms)
[ RUN      ] ParseExprTest.ExpressionNotAllowedBeforeCompileError
[       OK ] ParseExprTest.ExpressionNotAllowedBeforeCompileError (1 ms)
[ RUN      ] ParseExprTest.ExpressionNotAllowedAfterCompileError
[       OK ] ParseExprTest.ExpressionNotAllowedAfterCompileError (1 ms)
[ RUN      ] ParseExprTest.CompileErrorAllowedAsIfdefElseClause
[       OK ] ParseExprTest.CompileErrorAllowedAsIfdefElseClause (1 ms)
[ RUN      ] ParseExprTest.CompileErrorNotAllowedOutsideIfdef
[       OK ] ParseExprTest.CompileErrorNotAllowedOutsideIfdef (1 ms)
[----------] 7 tests from ParseExprTest (6 ms total)

[----------] 10 tests from FinalisersTest
[ RUN      ] FinalisersTest.FinalCanCreatePrimitive
[       OK ] FinalisersTest.FinalCanCreatePrimitive (5 ms)
[ RUN      ] FinalisersTest.FinalCannotCreateActor
[       OK ] FinalisersTest.FinalCannotCreateActor (4 ms)
[ RUN      ] FinalisersTest.FinalCannotCreateActorInBranch
[       OK ] FinalisersTest.FinalCannotCreateActorInBranch (3 ms)
[ RUN      ] FinalisersTest.FinalCannotCreateActorInTryBlock
[       OK ] FinalisersTest.FinalCannotCreateActorInTryBlock (3 ms)
[ RUN      ] FinalisersTest.FinalCannotCallBehaviour
[       OK ] FinalisersTest.FinalCannotCallBehaviour (3 ms)
[ RUN      ] FinalisersTest.FinalCannotCallBehaviourInBranch
[       OK ] FinalisersTest.FinalCannotCallBehaviourInBranch (3 ms)
[ RUN      ] FinalisersTest.FinalCannotCallBehaviourInTryElseBlock
[       OK ] FinalisersTest.FinalCannotCallBehaviourInTryElseBlock (4 ms)
[ RUN      ] FinalisersTest.FinalCannotCallChainedBehaviour
[       OK ] FinalisersTest.FinalCannotCallChainedBehaviour (4 ms)
[ RUN      ] FinalisersTest.CannotLookupFinal
[       OK ] FinalisersTest.CannotLookupFinal (4 ms)
[ RUN      ] FinalisersTest.CannotLookupPrimitiveInit
[       OK ] FinalisersTest.CannotLookupPrimitiveInit (4 ms)
[----------] 10 tests from FinalisersTest (39 ms total)

[----------] 2 tests from ReachTest
[ RUN      ] ReachTest.IsectHasSubtypes
[       OK ] ReachTest.IsectHasSubtypes (8 ms)
[ RUN      ] ReachTest.Determinism
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/reach.cc:118: Failure
Expected: test_compile(src, "paint") doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] ReachTest.Determinism (358 ms)
[----------] 2 tests from ReachTest (366 ms total)

[----------] 11 tests from RecoverTest
[ RUN      ] RecoverTest.CanDoPartialApplication_TagWithLowerToTag
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
[       OK ] RecoverTest.CanDoPartialApplication_TagWithLowerToTag (5 ms)
[ RUN      ] RecoverTest.CantDoPartialApplication_RefWithLowerToTag
[       OK ] RecoverTest.CantDoPartialApplication_RefWithLowerToTag (3 ms)
[ RUN      ] RecoverTest.CantRecover_TupleMutableAlias
[       OK ] RecoverTest.CantRecover_TupleMutableAlias (3 ms)
[ RUN      ] RecoverTest.CanRecover_TupleMutableSingleLift
[       OK ] RecoverTest.CanRecover_TupleMutableSingleLift (3 ms)
[ RUN      ] RecoverTest.CantRecover_TupleMutableMultipleLifts
[       OK ] RecoverTest.CantRecover_TupleMutableMultipleLifts (3 ms)
[ RUN      ] RecoverTest.CanRecover_TupleMutableToImmutable
[       OK ] RecoverTest.CanRecover_TupleMutableToImmutable (3 ms)
[ RUN      ] RecoverTest.CantRecover_TupleMutableToMutableAndImmutable
[       OK ] RecoverTest.CantRecover_TupleMutableToMutableAndImmutable (3 ms)
[ RUN      ] RecoverTest.CantRecover_TupleInUnionAlias
[       OK ] RecoverTest.CantRecover_TupleInUnionAlias (4 ms)
[ RUN      ] RecoverTest.CanRecover_TupleInUnionSingleLift
[       OK ] RecoverTest.CanRecover_TupleInUnionSingleLift (4 ms)
[ RUN      ] RecoverTest.CantRecover_TupleInUnionMultipleLifts
[       OK ] RecoverTest.CantRecover_TupleInUnionMultipleLifts (3 ms)
[ RUN      ] RecoverTest.CantAccess_NonSendableLocalAssigned
[       OK ] RecoverTest.CantAccess_NonSendableLocalAssigned (3 ms)
[----------] 11 tests from RecoverTest (37 ms total)

[----------] 10 tests from BuildFlagSetTest
[ RUN      ] BuildFlagSetTest.PrintEmpty
[       OK ] BuildFlagSetTest.PrintEmpty (0 ms)
[ RUN      ] BuildFlagSetTest.EmptyHas1Config
[       OK ] BuildFlagSetTest.EmptyHas1Config (0 ms)
[ RUN      ] BuildFlagSetTest.Flag
[       OK ] BuildFlagSetTest.Flag (0 ms)
[ RUN      ] BuildFlagSetTest.PlatformOS
[       OK ] BuildFlagSetTest.PlatformOS (0 ms)
[ RUN      ] BuildFlagSetTest.MultipleFlags
[       OK ] BuildFlagSetTest.MultipleFlags (0 ms)
[ RUN      ] BuildFlagSetTest.UserFlagNoneDefined
[       OK ] BuildFlagSetTest.UserFlagNoneDefined (0 ms)
[ RUN      ] BuildFlagSetTest.UserFlagDefined
[       OK ] BuildFlagSetTest.UserFlagDefined (0 ms)
[ RUN      ] BuildFlagSetTest.UserFlagNotDefined
[       OK ] BuildFlagSetTest.UserFlagNotDefined (0 ms)
[ RUN      ] BuildFlagSetTest.UserFlagCaseSensitive
[       OK ] BuildFlagSetTest.UserFlagCaseSensitive (0 ms)
[ RUN      ] BuildFlagSetTest.UserFlagMultiple
[       OK ] BuildFlagSetTest.UserFlagMultiple (0 ms)
[----------] 10 tests from BuildFlagSetTest (0 ms total)

[----------] 32 tests from CodegenTest
[ RUN      ] CodegenTest.PackedStructIsPacked
[       OK ] CodegenTest.PackedStructIsPacked (7 ms)
[ RUN      ] CodegenTest.NonPackedStructIsntPacked
[       OK ] CodegenTest.NonPackedStructIsntPacked (8 ms)
[ RUN      ] CodegenTest.JitRun
[       OK ] CodegenTest.JitRun (17 ms)
[ RUN      ] CodegenTest.BoxBoolAsUnionIntoTuple
[       OK ] CodegenTest.BoxBoolAsUnionIntoTuple (10 ms)
[ RUN      ] CodegenTest.SmallFinalisers
[       OK ] CodegenTest.SmallFinalisers (18 ms)
[ RUN      ] CodegenTest.CCallback
[       OK ] CodegenTest.CCallback (20 ms)
[ RUN      ] CodegenTest.MatchExhaustiveAllCasesOfUnion
[       OK ] CodegenTest.MatchExhaustiveAllCasesOfUnion (17 ms)
[ RUN      ] CodegenTest.MatchExhaustiveAllCasesIncludingDontCareAndTuple
[       OK ] CodegenTest.MatchExhaustiveAllCasesIncludingDontCareAndTuple (27 ms)
[ RUN      ] CodegenTest.MatchExhaustiveAllCasesPrimitiveValues
[       OK ] CodegenTest.MatchExhaustiveAllCasesPrimitiveValues (21 ms)
[ RUN      ] CodegenTest.ArrayInfersMostSpecificFromUnionOfArrayTypes
[       OK ] CodegenTest.ArrayInfersMostSpecificFromUnionOfArrayTypes (25 ms)
[ RUN      ] CodegenTest.UnionOfTuplesToTuple
[       OK ] CodegenTest.UnionOfTuplesToTuple (9 ms)
[ RUN      ] CodegenTest.ViewpointAdaptedFieldReach
[       OK ] CodegenTest.ViewpointAdaptedFieldReach (6 ms)
[ RUN      ] CodegenTest.StringSerialization
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/serialise/_test.pony:84:9: argument not a subtype of parameter
        try
        ^
    Info:
    /home/ponyc/packages/serialise/_test.pony:84:9: argument type is (Bool val | None val)
            try
            ^
    /home/ponyc/packages/builtin/bool.pony:6:14: parameter type is Bool val
      fun op_and(y: Bool): Bool => this and y
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:90:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:85:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/ponytest/test_helper.pony:96:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:108:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:103:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/ponytest/test_helper.pony:114:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:305:16: a member of the union type has an incompatible method signature
          if e == a then
               ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'eq' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'ne' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of every element of (Equatable[A #read] #read & Stringable #read)
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/compare.pony:19:3: parameter box->A #read is not a supertype of None val
      fun eq(that: box->A): Bool => this is that
      ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:312:24: argument not a subtype of parameter
          missing.push(e)
                       ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:312:24: argument type is (ReadSeq[A #read] box->A #read | None val)
              missing.push(e)
                           ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is box->A #read
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'eq' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'ne' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of every element of (Equatable[A #read] #read & Stringable #read)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (ReadSeq[A #read] box->A #read | None val) is a subtype of box->A #read
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:317:12: could not infer type of local
      for (i, c) in consumed.pairs() do
           ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:318:16: cannot infer type of c

        if not c then extra.push(actual(i)?) end
               ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: can't lookup by name on a tuple
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find _1 in (String val, _Group tag)
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find '_1' in 'None'
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find _1 in None val
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: can't lookup by name on a tuple
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find _2 in (String val, _Group tag)
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find '_2' in 'None'
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find _2 in None val
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:383:18: right side must be a subtype of left side
        exe_name = arg
                 ^
    Info:
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:387:14: a member of the union type has an incompatible method signature
      if arg == "--sequential" then
             ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:389:18: a member of the union type has an incompatible method signature
      elseif arg == "--verbose" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:391:18: a member of the union type has an incompatible method signature
      elseif arg == "--noprog" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:393:18: a member of the union type has an incompatible method signature
      elseif arg == "--list" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:395:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--exclude=", 10) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:395:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--exclude=", 10) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:396:23: couldn't find 'substring' in 'None'
        _exclude = arg.substring(10)
                      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:396:23: couldn't find substring in None val
        _exclude = arg.substring(10)
                      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:397:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--label=", 8) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:397:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--label=", 8) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:398:21: couldn't find 'substring' in 'None'
        _label = arg.substring(8)
                    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:398:21: couldn't find substring in None val
        _label = arg.substring(8)
                    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:399:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--only=", 7) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:399:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--only=", 7) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:400:20: couldn't find 'substring' in 'None'
        _only = arg.substring(7)
                   ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:400:20: couldn't find substring in None val
        _only = arg.substring(7)
                   ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:402:53: argument not a subtype of parameter
        _env.out.print("Unrecognised argument \"" + arg + "\"")
                                                    ^
    Info:
    /home/ponyc/packages/ponytest/pony_test.pony:402:53: argument type is (String val | None val)
            _env.out.print("Unrecognised argument \"" + arg + "\"")
                                                        ^
    /home/ponyc/packages/builtin/string.pony:1188:11: parameter type is String box
      fun add(that: String box): String =>
              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String box
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String box
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:432:13: couldn't find '_report' in 'None'
      if rec._report(_verbose) then
            ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:432:13: couldn't find _report in None val
      if rec._report(_verbose) then
            ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:457:10: couldn't find '_list_failed' in 'None'
      rec._list_failed()
         ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:457:10: couldn't find _list_failed in None val
      rec._list_failed()
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:109:22: argument not a subtype of parameter
      _timers.cancel(timer)
                     ^
    Info:
    /home/ponyc/packages/ponytest/_test_runner.pony:109:22: argument type is (Timer tag | None val)
          _timers.cancel(timer)
                         ^
    /home/ponyc/packages/time/timers.pony:49:13: parameter type is Timer tag
      be cancel(timer: Timer tag) =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Timer tag
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Timer tag | None val) is a subtype of Timer tag
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:152:10: could not infer type of local
    for (i, action) in _expect_actions.pairs() do
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:153:10: cannot infer type of action

      if action == name then
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:231:41: argument not a subtype of parameter
      _log("Action never completed: " + action, false)
                                        ^
    Info:
    /home/ponyc/packages/ponytest/_test_runner.pony:231:41: argument type is (String val | None val)
          _log("Action never completed: " + action, false)
                                            ^
    /home/ponyc/packages/builtin/string.pony:1188:11: parameter type is String box
      fun add(that: String box): String =>
              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String box
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String box
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:258:19: couldn't find 'dispose' in 'None'
        disposable.dispose()
                  ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:258:19: couldn't find dispose in None val
        disposable.dispose()
                  ^
Error:
/home/ponyc/packages/ponytest/_test_record.pony:43:26: argument not a subtype of parameter
          _env.out.print(msg)
                         ^
    Info:
    /home/ponyc/packages/ponytest/_test_record.pony:43:26: argument type is (String val | None val)
              _env.out.print(msg)
                             ^
    /home/ponyc/packages/builtin/std_stream.pony:13:12: parameter type is (String val | Array[U8 val] val)
      be print(data: ByteSeq)
               ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:35:32: argument not a subtype of parameter
      _wheel.push(_TimingWheel(i))
                               ^
    Info:
    /home/ponyc/packages/time/timers.pony:35:32: argument type is (USize val | None val)
          _wheel.push(_TimingWheel(i))
                                   ^
    /home/ponyc/packages/time/_timing_wheel.pony:13:14: parameter type is USize val
      new create(index: USize) =>
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:69:12: couldn't find 'clear' in 'None'
      wheel.clear()
           ^
Error:
/home/ponyc/packages/time/timers.pony:69:12: couldn't find clear in None val
      wheel.clear()
           ^
Error:
/home/ponyc/packages/time/timers.pony:97:23: argument not a subtype of parameter
        if not _wheel(i)?.advance(_pending, _current, elapsed) then
                      ^
    Info:
    /home/ponyc/packages/time/timers.pony:97:23: argument type is (USize val | None val)
            if not _wheel(i)?.advance(_pending, _current, elapsed) then
                          ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:103:15: argument not a subtype of parameter
        _fire(timer)
              ^
    Info:
    /home/ponyc/packages/time/timers.pony:103:15: argument type is (Timer ref | None val)
            _fire(timer)
                  ^
    /home/ponyc/packages/time/timers.pony:128:17: parameter type is Timer ref
      fun ref _fire(timer: Timer) =>
                    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Timer ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Timer ref | None val) is a subtype of Timer ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:155:32: argument not a subtype of parameter
        next = next.min(_wheel(i)?.next(_current))
                               ^
    Info:
    /home/ponyc/packages/time/timers.pony:155:32: argument type is (USize val | None val)
            next = next.min(_wheel(i)?.next(_current))
                                   ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:24: couldn't find 'values' in 'None'
      for timer in list.values() do
                       ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:24: couldn't find values in None val
      for timer in list.values() do
                       ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:7: cannot infer type of for loop iterator

      for timer in list.values() do
      ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:88:9: cannot infer type of timer

        timer._cancel()
        ^
Error:
/home/ponyc/packages/collections/set.pony:72:11: argument not a subtype of parameter
      set(consume value)
          ^
    Info:
    /home/ponyc/packages/collections/set.pony:72:11: argument type is (A #any | None val)
          set(consume value)
              ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is A #any
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:102:17: argument not a subtype of parameter
        extract(value)?
                ^
    Info:
    /home/ponyc/packages/collections/set.pony:102:17: argument type is (A #any ! | None val)
            extract(value)?
                    ^
    /home/ponyc/packages/collections/set.pony:60:19: parameter type is box->A #any !
      fun ref extract(value: box->A!): A^ ? =>
                      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:104:13: argument not a subtype of parameter
        set(consume value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:104:13: argument type is (A #any | None val)
            set(consume value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is A #any
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:113:13: argument not a subtype of parameter
      unset(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:113:13: argument type is (box->A #any ! | None val)
          unset(value)
                ^
    /home/ponyc/packages/collections/set.pony:54:17: parameter type is box->A #any !
      fun ref unset(value: box->A!) =>
                    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (box->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:144:13: argument not a subtype of parameter
      r.set(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:144:13: argument type is (this->A #any ! | None val)
          r.set(value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:159:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:159:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:160:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:160:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:176:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:176:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:178:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:178:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:184:14: argument not a subtype of parameter
        this(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:184:14: argument type is (this->A #any ! | None val)
            this(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:186:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:186:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:202:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:202:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:204:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:204:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:217:13: argument not a subtype of parameter
      r.set(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:217:13: argument type is (this->A #any ! | None val)
          r.set(value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:246:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:246:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:132:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:128:37: function return type: V #any
      fun ref insert(key: K, value: V): V ? =>
                                        ^
    /home/ponyc/packages/collections/map.pony:146:25: function body type: (V #any | None val^)
          _array(i)? as (_, V)
                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (V #any | None val^) is a subtype of V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:166:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:152:47: function return type: V #any
      fun ref insert_if_absent(key: K, value: V): V ? =>
                                                  ^
    /home/ponyc/packages/collections/map.pony:181:25: function body type: (V #any | None val^)
          _array(i)? as (_, V)
                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (V #any | None val^) is a subtype of V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:213:5: function body isn't the result type
    if found then
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:206:48: function return type: this->V #any
      fun get_or_else(key: box->K!, alt: this->V): this->V =>
                                                   ^
    /home/ponyc/packages/collections/map.pony:215:27: function body type: (this->V #any | None val^)
            _array(i)? as (_, this->V)
                              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->V #any | None val^) is a subtype of this->V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:236:10: could not infer type of local
    for (k, v) in iter do
         ^
Error:
/home/ponyc/packages/collections/map.pony:237:33: cannot infer type of v

      this(consume k) = consume v
                                ^
Error:
/home/ponyc/packages/collections/map.pony:270:20: argument not a subtype of parameter
      match _array(i)?
                   ^
    Info:
    /home/ponyc/packages/collections/map.pony:270:20: argument type is (USize val | None val)
          match _array(i)?
                       ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:271:26: returned value isn't the return type
      | (_, _) => return i
                         ^
    Info:
    /home/ponyc/packages/collections/map.pony:264:37: function return type: USize val
      fun next_index(prev: USize = -1): USize ? =>
                                        ^
    /home/ponyc/packages/collections/range.pony:1:41: returned value type: (USize val^ | None val^)
    class Range[A: (Real[A] val & Number) = USize] is Iterator[A]
                                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val^ | None val^) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:298:10: could not infer type of local
    for (k, v) in pairs() do
         ^
Error:
/home/ponyc/packages/collections/map.pony:299:14: cannot infer type of v

      r(k) = v
             ^
Error:
/home/ponyc/packages/collections/map.pony:342:24: couldn't find 'add' in 'None'
        idx = (h + ((i + (i * i)) / 2)) and mask
                       ^
Error:
/home/ponyc/packages/collections/map.pony:342:24: couldn't find add in None val
        idx = (h + ((i + (i * i)) / 2)) and mask
                       ^
Error:
/home/ponyc/packages/collections/map.pony:342:29: couldn't find 'mul' in 'None'
        idx = (h + ((i + (i * i)) / 2)) and mask
                            ^
Error:
/home/ponyc/packages/collections/map.pony:342:29: couldn't find mul in None val
        idx = (h + ((i + (i * i)) / 2)) and mask
                            ^
Error:
/home/ponyc/packages/collections/map.pony:360:19: argument not a subtype of parameter
        match old(i)? = _MapDeleted
                  ^
    Info:
    /home/ponyc/packages/collections/map.pony:360:19: argument type is (USize val | None val)
            match old(i)? = _MapDeleted
                      ^
    /home/ponyc/packages/builtin/array.pony:213:18: parameter type is USize val
      fun ref update(i: USize, value: A): A^ ? =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:26:12: argument not a subtype of parameter
      push(consume value)
           ^
    Info:
    /home/ponyc/packages/collections/list.pony:26:12: argument type is (A #any | None val)
          push(consume value)
               ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is A #any
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:232:16: argument not a subtype of parameter
      out.push(v)
               ^
    Info:
    /home/ponyc/packages/collections/list.pony:232:16: argument type is (this->A #any ! | None val)
          out.push(v)
                   ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:240:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:236:40: function return type: List[B #any] ref^
      fun map[B](f: {(this->A!): B^} box): List[B]^ =>
                                           ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[B #any] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref^ | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:257:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:250:7: function return type: List[B #any] ref^
        : List[B]^
          ^
    /home/ponyc/packages/collections/list.pony:249:10: function body type: (List[B #any] ref | None val^)
        acc: List[B])
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:268:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:263:50: function return type: List[B #any] ref^
      fun flat_map[B](f: {(this->A!): List[B]} box): List[B]^ =>
                                                     ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[B #any] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref^ | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:284:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:277:20: function return type: List[B #any] ref^
        acc: List[B]): List[B]^
                       ^
    /home/ponyc/packages/collections/list.pony:277:10: function body type: (List[B #any] ref | None val^)
        acc: List[B]): List[B]^
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:294:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:290:42: function return type: List[this->A #any !] ref^
      fun filter(f: {(this->A!): Bool} box): List[this->A!]^ =>
                                             ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[this->A #any !] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref^ | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:313:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:303:27: function return type: List[this->A #any !] ref
        acc: List[this->A!]): List[this->A!]
                              ^
    /home/ponyc/packages/collections/list.pony:303:10: function body type: (List[this->A #any !] ref | None val^)
        acc: List[this->A!]): List[this->A!]
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref | None val^) is a subtype of List[this->A #any !] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:329:14: argument not a subtype of parameter
    _fold[B](h, f, consume acc)
             ^
    Info:
    /home/ponyc/packages/collections/list.pony:329:14: argument type is (this->ListNode[A #any] ref | None val)
        _fold[B](h, f, consume acc)
                 ^
    /home/ponyc/packages/collections/list.pony:332:5: parameter type is this->ListNode[A #any] ref
        ln: this->ListNode[A],
        ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of ListNode[A #any] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->ListNode[A #any] ref | None val) is a subtype of this->ListNode[A #any] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:340:20: right side must be a subtype of left side
    let nextAcc: B = try f(acc, ln()?) else consume acc end
                   ^
    Info:
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of B #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (B #any | None val) is a subtype of B #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:347:14: argument not a subtype of parameter
    _fold[B](h, f, consume nextAcc)
             ^
    Info:
    /home/ponyc/packages/collections/list.pony:347:14: argument type is (this->ListNode[A #any] ref | None val)
        _fold[B](h, f, consume nextAcc)
                 ^
    /home/ponyc/packages/collections/list.pony:332:5: parameter type is this->ListNode[A #any] ref
        ln: this->ListNode[A],
        ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of ListNode[A #any] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->ListNode[A #any] ref | None val) is a subtype of this->ListNode[A #any] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:354:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:349:41: function return type: Bool val
      fun every(f: {(this->A!): Bool} box): Bool =>
                                            ^
    /home/ponyc/packages/collections/list.pony:357:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:364:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:360:65: function return type: Bool val
      fun _every(ln: this->ListNode[A], f: {(this->A!): Bool} box): Bool =>
                                                                    ^
    /home/ponyc/packages/collections/list.pony:371:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:379:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:374:42: function return type: Bool val
      fun exists(f: {(this->A!): Bool} box): Bool =>
                                             ^
    /home/ponyc/packages/collections/list.pony:382:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:389:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:385:66: function return type: Bool val
      fun _exists(ln: this->ListNode[A], f: {(this->A!): Bool} box): Bool =>
                                                                     ^
    /home/ponyc/packages/collections/list.pony:396:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:12: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
           ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:12: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
               ^
    /home/ponyc/packages/collections/list.pony:400:14: parameter type is {(this->A!): Bool}[A #any] box->A #any !
        f: {(this->A!): Bool} box)
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of {(this->A!): Bool}[A #any] box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:31: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
                              ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:31: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
                                  ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:50: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
                                                 ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:50: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
                                                     ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:475:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:471:18: function return type: List[this->A #any !] ref^
      fun reverse(): List[this->A!]^ =>
                     ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[this->A #any !] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref^ | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:487:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:481:61: function return type: List[this->A #any !] ref^
      fun _reverse(ln: this->ListNode[A], acc: List[this->A!]): List[this->A!]^ =>
                                                                ^
    /home/ponyc/packages/collections/list.pony:481:44: function body type: (List[this->A #any !] ref | None val^)
      fun _reverse(ln: this->ListNode[A], acc: List[this->A!]): List[this->A!]^ =>
                                               ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:497:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:493:58: function return type: Bool val
      fun contains[B: (A & HasEq[A!] #read) = A](a: box->B): Bool =>
                                                             ^
    /home/ponyc/packages/collections/list.pony:500:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:511:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:506:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/collections/list.pony:518:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/_test.pony:111:10: could not infer type of local
    for (k, v) in a.pairs() do
         ^
Error:
/home/ponyc/packages/collections/_test.pony:112:31: cannot infer type of v

      h.assert_eq[U32](b(k)?, v)
                              ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: can't lookup by name on a tuple
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find _1 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find '_1' in 'None'
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find _1 in None val
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: can't lookup by name on a tuple
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find _2 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find '_2' in 'None'
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find _2 in None val
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:532:23: cannot infer type of sa

      let intersect = sa .> intersect(sb)
                      ^
Error:
/home/ponyc/packages/collections/_test.pony:532:39: cannot infer type of sb

      let intersect = sa .> intersect(sb)
                                      ^
Error:
/home/ponyc/packages/collections/_test.pony:533:26: cannot infer type of intersect

      h.assert_eq[USize](intersect.size(), test._3.size())
                         ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: can't lookup by name on a tuple
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find _3 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find '_3' in 'None'
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find _3 in None val
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: can't lookup by name on a tuple
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find _3 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find '_3' in 'None'
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find _3 in None val
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:7: cannot infer type of for loop iterator

      for v in test._3.values() do
      ^
Error:
/home/ponyc/packages/collections/_test.pony:535:42: cannot infer type of v

        h.assert_true(intersect.contains(v))
                                         ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/codegen.cc:333: Failure
Expected: test_compile(src, "ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CodegenTest.StringSerialization (840 ms)
[ RUN      ] CodegenTest.CustomSerialization
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/serialise/_test.pony:84:9: argument not a subtype of parameter
        try
        ^
    Info:
    /home/ponyc/packages/serialise/_test.pony:84:9: argument type is (Bool val | None val)
            try
            ^
    /home/ponyc/packages/builtin/bool.pony:6:14: parameter type is Bool val
      fun op_and(y: Bool): Bool => this and y
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:90:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:85:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/ponytest/test_helper.pony:96:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:108:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:103:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/ponytest/test_helper.pony:114:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:305:16: a member of the union type has an incompatible method signature
          if e == a then
               ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'eq' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'ne' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of every element of (Equatable[A #read] #read & Stringable #read)
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/compare.pony:19:3: parameter box->A #read is not a supertype of None val
      fun eq(that: box->A): Bool => this is that
      ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:312:24: argument not a subtype of parameter
          missing.push(e)
                       ^
    Info:
    /home/ponyc/packages/ponytest/test_helper.pony:312:24: argument type is (ReadSeq[A #read] box->A #read | None val)
              missing.push(e)
                           ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is box->A #read
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'eq' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/ponytest/test_helper.pony:286:56: no element of (Equatable[A #read] #read & Stringable #read) is a subtype of None val
      fun assert_array_eq_unordered[A: (Equatable[A] #read & Stringable #read)](
                                                           ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of box->A #read
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of Equatable[A #read] #read: method 'ne' has an incompatible signature
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of every element of (Equatable[A #read] #read & Stringable #read)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (ReadSeq[A #read] box->A #read | None val) is a subtype of box->A #read
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:317:12: could not infer type of local
      for (i, c) in consumed.pairs() do
           ^
Error:
/home/ponyc/packages/ponytest/test_helper.pony:318:16: cannot infer type of c

        if not c then extra.push(actual(i)?) end
               ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: can't lookup by name on a tuple
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find _1 in (String val, _Group tag)
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find '_1' in 'None'
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:294:11: couldn't find _1 in None val
      if g._1 == name then
          ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: can't lookup by name on a tuple
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find _2 in (String val, _Group tag)
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find '_2' in 'None'
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:295:17: couldn't find _2 in None val
        return g._2
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:383:18: right side must be a subtype of left side
        exe_name = arg
                 ^
    Info:
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:387:14: a member of the union type has an incompatible method signature
      if arg == "--sequential" then
             ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:389:18: a member of the union type has an incompatible method signature
      elseif arg == "--verbose" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:391:18: a member of the union type has an incompatible method signature
      elseif arg == "--noprog" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:393:18: a member of the union type has an incompatible method signature
      elseif arg == "--list" then
                 ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1276:16: String box is not a subtype of None val
      fun eq(that: String box): Bool =>
                   ^
    /home/ponyc/packages/builtin/none.pony:2:3: parameter None val is not a supertype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/none.pony:2:3: None val is not a subtype of String box
      fun string(): String iso^ =>
      ^
    /home/ponyc/packages/builtin/string.pony:1276:3: parameter String box is not a supertype of None val
      fun eq(that: String box): Bool =>
      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:395:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--exclude=", 10) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:395:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--exclude=", 10) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:396:23: couldn't find 'substring' in 'None'
        _exclude = arg.substring(10)
                      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:396:23: couldn't find substring in None val
        _exclude = arg.substring(10)
                      ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:397:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--label=", 8) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:397:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--label=", 8) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:398:21: couldn't find 'substring' in 'None'
        _label = arg.substring(8)
                    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:398:21: couldn't find substring in None val
        _label = arg.substring(8)
                    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:399:17: couldn't find 'compare_sub' in 'None'
      elseif arg.compare_sub("--only=", 7) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:399:17: couldn't find compare_sub in None val
      elseif arg.compare_sub("--only=", 7) is Equal then
                ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:400:20: couldn't find 'substring' in 'None'
        _only = arg.substring(7)
                   ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:400:20: couldn't find substring in None val
        _only = arg.substring(7)
                   ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:402:53: argument not a subtype of parameter
        _env.out.print("Unrecognised argument \"" + arg + "\"")
                                                    ^
    Info:
    /home/ponyc/packages/ponytest/pony_test.pony:402:53: argument type is (String val | None val)
            _env.out.print("Unrecognised argument \"" + arg + "\"")
                                                        ^
    /home/ponyc/packages/builtin/string.pony:1188:11: parameter type is String box
      fun add(that: String box): String =>
              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String box
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String box
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:432:13: couldn't find '_report' in 'None'
      if rec._report(_verbose) then
            ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:432:13: couldn't find _report in None val
      if rec._report(_verbose) then
            ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:457:10: couldn't find '_list_failed' in 'None'
      rec._list_failed()
         ^
Error:
/home/ponyc/packages/ponytest/pony_test.pony:457:10: couldn't find _list_failed in None val
      rec._list_failed()
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:109:22: argument not a subtype of parameter
      _timers.cancel(timer)
                     ^
    Info:
    /home/ponyc/packages/ponytest/_test_runner.pony:109:22: argument type is (Timer tag | None val)
          _timers.cancel(timer)
                         ^
    /home/ponyc/packages/time/timers.pony:49:13: parameter type is Timer tag
      be cancel(timer: Timer tag) =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Timer tag
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Timer tag | None val) is a subtype of Timer tag
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:152:10: could not infer type of local
    for (i, action) in _expect_actions.pairs() do
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:153:10: cannot infer type of action

      if action == name then
         ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:231:41: argument not a subtype of parameter
      _log("Action never completed: " + action, false)
                                        ^
    Info:
    /home/ponyc/packages/ponytest/_test_runner.pony:231:41: argument type is (String val | None val)
          _log("Action never completed: " + action, false)
                                            ^
    /home/ponyc/packages/builtin/string.pony:1188:11: parameter type is String box
      fun add(that: String box): String =>
              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String box
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of String box
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:258:19: couldn't find 'dispose' in 'None'
        disposable.dispose()
                  ^
Error:
/home/ponyc/packages/ponytest/_test_runner.pony:258:19: couldn't find dispose in None val
        disposable.dispose()
                  ^
Error:
/home/ponyc/packages/ponytest/_test_record.pony:43:26: argument not a subtype of parameter
          _env.out.print(msg)
                         ^
    Info:
    /home/ponyc/packages/ponytest/_test_record.pony:43:26: argument type is (String val | None val)
              _env.out.print(msg)
                             ^
    /home/ponyc/packages/builtin/std_stream.pony:13:12: parameter type is (String val | Array[U8 val] val)
      be print(data: ByteSeq)
               ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:35:32: argument not a subtype of parameter
      _wheel.push(_TimingWheel(i))
                               ^
    Info:
    /home/ponyc/packages/time/timers.pony:35:32: argument type is (USize val | None val)
          _wheel.push(_TimingWheel(i))
                                   ^
    /home/ponyc/packages/time/_timing_wheel.pony:13:14: parameter type is USize val
      new create(index: USize) =>
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:69:12: couldn't find 'clear' in 'None'
      wheel.clear()
           ^
Error:
/home/ponyc/packages/time/timers.pony:69:12: couldn't find clear in None val
      wheel.clear()
           ^
Error:
/home/ponyc/packages/time/timers.pony:97:23: argument not a subtype of parameter
        if not _wheel(i)?.advance(_pending, _current, elapsed) then
                      ^
    Info:
    /home/ponyc/packages/time/timers.pony:97:23: argument type is (USize val | None val)
            if not _wheel(i)?.advance(_pending, _current, elapsed) then
                          ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:103:15: argument not a subtype of parameter
        _fire(timer)
              ^
    Info:
    /home/ponyc/packages/time/timers.pony:103:15: argument type is (Timer ref | None val)
            _fire(timer)
                  ^
    /home/ponyc/packages/time/timers.pony:128:17: parameter type is Timer ref
      fun ref _fire(timer: Timer) =>
                    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Timer ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Timer ref | None val) is a subtype of Timer ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/timers.pony:155:32: argument not a subtype of parameter
        next = next.min(_wheel(i)?.next(_current))
                               ^
    Info:
    /home/ponyc/packages/time/timers.pony:155:32: argument type is (USize val | None val)
            next = next.min(_wheel(i)?.next(_current))
                                   ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:24: couldn't find 'values' in 'None'
      for timer in list.values() do
                       ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:24: couldn't find values in None val
      for timer in list.values() do
                       ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:87:7: cannot infer type of for loop iterator

      for timer in list.values() do
      ^
Error:
/home/ponyc/packages/time/_timing_wheel.pony:88:9: cannot infer type of timer

        timer._cancel()
        ^
Error:
/home/ponyc/packages/collections/set.pony:72:11: argument not a subtype of parameter
      set(consume value)
          ^
    Info:
    /home/ponyc/packages/collections/set.pony:72:11: argument type is (A #any | None val)
          set(consume value)
              ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is A #any
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:102:17: argument not a subtype of parameter
        extract(value)?
                ^
    Info:
    /home/ponyc/packages/collections/set.pony:102:17: argument type is (A #any ! | None val)
            extract(value)?
                    ^
    /home/ponyc/packages/collections/set.pony:60:19: parameter type is box->A #any !
      fun ref extract(value: box->A!): A^ ? =>
                      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:104:13: argument not a subtype of parameter
        set(consume value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:104:13: argument type is (A #any | None val)
            set(consume value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is A #any
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:113:13: argument not a subtype of parameter
      unset(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:113:13: argument type is (box->A #any ! | None val)
          unset(value)
                ^
    /home/ponyc/packages/collections/set.pony:54:17: parameter type is box->A #any !
      fun ref unset(value: box->A!) =>
                    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (box->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:144:13: argument not a subtype of parameter
      r.set(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:144:13: argument type is (this->A #any ! | None val)
          r.set(value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:159:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:159:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:160:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:160:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:176:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:176:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:178:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:178:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:184:14: argument not a subtype of parameter
        this(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:184:14: argument type is (this->A #any ! | None val)
            this(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:186:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:186:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:202:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:202:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:204:15: argument not a subtype of parameter
        r.set(value)
              ^
    Info:
    /home/ponyc/packages/collections/set.pony:204:15: argument type is (this->A #any ! | None val)
            r.set(value)
                  ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:217:13: argument not a subtype of parameter
      r.set(value)
            ^
    Info:
    /home/ponyc/packages/collections/set.pony:217:13: argument type is (this->A #any ! | None val)
          r.set(value)
                ^
    /home/ponyc/packages/collections/set.pony:48:15: parameter type is this->A #any !
      fun ref set(value: A) =>
                  ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/set.pony:246:14: argument not a subtype of parameter
        that(value)?
             ^
    Info:
    /home/ponyc/packages/collections/set.pony:246:14: argument type is (this->A #any ! | None val)
            that(value)?
                 ^
    /home/ponyc/packages/collections/set.pony:30:13: parameter type is box->A #any !
      fun apply(value: box->A!): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:132:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:128:37: function return type: V #any
      fun ref insert(key: K, value: V): V ? =>
                                        ^
    /home/ponyc/packages/collections/map.pony:146:25: function body type: (V #any | None val^)
          _array(i)? as (_, V)
                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (V #any | None val^) is a subtype of V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:166:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:152:47: function return type: V #any
      fun ref insert_if_absent(key: K, value: V): V ? =>
                                                  ^
    /home/ponyc/packages/collections/map.pony:181:25: function body type: (V #any | None val^)
          _array(i)? as (_, V)
                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (V #any | None val^) is a subtype of V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:213:5: function body isn't the result type
    if found then
    ^
    Info:
    /home/ponyc/packages/collections/map.pony:206:48: function return type: this->V #any
      fun get_or_else(key: box->K!, alt: this->V): this->V =>
                                                   ^
    /home/ponyc/packages/collections/map.pony:215:27: function body type: (this->V #any | None val^)
            _array(i)? as (_, this->V)
                              ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of V #any: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->V #any | None val^) is a subtype of this->V #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:236:10: could not infer type of local
    for (k, v) in iter do
         ^
Error:
/home/ponyc/packages/collections/map.pony:237:33: cannot infer type of v

      this(consume k) = consume v
                                ^
Error:
/home/ponyc/packages/collections/map.pony:270:20: argument not a subtype of parameter
      match _array(i)?
                   ^
    Info:
    /home/ponyc/packages/collections/map.pony:270:20: argument type is (USize val | None val)
          match _array(i)?
                       ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:271:26: returned value isn't the return type
      | (_, _) => return i
                         ^
    Info:
    /home/ponyc/packages/collections/map.pony:264:37: function return type: USize val
      fun next_index(prev: USize = -1): USize ? =>
                                        ^
    /home/ponyc/packages/collections/range.pony:1:41: returned value type: (USize val^ | None val^)
    class Range[A: (Real[A] val & Number) = USize] is Iterator[A]
                                            ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val^ | None val^) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/map.pony:298:10: could not infer type of local
    for (k, v) in pairs() do
         ^
Error:
/home/ponyc/packages/collections/map.pony:299:14: cannot infer type of v

      r(k) = v
             ^
Error:
/home/ponyc/packages/collections/map.pony:342:24: couldn't find 'add' in 'None'
        idx = (h + ((i + (i * i)) / 2)) and mask
                       ^
Error:
/home/ponyc/packages/collections/map.pony:342:24: couldn't find add in None val
        idx = (h + ((i + (i * i)) / 2)) and mask
                       ^
Error:
/home/ponyc/packages/collections/map.pony:342:29: couldn't find 'mul' in 'None'
        idx = (h + ((i + (i * i)) / 2)) and mask
                            ^
Error:
/home/ponyc/packages/collections/map.pony:342:29: couldn't find mul in None val
        idx = (h + ((i + (i * i)) / 2)) and mask
                            ^
Error:
/home/ponyc/packages/collections/map.pony:360:19: argument not a subtype of parameter
        match old(i)? = _MapDeleted
                  ^
    Info:
    /home/ponyc/packages/collections/map.pony:360:19: argument type is (USize val | None val)
            match old(i)? = _MapDeleted
                      ^
    /home/ponyc/packages/builtin/array.pony:213:18: parameter type is USize val
      fun ref update(i: USize, value: A): A^ ? =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:26:12: argument not a subtype of parameter
      push(consume value)
           ^
    Info:
    /home/ponyc/packages/collections/list.pony:26:12: argument type is (A #any | None val)
          push(consume value)
               ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is A #any
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (A #any | None val) is a subtype of A #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:232:16: argument not a subtype of parameter
      out.push(v)
               ^
    Info:
    /home/ponyc/packages/collections/list.pony:232:16: argument type is (this->A #any ! | None val)
          out.push(v)
                   ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:240:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:236:40: function return type: List[B #any] ref^
      fun map[B](f: {(this->A!): B^} box): List[B]^ =>
                                           ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[B #any] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref^ | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:257:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:250:7: function return type: List[B #any] ref^
        : List[B]^
          ^
    /home/ponyc/packages/collections/list.pony:249:10: function body type: (List[B #any] ref | None val^)
        acc: List[B])
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:268:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:263:50: function return type: List[B #any] ref^
      fun flat_map[B](f: {(this->A!): List[B]} box): List[B]^ =>
                                                     ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[B #any] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref^ | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:284:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:277:20: function return type: List[B #any] ref^
        acc: List[B]): List[B]^
                       ^
    /home/ponyc/packages/collections/list.pony:277:10: function body type: (List[B #any] ref | None val^)
        acc: List[B]): List[B]^
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[B #any] ref | None val^) is a subtype of List[B #any] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:294:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:290:42: function return type: List[this->A #any !] ref^
      fun filter(f: {(this->A!): Bool} box): List[this->A!]^ =>
                                             ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[this->A #any !] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref^ | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:313:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:303:27: function return type: List[this->A #any !] ref
        acc: List[this->A!]): List[this->A!]
                              ^
    /home/ponyc/packages/collections/list.pony:303:10: function body type: (List[this->A #any !] ref | None val^)
        acc: List[this->A!]): List[this->A!]
             ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref | None val^) is a subtype of List[this->A #any !] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:329:14: argument not a subtype of parameter
    _fold[B](h, f, consume acc)
             ^
    Info:
    /home/ponyc/packages/collections/list.pony:329:14: argument type is (this->ListNode[A #any] ref | None val)
        _fold[B](h, f, consume acc)
                 ^
    /home/ponyc/packages/collections/list.pony:332:5: parameter type is this->ListNode[A #any] ref
        ln: this->ListNode[A],
        ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of ListNode[A #any] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->ListNode[A #any] ref | None val) is a subtype of this->ListNode[A #any] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:340:20: right side must be a subtype of left side
    let nextAcc: B = try f(acc, ln()?) else consume acc end
                   ^
    Info:
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of B #any: the type parameter has no lower bounds
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (B #any | None val) is a subtype of B #any
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:347:14: argument not a subtype of parameter
    _fold[B](h, f, consume nextAcc)
             ^
    Info:
    /home/ponyc/packages/collections/list.pony:347:14: argument type is (this->ListNode[A #any] ref | None val)
        _fold[B](h, f, consume nextAcc)
                 ^
    /home/ponyc/packages/collections/list.pony:332:5: parameter type is this->ListNode[A #any] ref
        ln: this->ListNode[A],
        ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of ListNode[A #any] ref
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->ListNode[A #any] ref | None val) is a subtype of this->ListNode[A #any] ref
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:354:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:349:41: function return type: Bool val
      fun every(f: {(this->A!): Bool} box): Bool =>
                                            ^
    /home/ponyc/packages/collections/list.pony:357:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:364:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:360:65: function return type: Bool val
      fun _every(ln: this->ListNode[A], f: {(this->A!): Bool} box): Bool =>
                                                                    ^
    /home/ponyc/packages/collections/list.pony:371:7: function body type: (Bool val | None val^)
          true
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:379:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:374:42: function return type: Bool val
      fun exists(f: {(this->A!): Bool} box): Bool =>
                                             ^
    /home/ponyc/packages/collections/list.pony:382:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:389:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:385:66: function return type: Bool val
      fun _exists(ln: this->ListNode[A], f: {(this->A!): Bool} box): Bool =>
                                                                     ^
    /home/ponyc/packages/collections/list.pony:396:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:12: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
           ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:12: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
               ^
    /home/ponyc/packages/collections/list.pony:400:14: parameter type is {(this->A!): Bool}[A #any] box->A #any !
        f: {(this->A!): Bool} box)
                 ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of {(this->A!): Bool}[A #any] box->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:31: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
                              ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:31: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
                                  ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:411:50: argument not a subtype of parameter
      if f(item) then l1.push(item) else l2.push(item) end
                                                 ^
    Info:
    /home/ponyc/packages/collections/list.pony:411:50: argument type is (this->A #any ! | None val)
          if f(item) then l1.push(item) else l2.push(item) end
                                                     ^
    /home/ponyc/packages/collections/list.pony:142:16: parameter type is this->A #any !
      fun ref push(a: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of A #any !: the type parameter has no constraint
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (this->A #any ! | None val) is a subtype of this->A #any !
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:475:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:471:18: function return type: List[this->A #any !] ref^
      fun reverse(): List[this->A!]^ =>
                     ^
    /home/ponyc/packages/collections/list.pony:9:3: function body type: (List[this->A #any !] ref^ | None val^)
      new create(len: USize = 0) =>
      ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref^ | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:487:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:481:61: function return type: List[this->A #any !] ref^
      fun _reverse(ln: this->ListNode[A], acc: List[this->A!]): List[this->A!]^ =>
                                                                ^
    /home/ponyc/packages/collections/list.pony:481:44: function body type: (List[this->A #any !] ref | None val^)
      fun _reverse(ln: this->ListNode[A], acc: List[this->A!]): List[this->A!]^ =>
                                               ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (List[this->A #any !] ref | None val^) is a subtype of List[this->A #any !] ref^
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:497:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:493:58: function return type: Bool val
      fun contains[B: (A & HasEq[A!] #read) = A](a: box->B): Bool =>
                                                             ^
    /home/ponyc/packages/collections/list.pony:500:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/list.pony:511:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/collections/list.pony:506:7: function return type: Bool val
        : Bool
          ^
    /home/ponyc/packages/collections/list.pony:518:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/collections/_test.pony:111:10: could not infer type of local
    for (k, v) in a.pairs() do
         ^
Error:
/home/ponyc/packages/collections/_test.pony:112:31: cannot infer type of v

      h.assert_eq[U32](b(k)?, v)
                              ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: can't lookup by name on a tuple
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find _1 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find '_1' in 'None'
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:530:38: couldn't find _1 in None val
      let sa = Set[U32] .> union(test._1.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: can't lookup by name on a tuple
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find _2 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find '_2' in 'None'
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:531:38: couldn't find _2 in None val
      let sb = Set[U32] .> union(test._2.values())
                                     ^
Error:
/home/ponyc/packages/collections/_test.pony:532:23: cannot infer type of sa

      let intersect = sa .> intersect(sb)
                      ^
Error:
/home/ponyc/packages/collections/_test.pony:532:39: cannot infer type of sb

      let intersect = sa .> intersect(sb)
                                      ^
Error:
/home/ponyc/packages/collections/_test.pony:533:26: cannot infer type of intersect

      h.assert_eq[USize](intersect.size(), test._3.size())
                         ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: can't lookup by name on a tuple
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find _3 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find '_3' in 'None'
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:533:48: couldn't find _3 in None val
      h.assert_eq[USize](intersect.size(), test._3.size())
                                               ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: can't lookup by name on a tuple
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find _3 in (Array[U32 val] ref, Array[U32 val] ref, Array[U32 val] ref)
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find '_3' in 'None'
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:20: couldn't find _3 in None val
      for v in test._3.values() do
                   ^
Error:
/home/ponyc/packages/collections/_test.pony:534:7: cannot infer type of for loop iterator

      for v in test._3.values() do
      ^
Error:
/home/ponyc/packages/collections/_test.pony:535:42: cannot infer type of v

        h.assert_true(intersect.contains(v))
                                         ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/codegen.cc:392: Failure
Expected: test_compile(src, "ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CodegenTest.CustomSerialization (820 ms)
[ RUN      ] CodegenTest.DoNotOptimiseApplyPrimitive
[       OK ] CodegenTest.DoNotOptimiseApplyPrimitive (9 ms)
[ RUN      ] CodegenTest.DescTable
[       OK ] CodegenTest.DescTable (9 ms)
[ RUN      ] CodegenTest.RecoverCast
[       OK ] CodegenTest.RecoverCast (6 ms)
[ RUN      ] CodegenTest.VariableDeclNestedTuple
Error:
could not infer type of local
    for ((a, b), c) in array.values() do
          ^
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/codegen.cc:602: Failure
Expected: test_compile(src, "ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CodegenTest.VariableDeclNestedTuple (4 ms)
[ RUN      ] CodegenTest.TupleRemoveUnreachableBlockInLoop
[       OK ] CodegenTest.TupleRemoveUnreachableBlockInLoop (7 ms)
[ RUN      ] CodegenTest.TupleRemoveUnreachableBlock
[       OK ] CodegenTest.TupleRemoveUnreachableBlock (7 ms)
[ RUN      ] CodegenTest.RedundantUnionInForLoopIteratorValueType
[       OK ] CodegenTest.RedundantUnionInForLoopIteratorValueType (7 ms)
[ RUN      ] CodegenTest.WhileLoopBreakOnlyValueNeeded
[       OK ] CodegenTest.WhileLoopBreakOnlyValueNeeded (7 ms)
[ RUN      ] CodegenTest.WhileLoopBreakOnlyInBranches
[       OK ] CodegenTest.WhileLoopBreakOnlyInBranches (6 ms)
[ RUN      ] CodegenTest.RepeatLoopBreakOnlyValueNeeded
[       OK ] CodegenTest.RepeatLoopBreakOnlyValueNeeded (8 ms)
[ RUN      ] CodegenTest.RepeatLoopBreakOnlyInBranches
[       OK ] CodegenTest.RepeatLoopBreakOnlyInBranches (6 ms)
[ RUN      ] CodegenTest.CycleDetector
Error:
/home/ponyc/packages/builtin/string.pony:1064:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1064:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1126:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1126:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/string.pony:1157:20: argument not a subtype of parameter
        chars.push(rune)
                   ^
    Info:
    /home/ponyc/packages/builtin/string.pony:1157:20: argument type is (U32 val | None val)
            chars.push(rune)
                       ^
    /home/ponyc/packages/builtin/array.pony:368:16: parameter type is U32 val
test/libponyc/util.cc:604: Failure
Expected: ((void*)__null) != (program), actual: NULL vs NULL
test/libponyc/util.cc:335: Failure
Expected: build_package(pass, src, _first_pkg_path, true, __null, false) doesn't generate new fatal failures in the current thread.
  Actual: it does.
test/libponyc/codegen.cc:807: Failure
Expected: test_compile(src, "ir") doesn't generate new fatal failures in the current thread.
  Actual: it does.
[  FAILED  ] CodegenTest.CycleDetector (384 ms)
[ RUN      ] CodegenTest.TryThenClauseReturn
      fun ref push(value: A) =>
                   ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of U32 val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (U32 val | None val) is a subtype of U32 val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/stdin.pony:150:5: function body isn't the result type
    try
    ^
    Info:
    /home/ponyc/packages/builtin/stdin.pony:145:20: function return type: Bool val
      fun ref _read(): Bool =>
                       ^
    /home/ponyc/packages/builtin/stdin.pony:197:7: function body type: (Bool val | None val^)
          false
          ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val^ is not a subtype of Bool val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (Bool val | None val^) is a subtype of Bool val
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:69:14: argument not a subtype of parameter
      _print(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:69:14: argument type is (String val | Array[U8 val] val | None val)
          _print(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:86:18: parameter type is (String val | Array[U8 val] val)
      fun ref _print(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/std_stream.pony:77:14: argument not a subtype of parameter
      _write(bytes)
             ^
    Info:
    /home/ponyc/packages/builtin/std_stream.pony:77:14: argument type is (String val | Array[U8 val] val | None val)
          _write(bytes)
                 ^
    /home/ponyc/packages/builtin/std_stream.pony:80:18: parameter type is (String val | Array[U8 val] val)
      fun ref _write(data: ByteSeq) =>
                     ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of String val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of Array[U8 val] val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of any element of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (String val | Array[U8 val] val | None val) is a subtype of (String val | Array[U8 val] val)
    primitive None is Stringable
    ^
Error:
/home/ponyc/packages/builtin/array.pony:629:21: argument not a subtype of parameter
      out.push(this(i)?)
                    ^
    Info:
    /home/ponyc/packages/builtin/array.pony:629:21: argument type is (USize val | None val)
          out.push(this(i)?)
                        ^
    /home/ponyc/packages/builtin/array.pony:203:13: parameter type is USize val
      fun apply(i: USize): this->A ? =>
                ^
    /home/ponyc/packages/builtin/none.pony:1:1: None val is not a subtype of USize val
    primitive None is Stringable
    ^
    /home/ponyc/packages/builtin/none.pony:1:1: not every element of (USize val | None val) is a subtype of USize val
    primitive None is Stringable
    ^
[       OK ] CodegenTest.TryThenClauseReturn (19 ms)
[ RUN      ] CodegenTest.TryThenClauseReturnNested
test/libponyc/codegen.cc:853: Failure
Expected equality of these values:
  exit_code
    Which is: 0
  42
[  FAILED  ] CodegenTest.TryThenClauseReturnNested (18 ms)
[ RUN      ] CodegenTest.TryThenClauseBreak
src/libponyc/ast/ast.c:1051: ast_index: Assertion `ast != NULL` failed.

make: *** [test-core] Segmentation fault (core dumped)
Makefile:950: recipe for target 'test-core' failed
