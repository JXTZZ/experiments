--- a/src/libponyc/codegen/genname.c
+++ b/src/libponyc/codegen/genname.c
@@ -57,6 +57,26 @@
       return;
     }
 
+    case TK_TYPEPARAMREF:
+    {
+      // Type parameter reference - use the parameter name
+      AST_GET_CHILDREN(type, id, cap, eph);
+      printbuf(buf, "%s", ast_name(id));
+
+      if(!first)
+        printbuf(buf, "_%s", ast_get_print(cap));
+
+      return;
+    }
+
+    case TK_ARROW:
+    {
+      // Arrow type (this->T) - use the right side
+      AST_GET_CHILDREN(type, left, right);
+      type_append(buf, right, first);
+      return;
+    }
+
     default: {}
   }
 
