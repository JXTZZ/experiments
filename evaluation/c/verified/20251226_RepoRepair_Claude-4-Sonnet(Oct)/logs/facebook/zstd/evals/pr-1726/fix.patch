--- a/programs/benchzstd.c
+++ b/programs/benchzstd.c
@@ -419,6 +419,7 @@
         cctxprep.cLevel = cLevel;
         cctxprep.comprParams = comprParams;
         cctxprep.adv = adv;
+        cctxprep.srcSize = srcSize;
 
         dbp.benchFn = local_defaultDecompress;
         dbp.benchPayload = dctx;

--- a/programs/fileio.c
+++ b/programs/fileio.c
@@ -700,7 +700,6 @@
         /* dictionary */
         CHECK( ZSTD_CCtx_setPledgedSrcSize(ress.cctx, srcSize) );  /* set the value temporarily for dictionary loading, to adapt compression parameters */
         CHECK( ZSTD_CCtx_loadDictionary(ress.cctx, dictBuffer, dictBuffSize) );
-        CHECK( ZSTD_CCtx_setPledgedSrcSize(ress.cctx, ZSTD_CONTENTSIZE_UNKNOWN) );  /* reset */
 
         free(dictBuffer);
     }
