--- a/lib/zstd.h
+++ b/lib/zstd.h
@@ -76,10 +76,9 @@
 #define ZSTD_VERSION_NUMBER  (ZSTD_VERSION_MAJOR *100*100 + ZSTD_VERSION_MINOR *100 + ZSTD_VERSION_RELEASE)
 ZSTDLIB_API unsigned ZSTD_versionNumber(void);   /**< useful to check dll version */
 
-#define ZSTD_LIB_VERSION ZSTD_VERSION_MAJOR.ZSTD_VERSION_MINOR.ZSTD_VERSION_RELEASE
 #define ZSTD_QUOTE(str) #str
 #define ZSTD_EXPAND_AND_QUOTE(str) ZSTD_QUOTE(str)
-#define ZSTD_VERSION_STRING ZSTD_EXPAND_AND_QUOTE(ZSTD_LIB_VERSION)
+#define ZSTD_VERSION_STRING ZSTD_EXPAND_AND_QUOTE(ZSTD_VERSION_MAJOR) "." ZSTD_EXPAND_AND_QUOTE(ZSTD_VERSION_MINOR) "." ZSTD_EXPAND_AND_QUOTE(ZSTD_VERSION_RELEASE)
 ZSTDLIB_API const char* ZSTD_versionString(void);   /* v1.3.0+ */
 
 /***************************************

--- a/programs/zstdcli.c
+++ b/programs/zstdcli.c
@@ -1067,9 +1067,9 @@
 #ifndef ZSTD_NODECOMPRESS
         if (memLimit == 0) {
             if (compressionParams.windowLog == 0)
-                memLimit = (U32)1 << g_defaultMaxWindowLog;
+                memLimit = (U32)((U64)1 << g_defaultMaxWindowLog);
             else {
-                memLimit = (U32)1 << (compressionParams.windowLog & 31);
+                memLimit = (U32)((U64)1 << (compressionParams.windowLog & 31));
             }
         }
         FIO_setMemLimit(memLimit);
