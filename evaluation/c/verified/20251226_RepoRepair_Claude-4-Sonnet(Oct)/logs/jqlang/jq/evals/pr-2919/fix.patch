--- a/src/main.c
+++ b/src/main.c
@@ -354,7 +354,9 @@
   jv lib_search_paths = jv_null();
   for (int i=1; i<argc; i++, short_opts = 0) {
     if (args_done) {
-      if (further_args_are_strings) {
+      if (!program) {
+        program = argv[i];
+      } else if (further_args_are_strings) {
         ARGS = jv_array_append(ARGS, jv_string(argv[i]));
       } else if (further_args_are_json) {
         jv v =  jv_parse(argv[i]);
@@ -368,7 +370,6 @@
         nfiles++;
       }
     } else if (!strcmp(argv[i], "--")) {
-      if (!program) usage(2, 1);
       args_done = 1;
     } else if (!isoptish(argv[i])) {
       if (program) {
