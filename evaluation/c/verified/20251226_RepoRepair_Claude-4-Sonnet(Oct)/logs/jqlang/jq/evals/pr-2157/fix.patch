--- a/src/builtin.c
+++ b/src/builtin.c
@@ -642,7 +642,8 @@ static jv f_format(jq_state *jq, jv input, jv fmt) {
     input = f_tostring(jq, input);
 
     int unreserved[128] = {0};
-    const char* p = CHARS_ALPHANUM "-_.!~*'()";
+    // RFC 3986 section 2.3: Unreserved Characters
+    const char* p = CHARS_ALPHANUM "-._~";
     while (*p) unreserved[(int)*p++] = 1;
 
     jv line = jv_string("");
