{"instance_id": "facebook__zstd-1390", "rag_files": [{"filename": "1390.txt", "content": "repo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_HUF_compress.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.c_ZSTDv03.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD_createDStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZWRAP.initializeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v05.c_ZSTDv05.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_compress.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_estimateCCtxSize.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compressBlock.btopt2.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF.compressInit.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD.noCompressLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.c_ZSTDv03.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_setDStreamParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_estimateCStreamSize.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v06.c_ZSTDv06_frameHeaderSize.max.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_legacy.h_ZSTD.decompressLegacy.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compressBlock.btopt.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress_internal.h_ZSTD_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_createCCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD_decompress.usingDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress_test.c_zstd_compress_test.write.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_freeCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.equivalentParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.c_ZSTDv07.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_lazy.c_ZSTD.preserveUnsortedMark.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_zstd_internal.h_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_setOverlapLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_CCtxParams.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_POOL_create_advanced_size_t_numThreads_size_t_queueSize_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_CCtxParams.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ldm.h_ZSTD_ldm.skipSequences.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.c_ZSTDv07.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.seqToCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.c_MEM.readLEST.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_sizeof.CDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compress_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTD.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTDv04_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD.decompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_createDCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.clampCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.c_ZSTDv02.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v06.h_ZSTDv06.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_CCtx.setPledgedSrcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_createCCtxParams.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_createCCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.c_ZSTDv07_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD_getDictID.fromFrame.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_error_private.h_ERR.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_estimateCCtxSize.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_compressBlock_btopt.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v01.c_ZSTDv01_Dctx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_createCCtxParams_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.c_ZSTDv02_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_legacy.h_ZSTD.freeLegacyStreamContext.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_HUF_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.h_ZSTDMT.setMTCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_shrinkSizes.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.CStreamWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_CCtxParam.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD.highbit32.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZWRAP.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_zstd_internal.h_ZSTD.freeDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress_internal.h_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v06.c_ZBUFFv06_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.c_ZSTDv02.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.minCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZBUFF.compressFlush.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.h_ZSTDv03_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD_sizeof.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v01.h_ZSTDv01.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v01.c_ZSTD.decompressSequences.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v05.c_ZBUFFv05.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compressBlock_btopt.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.maxCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD.execSequence.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_seekable.h_ZSTD_seekable.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_compressBlock_lazy_extDict.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZBUFF.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.h_ZSTDv04.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v01.c_ZSTDv01_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.c_ZSTDv07_decompressBlock.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_CCtxParams_init.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.h_ZSTD.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_CCtxParam.getParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZBUFF_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_CCtxParam.getParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_entropy_common.c_FSE.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF.recommendedDInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_getDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.c_ZSTDv02.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress_test.c.output.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_zstd_common.c_ZSTD.stackFree.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v05.h_ZSTDv05.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_initDStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.c_ZSTDv03.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD.noCompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_legacy.h_ZSTD.initLegacyStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.c_ZSTDv07.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZBUFFv04_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTDv04.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.c_ZSTD.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_XXH32.copyState.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_compress.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.c_ZSTD.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ss.fixdown.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v01.c_ZSTDv01.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_compressBegin.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD.defaultFreeFunction.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTDv04.getFrameParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF.decompressInitDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD.freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v01.h_ZSTDv01.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.c_ZSTD.decodeSeqHeaders.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.h_ZSTDv03_Dctx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v03.c_ZSTDv03.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.c_ZSTDv07.decompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD_decompress.usingDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTDMT.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTDv04.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstdseek_decompress.c_ZSTD_seekable.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_freeFileList.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD.DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTDv04.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress_test.c.output.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.h_ZBUFFv07_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_zstd_internal.h_ZSTD.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress_internal.h_ZSTD_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_programs_fileio.c.outBuff.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTDv04_Dctx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.h_ZSTDv02_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compressContinue.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_mem.h_ZSTD.write32.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.c_ZSTDv02.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD.resetDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v07.h_ZSTDv07.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD_decompressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD.decodeLiteralsBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_sizeof.CStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_CCtx.setParametersUsingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD.execSequenceLast7.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD_stats.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v05.h_ZSTDv05.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.assertEqualCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_XXH.read32.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF.recommendedCOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_COVER.checkTotalCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompressBegin.usingDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compressBlock_btopt2.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF.recommendedDOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_estimateCStreamSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_decompress.c_ZSTD_initDStream_size_t_maxWindowSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD_decompress_generic.simpleArgs.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTDMT.freeCCtxPool.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.findDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.h_ZSTDv02.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v02.h_ZSTDv02_Dctx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD.invalidateRepCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_decompress.c_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_linux_zstd.h_ZSTD.skippableHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_cctx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_compress.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.h_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_resetCCtx.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.c_ZSTDv04.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_compress.c_ZSTD_initCStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v01.c_ZSTDv01.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_ZBUFF.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD_defaultAllocFunction_void_opaque_size_t.size.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_zstd_compress.c_ZSTD.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_internal.h_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_createCDict_const_void_dictBuffer_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1390\\c_facebook_zstd_1390_v04.h_ZSTDv04.isError.txt"}], "buggy_files": [{"filename": "1390.txt", "content": "Looking at this GitHub problem, I need to analyze the issue and identify the relevant files to fix it.\n\n## 1. Identify the wrong behavior\n\nThe problem is that `ZSTD_decompress` fails when called with `dstCapacity=0` and `dst=NULL` in zstd version 1.3.6+, returning \"Destination buffer is too small\" error. In zstd 1.3.5, this same call worked correctly and returned the uncompressed size (0 in the test case).\n\n## 2. Analyze the cause behind the wrong behavior\n\nThe issue stems from a change in parameter validation logic in the `ZSTD_decompress` function between versions 1.3.5 and 1.3.6. The function now incorrectly rejects the case where:\n- `dst` is `NULL` \n- `dstCapacity` is `0`\n- The actual uncompressed size is also `0`\n\nThis should be a valid scenario since when the uncompressed data is empty (0 bytes), a NULL destination pointer with 0 capacity should be acceptable. The function should return the actual uncompressed size (0) rather than throwing a \"buffer too small\" error.\n\nOther compression libraries (GZIP, ZLIB, LZ4, SNAPPY, BROTLI) handle this edge case correctly, and it's a legitimate use case in arrow-cpp when processing empty columns in parquet files.\n\n## 3. Find the most related files\n\nBased on the repository structure and the nature of the problem, the files most likely to contain the fix are:\n\n```\nlib/decompress/zstd/decompress.c\nlib/zstd.h\nlib/decompress/zstd/decompress/internal.h\nlib/common/zstd/internal.h\nlib/legacy/zstd/v07.c\n```\n\nThe main decompression logic would be in `lib/decompress/zstd/decompress.c`, the public API definition in `lib/zstd.h`, and the internal headers would contain supporting definitions. The legacy file `v07.c` might also be relevant if the issue affects backward compatibility with older format versions."}], "repair_results": [{"filename": "lib_common_zstd_internal.h.txt", "content": "Looking at the issue, the problem is that `ZSTD_decompress` fails when called with `dst=NULL` and `dstCapacity=0` in zstd 1.3.6+, but it worked in 1.3.5. The error message is \"Destination buffer is too small\".\n\nThe issue is that when decompressing empty data (0 bytes), the function should allow `dst=NULL` with `dstCapacity=0` as a valid case, similar to how other compression libraries handle it.\n\nHowever, the code file provided (`lib_common_zstd_internal.h`) is just a header file with common definitions and doesn't contain the actual decompression logic. The bug would be in the decompression implementation file (likely `decompress.c` or similar).\n\nSince we only have the header file and the issue describes a runtime behavior change in `ZSTD_decompress`, I need to look for any validation or buffer handling code that might be relevant. But this header file doesn't contain the actual decompression function implementation.\n\nLet me analyze what we have:\n1. The header file contains utility functions like `ZSTD_wildcopy()` and `ZSTD_wildcopy_e()` which copy memory\n2. These functions might be called during decompression\n3. The issue occurs when `dst=NULL` and `dstCapacity=0`\n\nLooking at the `ZSTD_wildcopy` and `ZSTD_wildcopy_e` functions, they don't have any null pointer checks. If these are called with a NULL destination pointer, they would cause issues. However, when the length is 0, they shouldn't be called at all, or should handle the zero-length case.\n\nThe actual bug fix would need to be in the decompression code (not shown here) where it should check if the decompressed size is 0 before attempting to write to the destination buffer. When `dstCapacity=0` and the actual decompressed size is also 0, it should be treated as a success case without attempting any memory operations.\n\nSince the provided file doesn't contain the actual bug (it's just a header with common definitions), I cannot provide a fix for this specific file. The fix would need to be in the decompression implementation file where `ZSTD_decompress` is defined, likely adding a check like:\n\n```c\nif (decompressedSize == 0 && dstCapacity == 0) {\n    return 0;  // Success, nothing to decompress\n}\nif (dst == NULL && dstCapacity > 0) {\n    return ERROR(dstSize_tooSmall);\n}\n```\n\nHowever, since I can only work with the file provided and must provide a fix, let me note that **the file provided does not contain the bug described in the issue**. The bug is in the decompression implementation code, not in this common header file.\n\nIf you can provide the actual decompression implementation file (likely `lib/decompress/zstd_decompress.c` or similar), I can provide the appropriate fix."}, {"filename": "lib_decompress_zstd_decompress.c.txt", "content": "Looking at the issue, the problem is that `ZSTD_decompress()` fails when called with `dst=NULL` and `dstCapacity=0` in zstd 1.3.6+, but it worked in 1.3.5. The issue states that other decompressors can handle zero-length output buffers starting at NULL.\n\nLet me trace through the code to find where the issue occurs:\n\n1. `ZSTD_decompress()` calls `ZSTD_decompressDCtx()`\n2. `ZSTD_decompressDCtx()` calls `ZSTD_decompress_usingDict()`\n3. `ZSTD_decompress_usingDict()` calls `ZSTD_decompressMultiFrame()`\n4. `ZSTD_decompressMultiFrame()` calls `ZSTD_checkContinuity()` and `ZSTD_decompressFrame()`\n\nLooking at `ZSTD_checkContinuity()`:\n\n```c\nstatic void ZSTD_checkContinuity(ZSTD_DCtx* dctx, const void* dst)\n{\n    if (dst != dctx->previousDstEnd) {   /* not contiguous */\n        dctx->dictEnd = dctx->previousDstEnd;\n        dctx->virtualStart = (const char*)dst - ((const char*)(dctx->previousDstEnd) - (const char*)(dctx->prefixStart));\n        dctx->prefixStart = dst;\n        dctx->previousDstEnd = dst;\n    }\n}\n```\n\nThis function is called with `dst` which could be `NULL`. When `dst=NULL` and `dstCapacity=0`, this function will set `dctx->prefixStart = NULL` and `dctx->previousDstEnd = NULL`.\n\nThen in `ZSTD_copyRawBlock()`:\n\n```c\nstatic size_t ZSTD_copyRawBlock(void* dst, size_t dstCapacity,\n                          const void* src, size_t srcSize)\n{\n    if (dst==NULL) return ERROR(dstSize_tooSmall);\n    if (srcSize > dstCapacity) return ERROR(dstSize_tooSmall);\n    memcpy(dst, src, srcSize);\n    return srcSize;\n}\n```\n\nThis function returns an error when `dst==NULL`, even if `srcSize==0` and `dstCapacity==0`. This is the bug! When decompressing an empty input (which results in 0 bytes of output), we should allow `dst=NULL` with `dstCapacity=0`.\n\nThe fix should check if `srcSize==0` before checking if `dst==NULL`:\n\n```javascript\n### lib_decompress_zstd_decompress.c\n<<<<<<< SEARCH\nstatic size_t ZSTD_copyRawBlock(void* dst, size_t dstCapacity,\n                          const void* src, size_t srcSize)\n{\n    if (dst==NULL) return ERROR(dstSize_tooSmall);\n    if (srcSize > dstCapacity) return ERROR(dstSize_tooSmall);\n    memcpy(dst, src, srcSize);\n    return srcSize;\n}\n=======\nstatic size_t ZSTD_copyRawBlock(void* dst, size_t dstCapacity,\n                          const void* src, size_t srcSize)\n{\n    if (srcSize > dstCapacity) return ERROR(dstSize_tooSmall);\n    if (dst==NULL) {\n        if (srcSize > 0) return ERROR(dstSize_tooSmall);\n        return 0;\n    }\n    memcpy(dst, src, srcSize);\n    return srcSize;\n}\n>>>>>>> REPLACE\n```\n\nThis change allows `dst=NULL` when `srcSize==0` (which happens when decompressing empty data), but still returns an error if `dst=NULL` and we actually need to copy data (`srcSize > 0`)."}, {"filename": "lib_legacy_zstd_v07.c.txt", "content": "Looking at the issue, the problem is that in zstd 1.3.6+, calling `ZSTD_decompress` with `dstCapacity=0` and `dst=NULL` fails with \"Destination buffer is too small\" error, but it worked in 1.3.5.\n\nThe issue is in the `HUFv07_decompress` function. Let me trace through the code:\n\n1. When `dstSize == 0`, the function should handle this gracefully\n2. The error occurs in the validation checks at the beginning of `HUFv07_decompress`\n\nLooking at the `HUFv07_decompress` function around line 3466:\n\n```c\nsize_t HUFv07_decompress (void* dst, size_t dstSize, const void* cSrc, size_t cSrcSize)\n{\n    static const decompressionAlgo decompress[2] = { HUFv07_decompress4X2, HUFv07_decompress4X4 };\n\n    /* validation checks */\n    if (dstSize == 0) return ERROR(dstSize_tooSmall);\n    if (cSrcSize > dstSize) return ERROR(corruption_detected);   /* invalid */\n    if (cSrcSize == dstSize) { memcpy(dst, cSrc, dstSize); return dstSize; }   /* not compressed */\n    if (cSrcSize == 1) { memset(dst, *(const BYTE*)cSrc, dstSize); return dstSize; }   /* RLE */\n    ...\n}\n```\n\nThe problem is the first check: `if (dstSize == 0) return ERROR(dstSize_tooSmall);`\n\nWhen decompressing empty data (0 bytes), this is a valid case that should return 0, not an error. The compressed size for 0 bytes of data is 9 bytes (as shown in the issue), and when decompressing with `dstCapacity=0` and `dst=NULL`, it should succeed and return 0.\n\nThe fix is to allow `dstSize == 0` when the actual decompressed size is also 0. We need to check if this is a valid empty decompression case before returning an error.\n\n```javascript\n### lib_legacy_zstd_v07.c\n<<<<<<< SEARCH\nsize_t HUFv07_decompress (void* dst, size_t dstSize, const void* cSrc, size_t cSrcSize)\n{\n    static const decompressionAlgo decompress[2] = { HUFv07_decompress4X2, HUFv07_decompress4X4 };\n\n    /* validation checks */\n    if (dstSize == 0) return ERROR(dstSize_tooSmall);\n    if (cSrcSize > dstSize) return ERROR(corruption_detected);   /* invalid */\n    if (cSrcSize == dstSize) { memcpy(dst, cSrc, dstSize); return dstSize; }   /* not compressed */\n    if (cSrcSize == 1) { memset(dst, *(const BYTE*)cSrc, dstSize); return dstSize; }   /* RLE */\n\n    {   U32 const algoNb = HUFv07_selectDecoder(dstSize, cSrcSize);\n        return decompress[algoNb](dst, dstSize, cSrc, cSrcSize);\n    }\n\n    //return HUFv07_decompress4X2(dst, dstSize, cSrc, cSrcSize);   /* multi-streams single-symbol decoding */\n    //return HUFv07_decompress4X4(dst, dstSize, cSrc, cSrcSize);   /* multi-streams double-symbols decoding */\n}\n=======\nsize_t HUFv07_decompress (void* dst, size_t dstSize, const void* cSrc, size_t cSrcSize)\n{\n    static const decompressionAlgo decompress[2] = { HUFv07_decompress4X2, HUFv07_decompress4X4 };\n\n    /* validation checks */\n    if (cSrcSize > dstSize) return ERROR(corruption_detected);   /* invalid */\n    if (cSrcSize == dstSize) { if (dstSize == 0) return 0; memcpy(dst, cSrc, dstSize); return dstSize; }   /* not compressed */\n    if (cSrcSize == 1) { if (dstSize == 0) return 0; memset(dst, *(const BYTE*)cSrc, dstSize); return dstSize; }   /* RLE */\n    if (dstSize == 0) return ERROR(dstSize_tooSmall);\n\n    {   U32 const algoNb = HUFv07_selectDecoder(dstSize, cSrcSize);\n        return decompress[algoNb](dst, dstSize, cSrc, cSrcSize);\n    }\n\n    //return HUFv07_decompress4X2(dst, dstSize, cSrc, cSrcSize);   /* multi-streams single-symbol decoding */\n    //return HUFv07_decompress4X4(dst, dstSize, cSrc, cSrcSize);   /* multi-streams double-symbols decoder */\n}\n>>>>>>> REPLACE\n```\n\nThe key changes:\n1. Moved the `dstSize == 0` check to after the checks for uncompressed and RLE cases\n2. Added early returns for `dstSize == 0` in the uncompressed and RLE cases to handle empty data correctly\n3. This allows decompression of empty data (0 bytes) to succeed when `dst=NULL` and `dstCapacity=0`"}, {"filename": "lib_zstd.h.txt", "content": "Looking at the issue, the problem is that `ZSTD_decompress()` fails when called with `dst=NULL` and `dstCapacity=0` in zstd 1.3.6+, but it worked in 1.3.5. This is a regression that breaks compatibility with other decompressors that handle zero-length output buffers.\n\nThe issue states that test3 fails:\n```c\nsize_t uncompressed_size = ZSTD_decompress(NULL, 0, compressed, compressed_size);\n```\n\nThis should return 0 (the actual decompressed size) but instead returns an error \"Destination buffer is too small\".\n\nLooking at the header file provided, I can see the function declaration:\n\n```c\nZSTDLIB_API size_t ZSTD_decompress( void* dst, size_t dstCapacity,\n                              const void* src, size_t compressedSize);\n```\n\nThe documentation states:\n> `dstCapacity` is an upper bound of originalSize to regenerate.\n\nThe issue is that the implementation is likely checking if `dst` is NULL and rejecting it, even when the actual decompressed size is 0 bytes. The fix should allow `dst=NULL` when `dstCapacity=0` AND the actual content size is also 0.\n\nHowever, I notice that the file provided is just the header file (`lib_zstd.h`), not the implementation. The bug would be in the implementation file (likely `decompress.c` or similar), which is not provided in the code segments.\n\nSince only the header file is provided and the bug is in the implementation (not the header), I cannot provide a fix for the actual bug. The header file itself doesn't contain the bug - it's just the API declaration.\n\nBut if I had to suggest where the fix should be made based on the issue description, it would be in the implementation of `ZSTD_decompress()` and `ZSTD_decompressDCtx()` functions. The fix would need to:\n\n1. Check if `dstCapacity == 0` and `dst == NULL`\n2. If so, verify that the actual decompressed size is also 0\n3. If the decompressed size is 0, return 0 instead of an error\n4. If the decompressed size is > 0, then return the \"Destination buffer is too small\" error\n\nSince the actual implementation file is not provided in the code segments, I cannot create a SEARCH/REPLACE edit. The header file shown does not contain the bug - the bug is in the C implementation file that implements these functions.\n\nIf you can provide the implementation file (likely `decompress.c` or `zstd_decompress.c`), I can provide the specific fix needed."}]}
