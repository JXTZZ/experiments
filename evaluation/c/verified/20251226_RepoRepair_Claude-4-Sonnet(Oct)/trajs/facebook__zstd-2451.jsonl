{"instance_id": "facebook__zstd-2451", "rag_files": [{"filename": "2451.txt", "content": "repo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compress_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_getDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_builders_benchmarkDictBuilder_benchmark.c.main.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_CCtx.setParametersUsingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.usingDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_adjustCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v05.c_ZSTDv05.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v07.c_ZSTDv07_decompressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_attachDictSizeCutoffs_unsigned_ZSTD_btultra.1.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_COVER.tryParameters.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_estimateCStreamSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_internal.h_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.startNewCompression.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.compressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CCtxParams.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v04.c_ZSTD.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_getCParams.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_trainFromBuffer_unsafe.legacy.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_internal.h_ZSTD.getLowestPrefixIndex.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD_decompress.insertDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_decompress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_fast.c_ZSTD_compressBlock_fast_dictMatchState.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.CDictWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_builders_randomDictBuilder_random.c_ZDICT_trainFromBuffer.random.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_initCStream_usingCDict_const_ZSTD_CDict_cdict_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.dictAndWindowLog.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CCtx_loadDictionary.byReference.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_lazy.c_ZSTD_compressBlock_lazy2.dictMatchState.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_lazy.h_ZSTD_compressBlock_lazy2.dictMatchState.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_builders_randomDictBuilder_main.c_g.defaultMaxDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_COVER.selectDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.continueCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.overflowCorrectIfNeeded.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTDMT.setBufferSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_initCStream.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decodingBufferSize.min.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_estimateDStreamSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_sizeof.CDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_estimateCStreamSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.CStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZBUFF.recommendedDInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_HUF.readCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.initLocalDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_opt.c_ZSTD.fCost.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_sizeof.CDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_builders_benchmarkDictBuilder_benchmark.c_g.defaultMaxDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_estimateCCtxSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD.errorFrameSizeInfo.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_defaultMaxDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.h_ZSTD_decompress_with.dict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.decompressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd.h_zstd_get.params.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_createCDict_advanced_const_void_dict_size_t_dictSize_unsigned_byReference_ZSTD_parameters_params_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v04.h_ZSTDv04.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD_initDDict.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_COVER.dictSelection.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_compressBegin.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v05.c_ZSTDv05.refDictContent.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ddict.c_ZSTD.estimateDDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_sizeof.CStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v06.c_ZSTDv06.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_builders_randomDictBuilder_random.h_ZDICT_trainFromBuffer.random.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_COVER.warnOnSmallCorpus.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF.compressInitDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_resetCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_getUseableDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compressZstdFrame.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.c_ZSTD_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompressLz4Frame.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_estimateCStreamSize.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compressBlock_fast_extDict.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compressBlock.btopt2.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF_compressInit.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v07.c_ZBUFFv07.decompressInitDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF.recommendedCInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD.initDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_fast.h_ZSTD_compressBlock_fast.dictMatchState.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_CCtx.loadDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v05.h_ZSTDv05.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v07.c_ZBUFFv07_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_estimateDDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v06.h_ZSTDv06.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.h_parse.dictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.c_ZSTD.DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v06.c_ZSTDv06.refDictContent.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.selectBlockCompressor.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_inBuffer.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_setDStreamParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_sizeof.localDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CCtx.setParametersUsingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_builders_fastCover_fastCover.c_ZDICT_optimizeTrainFromBuffer.fastCover.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZDICT.finalizeDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v07.c_ZSTDv07.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.compressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD.setDStreamParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compressBlock.fast.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.c_ZSTD_decompress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_frameHeaderSize.min.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v03.c_ZSTD.frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.loadDictionaryContent.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_programs_fileio.c.compressedfilesize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_test.c_zstd_compress_test.open.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.nextInputSizeHint.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_internal.h_LL_defaultNorm_MaxLL.1.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v07.h_ZBUFFv07.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_createCDictForDedicatedDictSearch_const_void_dict_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_opt.h_ZSTD_compressBlock_btopt.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_initCStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_setSrcSizeHint.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_internal.h_ZSTD.invalidateRepCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD.estimateDCtxSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress_block.c_ZSTD.dictionaryIsActive.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_internal.h_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v02.c_ZSTD.blockHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_adjustCParams.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_resetCCtx.byAttachingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD_getFrameHeader.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ddict.h_ZSTD_DDict.dictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v07.c_ZSTDv07_decompress.insertDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v05.c_ZBUFFv05.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v07.c_ML.defaultNormLog.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_huf.h_HUF_compress1X.usingCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.shouldAttachDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.getCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v01.c_ZSTD.frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_internal.h_ZSTD_window.init.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_createCDict_byReference_const_void_dict_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_initDStream_usingDDict_size_t_maxWindowSize_const_ZSTD_DDict_ddict_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.CStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_CCtx_init.compressStream2.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.findDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_compressBegin.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd.h_zstd_reset.cstream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_initCStream_ZSTD_parameters_params_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_attachDictSizeCutoffs_ZSTD_STRATEGY_MAX.1.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZDICT_trainFromBuffer_unsafe.legacy.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD_frameHeaderSize.max.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_HUF.readDTableX2.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_HUF_compress1X.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.getCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.h_create.dictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compressBegin_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v02.c_HUF.decompress4X2.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_CDict.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compressStream2.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_FASTCOVER_ctx.init.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.c_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD_DCtx_loadDictionary.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ddict.c_ZSTD_createDDict_byReference_const_void_dictBuffer_size_t.dictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_internal.h_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_HUF.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_module.c_zstd_init_cstream_const_struct_zstd_parameters_parameters_unsigned_long_long_pledged_src_size_void_workspace_size_t_workspace.size.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_createDDict_advanced_const_void_dict_size_t_dictSize_ZSTD_dictLoadMethod_e_dictLoadMethod_ZSTD_dictContentType_e_dictContentType_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_createCDict_const_void_dict_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.h_ZSTDMT_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_btrfs_zstd.c_zstd_get_btrfs.parameters.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_fast.h_ZSTD_compressBlock.fast.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_initCStream.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_compressContinue.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_getFrameProgression.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.h_ZSTDMT_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_CDict.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_legacy.h_ZSTD.findFrameSizeInfoLegacy.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_internal.h_ZSTD_window.hasExtDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD_DCtx.loadDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_internal.h_ZSTD_compressBegin_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.getCParamRowSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_compressBegin.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.h_ZSTDMT_compress.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_decompress.c_ZSTD.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_estimateCDictSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_resetCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_check_compressionLevel_monotonicIncrease.memoryBudget.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_CStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_opt.c_ZSTD_compressBlock_btopt.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_lazy.h_ZSTD_compressBlock.btlazy2.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_benchMemAdvancedNoAlloc.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_internal.h_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd.h_zstd_init_cstream_const_struct_zstd_parameters_parameters_unsigned_long_long_pledged_src_size_void_workspace_size_t_workspace.size.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF.recommendedDInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_createCDict_advanced_const_void_dictBuffer_size_t_dictSize_unsigned_byReference_ZSTD_parameters_params_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd.h_zstd_decompress.stream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd.h_zstd_compress.stream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.decompressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.getCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZWRAP.initializeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd.h_zstd_frame.parameters.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v02.c_ZSTD.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_initDStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.writeFrameHeader.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD.refDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.isUpdateAuthorized.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_internal.h_ZSTD.frameIdSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_estimateCCtxSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_CCtx_loadDictionary.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.estimateCDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress_internal.h_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.adjustCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_createCDict_const_void_dictBuffer_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_createCResources.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_initCStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD_sizeof.DStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTDMT_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v05.c_HUFv05.decompress1X4.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_createCDict_advanced_const_void_dictBuffer_size_t_dictSize_unsigned_byReference_ZSTD_parameters_params_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_v06.h_ZSTDv06.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CCtx.setPledgedSrcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_initCStream.srcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZDICT_trainFromBuffer.unsafe.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_COVER.dictSelectionError.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_initCDict.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD.adjustCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CCtx_loadDictionary.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ldm.c_ZSTD_ldm.limitTableUpdate.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_estimateCDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_linux_zstd.h_ZSTD.CStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_bench.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_sizeof.CStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd_compress.c_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_decompress.c_ZSTD_sizeof.DDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstdseek_compress.c_ZSTD_seekable.compressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_builders_randomDictBuilder_random.c_RANDOM.checkParameters.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_compress.insertDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CCtx.refCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstdErrorHelp.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD_CStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTDMT_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_ZBUFF_createCCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_srcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_CCtx.loadDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_zstd.h_zstd.parameters.txt\nrepo_document_file\\c\\facebook\\zstd\\2451\\c_facebook_zstd_2451_compress.c_ZSTD.getCParamsFromCCtxParams.txt"}], "buggy_files": [{"filename": "2451.txt", "content": "Looking at the GitHub problem description, I need to identify the issue and find the relevant files.\n\n## 1. Wrong Behavior Identified\n\nThe streaming compression API with dictionary compression has severe regressions between versions 1.4.5 and 1.4.7:\n- A 120kB file with 20kB dictionary compressed from 24,177 bytes (v1.4.5) to 76,455 bytes (v1.4.8) when using streaming API\n- This causes datasets to compress poorly (1GB instead of ~100MB)\n- The issue occurs specifically with streaming API, not with `ZSTD_compress_usingCDict` API\n\n## 2. Cause Analysis\n\nThe root cause is in the `ZSTD_adjustCParams_internal` function in `lib/compress/zstd_compress.c`:\n\n1. When using streaming API, `srcSize` is set to `ZSTD_CONTENTSIZE_UNKNOWN`\n2. This triggers the condition `if (dictSize && srcSize == ZSTD_CONTENTSIZE_UNKNOWN)` which sets `srcSize = minSrcSize` (513 bytes)\n3. For `ZSTD_cpm_attachDict` mode, `dictSize` is set to 0\n4. These small values cause the `windowSize` to be reduced to 1024 bytes\n5. This forces the 120kB file to be compressed in tiny 1024-byte segments, destroying compression efficiency\n\nThe problem was introduced by two specific commits:\n- After commit 48ef15fb47395dcb57900cd7c247f2dd5af2d5cd: size increased from 23,000 to 28,904 bytes\n- After commit d5c688e8ae8959e1740fe3833251c88fca3e5e10: size increased to 76,455 bytes\n\n## 3. Most Related Files\n\nBased on the repository information provided, the most relevant file is:\n\n```\nlib/compress/zstd/compress.c\n```\n\nNote: The repository information shows `lib/compress/zstd/compress.c` as \"None\" for content, but based on the GitHub issue description, the actual problematic code is in `lib/compress/zstd_compress.c` (specifically the `ZSTD_adjustCParams_internal` function around lines 1191-1201). However, since that exact file path is not listed in the repository information provided, I can only identify the closest match from the available files.\n\nThe issue is specifically in the compression parameter adjustment logic that handles dictionary size and source size estimation for streaming compression scenarios."}], "repair_results": [{"filename": "lib_compress_zstd_compress.c.txt", "content": "Looking at the issue, I need to understand the problem:\n\n1. When using the streaming compression API with a dictionary, there are regressions between 1.4.5 and 1.4.7\n2. The issue is in the `ZSTD_adjustCParams_internal` function\n3. When `srcSize == ZSTD_CONTENTSIZE_UNKNOWN` and a dictionary is present, the code sets `srcSize = minSrcSize` (513 bytes)\n4. For `ZSTD_cpm_attachDict` mode, it sets `dictSize = 0`\n5. This causes the window size to be calculated incorrectly (goes down to 1024 bytes), which means the file is compressed in tiny 1024 byte segments\n\nThe problem is in this section of code:\n\n```c\nif (dictSize && srcSize == ZSTD_CONTENTSIZE_UNKNOWN)\n    srcSize = minSrcSize;\n\nswitch (mode) {\ncase ZSTD_cpm_noAttachDict:\ncase ZSTD_cpm_unknown:\ncase ZSTD_cpm_createCDict:\n    break;\ncase ZSTD_cpm_attachDict:\n    dictSize = 0;\n    break;\n```\n\nThe issue states that:\n1. Setting `srcSize = minSrcSize` (513 bytes) when the actual size is unknown causes the window to shrink\n2. Setting `dictSize = 0` in `ZSTD_cpm_attachDict` mode prevents the dictionary size from being considered for window sizing\n\nBased on the issue description and the suggested patch, the fixes needed are:\n1. When `srcSize == ZSTD_CONTENTSIZE_UNKNOWN` and there's a dictionary, don't artificially constrain it to `minSrcSize`. Instead, use a larger value or leave it unknown.\n2. Don't set `dictSize = 0` in `ZSTD_cpm_attachDict` mode when calculating window sizes.\n\nLet me create the fix:\n\n```c\n###lib_compress_zstd_compress.c\n<<<<<<< SEARCH\nstatic ZSTD_compressionParameters\nZSTD_adjustCParams_internal(ZSTD_compressionParameters cPar,\n                            unsigned long long srcSize,\n                            size_t dictSize,\n                            ZSTD_cParamMode_e mode)\n{\n    const U64 minSrcSize = 513; /* (1<<9) + 1 */\n    const U64 maxWindowResize = 1ULL << (ZSTD_WINDOWLOG_MAX-1);\n    assert(ZSTD_checkCParams(cPar)==0);\n\n    if (dictSize && srcSize == ZSTD_CONTENTSIZE_UNKNOWN)\n        srcSize = minSrcSize;\n\n    switch (mode) {\n    case ZSTD_cpm_noAttachDict:\n    case ZSTD_cpm_unknown:\n    case ZSTD_cpm_createCDict:\n        break;\n    case ZSTD_cpm_attachDict:\n        dictSize = 0;\n        break;\n    default:\n        assert(0);\n        break;\n    }\n\n    /* resize windowLog if input is small enough, to use less memory */\n    if ( (srcSize < maxWindowResize)\n      && (dictSize < maxWindowResize) )  {\n        U32 const tSize = (U32)(srcSize + dictSize);\n        static U32 const hashSizeMin = 1 << ZSTD_HASHLOG_MIN;\n        U32 const srcLog = (tSize < hashSizeMin) ? ZSTD_HASHLOG_MIN :\n                            ZSTD_highbit32(tSize-1) + 1;\n        if (cPar.windowLog > srcLog) cPar.windowLog = srcLog;\n    }\n=======\nstatic ZSTD_compressionParameters\nZSTD_adjustCParams_internal(ZSTD_compressionParameters cPar,\n                            unsigned long long srcSize,\n                            size_t dictSize,\n                            ZSTD_cParamMode_e mode)\n{\n    const U64 minSrcSize = 513; /* (1<<9) + 1 */\n    const U64 maxWindowResize = 1ULL << (ZSTD_WINDOWLOG_MAX-1);\n    assert(ZSTD_checkCParams(cPar)==0);\n\n    switch (mode) {\n    case ZSTD_cpm_noAttachDict:\n    case ZSTD_cpm_unknown:\n    case ZSTD_cpm_createCDict:\n        break;\n    case ZSTD_cpm_attachDict:\n        /* For attach dict mode, we use the dictionary but don't include its size \n         * in some calculations since it's already loaded in a separate structure.\n         * However, we should not zero it out for window size calculations. */\n        break;\n    default:\n        assert(0);\n        break;\n    }\n\n    /* resize windowLog if input is small enough, to use less memory */\n    if ( (srcSize < maxWindowResize)\n      && (dictSize < maxWindowResize) )  {\n        U32 const tSize = (U32)(srcSize + dictSize);\n        static U32 const hashSizeMin = 1 << ZSTD_HASHLOG_MIN;\n        U32 const srcLog = (tSize < hashSizeMin) ? ZSTD_HASHLOG_MIN :\n                            ZSTD_highbit32(tSize-1) + 1;\n        if (cPar.windowLog > srcLog) cPar.windowLog = srcLog;\n    }\n>>>>>>> REPLACE\n```"}]}
