{"instance_id": "facebook__zstd-1008", "rag_files": [{"filename": "1008.txt", "content": "repo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_createCDict_byReference_const_void_dictBuffer_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_seekable.h_ZSTD_seekable.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_btrfs_zstd.c_zstd_get_btrfs.parameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_createCCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_internal.h_LL.defaultNormLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.continueCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v05.c_FSEv05_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v04.h_ZBUFFv04.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_estimateCStreamSize.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_CCtx_loadDictionary.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_createCDict_const_void_dict_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress_internal.h_ZSTD.getCParamsFromCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v01.c_ZSTDv01.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ldm.c_ZSTD_ldm.initializeParameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_DCtx.loadDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v05.c_ZSTDv05.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.c_ZSTD_sizeof.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_internal.h_ZSTD_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_zstd_internal.h_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_adjustCParams.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_estimateCCtxSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_initCDict.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_initCDict_const_void_dict_size_t_dictSize_ZSTD_parameters_params_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_createCCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_initCStream.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_initCDict_const_void_dictBuffer_size_t_dictSize_ZSTD_parameters_params_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.estimateCStreamSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD.freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_sizeof.CDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTDMT_initCStream.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v05.h_ZSTDv05.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compressCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_createCDict_const_void_dictBuffer_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_initCCtx_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.adjustCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZBUFF.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTDMT_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_compress_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress_test.c.state.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.c_ZSTDv07.blockHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.c_ZSTDv06.refDictContent.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_createCDict_advanced_const_void_dictBuffer_size_t_dictSize_unsigned_byReference_ZSTD_parameters_params_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_seekable.h_ZSTD_seekable.getFrameCompressedOffset.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_initStaticCCtx_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_CCtx_loadDictionary.byReference.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstdseek_decompress.c_ZSTD_seekable.initBuff.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.c_ZSTDv06.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_CCtxParam.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZWRAP.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_compressBegin.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_decompress.h_parse.dictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_sizeof.CDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_initStaticCStream_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_zstd_internal.h_ZSTD.freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_frameHeaderSize.max.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_sizeof.matchState.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v02.c_ZSTDv02.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_setSeparateFiles.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_getDictID.fromDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_errors.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_compressBlock.greedy.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD.compressCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZBUFF.compressInitDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.loadDictionaryContent.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v04.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v05.c_ZBUFFv05.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_decompress.c_ZSTD.refDictContent.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTDMT.writeLastEmptyBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_internal.h_ZSTD.invalidateRepCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD.CCtxWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_CCtx.setParametersUsingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_CDict.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_internal.h_ZSTD_compressBegin_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_createCCtxParams_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.c_ZSTDv06_decompressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_sizeof.DDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_DCtx_loadDictionary.byReference.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.c_HUFv06.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD.loadDictionaryContent.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v04.h_ZSTDv04.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v05.h_ZSTDv05.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_programs_fileio.c.result.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_getDictID.fromDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_estimateCCtxSize.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_estimateDDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.h_ZSTDv06.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_XXH64_state.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.c_ZSTDv07.freeDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_createDDict_byReference_const_void_dictBuffer_size_t.dictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v02.c_ZSTD.blockHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_internal.h_ZSTD.defaultFreeFunction.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_DCtx_refPrefix.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_decompress.c_SEQ_OFFSET_DEFAULT_DIST.29.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_internal.h_ZSTD.frameIdSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_g_selectivity.default.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.h_ZSTDv06_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_resetCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_zstd_internal.h_ZSTD.freeDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.c_ZSTD_createDDict_advanced_const_void_dict_size_t_dictSize_ZSTD_dictLoadMethod_e_dictLoadMethod_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_seekable.h_ZSTD_seekable.getFrameDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.h_ZSTDv07.freeDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.c_FSEv06.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v06.h_ZSTDv06.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_decompress.c_ZSTD.DStreamWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD.CDictWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.c_FSEv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_compressBegin.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_CStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_estimateCDictSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress_internal.h_ZSTD_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.c_ZSTD_initStaticDDict_void_workspace_size_t_workspaceSize_const_void_dict_size_t_dictSize_unsigned.byReference.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.c_ZSTD_initDStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_CCtx.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_estimateCDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v01.c_ZSTDv01.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_seekable.h_ZSTD_seekable.freeFrameLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_compressBegin.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_freeDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZBUFF.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v03.c_ZSTD.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.resetCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.c_ZSTDv07_did_fieldSize.4.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTDMT_getCCtx_ZSTDMT_CCtxPool.pool.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.usingDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_freeCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_cctx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_compressBegin.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.c_ZSTD_initDDict.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_initDStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.c_HUFv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_trainFromBuffer_unsafe.legacy.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.h_ZSTDMT_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_internal.h_ZSTD.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZBUFF.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_createCDict_advanced_const_void_dictBuffer_size_t_dictSize_unsigned_byReference_ZSTD_parameters_params_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_programs_fileio.c.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZWRAPC.finishWithError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_zstd_internal.h_ML.defaultNormLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_check_compressionLevel_monotonicIncrease.memoryBudget.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_createCResources.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_createCCtxParams.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v04.c_ZSTDv04.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.c_ZSTDv07_createDDict_advanced_const_void_dict_size_t_dictSize_ZSTDv07_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_CCtx_loadDictionary.byReference.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZBUFF.decompressInitDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZDICT_trainFromBuffer.legacy.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v04.h_ZSTDv04.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_resetCCtx.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_CCtx.loadDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_CCtx.loadDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_createCDict_byReference_const_void_dict_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_zstd_internal.h_ZSTD.invalidateRepCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD_initDDict_const_void_dictBuffer_size_t_dictSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v07.c_ZSTDv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_strwinerror_error_DWORD.error.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v03.c_ZSTDv03.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_resetCCtx.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_linux_zstd.h_ZSTD.CDictWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_ZBUFF_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_zstd_internal.h_ZSTD.freeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_decompress.c_ZSTD.checkContinuity.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTDMT.freeCCtxPool.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_defaultDictCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress_internal.h_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTDMT_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_compress.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.c_ZSTD_loadEntropy.inDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_freeErr.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_decompress.c_ZSTD_decompress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_estimateCStreamSize.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_DCtx.refDDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v04.c_ZSTDv04.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_decompress.c_ZSTD.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD.freeCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress_test.c_zstd_compress_test.open.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_v02.h_ZSTDv02_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_copyCCtx.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_CCtx_loadDictionary.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_decompress.c_ZSTD_initDCtx.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_seekable.h_ZSTD_seekable.offsetToFrameIndex.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_compress.c_ZSTD_estimateCStreamSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1008\\c_facebook_zstd_1008_zstd_compress.c_ZSTD.compressCCtx.txt"}], "buggy_files": [{"filename": "1008.txt", "content": "Looking at the GitHub problem description, I need to identify the issue and find the relevant files.\n\n## 1. Identify the wrong behavior\n\nThe problem describes:\n- Crashes occur after calling `ZSTD_createCDict` with compression level >= 14\n- The crash happens when calling `ZSTD_compress_generic` \n- Specific error: heap-buffer-overflow in `ZSTD_copyCCtx_internal` at `zstd_compress.c:1043`\n- This was an issue in release 1.3.3 but appears to be fixed in the dev branch\n\n## 2. Analyze the cause\n\nThe issue is a heap buffer overflow in the `ZSTD_copyCCtx_internal` function when:\n- A compression dictionary (CDict) is created with high compression levels (>=14)\n- The compression context is being copied/initialized for use with that dictionary\n- There's likely a buffer size miscalculation or improper memory allocation when handling high compression levels with dictionaries\n\n## 3. Find the most related files\n\nBased on the error location (`zstd_compress.c:1043`) and the functions involved (`ZSTD_createCDict`, `ZSTD_compress_generic`, `ZSTD_copyCCtx_internal`), the most relevant files are:\n\n```\nlib/compress/zstd/compress.c\nlib/compress/zstd/compress/internal.h\nlib/zstd.h\nlib/common/zstd/internal.h\nlib/compress/zstdmt/compress.c\n```\n\nThe main compression implementation file (`lib/compress/zstd/compress.c`) is most critical since it contains the `ZSTD_copyCCtx_internal` function where the crash occurs, along with the dictionary handling and compression context management code."}], "repair_results": [{"filename": "lib_common_zstd_internal.h.txt", "content": "Looking at the issue, the problem is:\n\n1. A heap-buffer-overflow crash occurs in `ZSTD_copyCCtx_internal` at `zstd_compress.c:1043` when using `ZSTD_createCDict` with compression level >= 14 in version 1.3.3\n2. The issue mentions it seems fixed in the dev branch\n\nThe issue is in the file shown (`lib_common_zstd_internal.h`), but the actual bug is likely in `zstd_compress.c`. However, since we only have access to this header file, let me analyze what could be wrong.\n\nLooking at the code, I notice the `ZSTD_invalidateRepCodes` function declaration has a comment that says:\n```c\n/* ZSTD_invalidateRepCodes() :\n * ensures next compression will not use repcodes from previous block.\n * Note : only works with regular variant;\n *        do not use with extDict variant ! */\n```\n\nThe issue mentions crashes when calling `ZSTD_compress_generic` after `ZSTD_createCDict` with high compression levels. This suggests a problem with context copying when dictionaries are involved.\n\nHowever, examining the provided code more carefully, I don't see an obvious bug in this header file itself. The issue is likely in the implementation file (`zstd_compress.c`) which is not provided.\n\nBut wait - looking at the constants and the issue description about \"heap-buffer-overflow in ZSTD_copyCCtx_internal\", this could be related to buffer size calculations. Let me check the constants...\n\nActually, upon closer inspection of the header file provided, I don't see any obvious bugs that would cause the described issue. The bug is most likely in `zstd_compress.c:1043` in the `ZSTD_copyCCtx_internal` function, which is not shown in the provided code.\n\nSince the issue states \"Seems fixed in dev branch\" and we're only given this header file, and there's no obvious bug in the header file itself that would cause a heap-buffer-overflow in `ZSTD_copyCCtx_internal`, I cannot provide a meaningful fix based solely on the code provided.\n\nThe issue is in the implementation file (`zstd_compress.c`), not in this header file (`lib_common_zstd_internal.h`). Without seeing the actual `ZSTD_copyCCtx_internal` function at line 1043 of `zstd_compress.c`, I cannot generate the appropriate fix.\n\nIf you could provide the `zstd_compress.c` file, particularly around line 1043 where `ZSTD_copyCCtx_internal` is implemented, I would be able to identify and fix the heap-buffer-overflow bug."}, {"filename": "lib_compress_zstdmt_compress.c.txt", "content": "Looking at the issue, the problem is a heap-buffer-overflow in `ZSTD_copyCCtx_internal` at `zstd_compress.c:1043` when using `ZSTD_createCDict` with compression level >= 14. The issue mentions it occurs after calling `ZSTD_createCDict` and then `ZSTD_compress_generic`.\n\nThe issue is related to how the CDict is used in multi-threaded compression. When examining the code, I can see that in the `ZSTDMT_compressionJob` function, there's a path where a CDict is used with `ZSTD_compressBegin_advanced_internal`:\n\n```c\nif (job->cdict) {\n    size_t const initError = ZSTD_compressBegin_advanced_internal(cctx, NULL, 0, ZSTD_dm_auto, job->cdict, job->params, job->fullFrameSize);\n    assert(job->firstJob);  /* only allowed for first job */\n    if (ZSTD_isError(initError)) { job->cSize = initError; goto _endJob; }\n}\n```\n\nThe problem is that when a CDict is used, the `job->params` are passed directly. However, these params might contain settings (like compression level >= 14) that are incompatible with how the CDict was created or how the context should be initialized when using a CDict.\n\nLooking at the `ZSTDMT_compress_advanced_internal` function, I can see that it creates `jobParams` using `ZSTDMT_initJobCCtxParams(params)`, which sets `nbThreads` to 0. However, in the streaming API path through `ZSTDMT_compressionJob`, the `job->params` might not have been properly sanitized.\n\nThe fix is to ensure that when using a CDict in the compression job, we use properly initialized job parameters that are compatible with CDict usage. The `ZSTDMT_initJobCCtxParams` function already does this sanitization by zeroing out `nbThreads` and keeping only the relevant compression parameters.\n\n```javascript\n### lib_compress_zstdmt_compress.c\n<<<<<<< SEARCH\n    /* init */\n    if (job->cdict) {\n        size_t const initError = ZSTD_compressBegin_advanced_internal(cctx, NULL, 0, ZSTD_dm_auto, job->cdict, job->params, job->fullFrameSize);\n        assert(job->firstJob);  /* only allowed for first job */\n        if (ZSTD_isError(initError)) { job->cSize = initError; goto _endJob; }\n    } else {  /* srcStart points at reloaded section */\n=======\n    /* init */\n    if (job->cdict) {\n        ZSTD_CCtx_params jobParams = ZSTDMT_initJobCCtxParams(job->params);\n        size_t const initError = ZSTD_compressBegin_advanced_internal(cctx, NULL, 0, ZSTD_dm_auto, job->cdict, jobParams, job->fullFrameSize);\n        assert(job->firstJob);  /* only allowed for first job */\n        if (ZSTD_isError(initError)) { job->cSize = initError; goto _endJob; }\n    } else {  /* srcStart points at reloaded section */\n>>>>>>> REPLACE\n```\n\nThis fix ensures that when a CDict is used in a compression job, the parameters are properly initialized through `ZSTDMT_initJobCCtxParams`, which creates a clean set of job parameters with `nbThreads` set to 0 and only the relevant compression parameters copied. This prevents the heap-buffer-overflow that occurs when incompatible parameters (particularly from high compression levels >= 14) are passed directly to `ZSTD_compressBegin_advanced_internal` when using a CDict."}, {"filename": "lib_compress_zstd_compress.c.txt", "content": "Looking at the issue, the problem is a heap-buffer-overflow in `ZSTD_copyCCtx_internal` at line 1043 when using `ZSTD_createCDict` with compression level >= 14. The issue mentions it's fixed in the dev branch.\n\nLet me analyze the `ZSTD_copyCCtx_internal` function. The issue is that when copying tables, the code calculates `tableSpace` based on `srcCCtx->appliedParams.cParams` but should be using the destination context's parameters after they've been set.\n\nLooking at the code around line 1043 (in the `ZSTD_copyCCtx_internal` function), I can see the problem:\n\n```c\n/* copy tables */\n{   size_t const chainSize = (srcCCtx->appliedParams.cParams.strategy == ZSTD_fast) ? 0 : ((size_t)1 << srcCCtx->appliedParams.cParams.chainLog);\n    size_t const hSize =  (size_t)1 << srcCCtx->appliedParams.cParams.hashLog;\n    size_t const h3Size = (size_t)1 << srcCCtx->blockState.matchState.hashLog3;\n    size_t const tableSpace = (chainSize + hSize + h3Size) * sizeof(U32);\n```\n\nThe issue is that it's using `srcCCtx->appliedParams.cParams` to calculate sizes, but after `ZSTD_resetCCtx_internal` is called, the `dstCCtx` may have different parameters. The copy should use the destination's parameters after reset.\n\nHere's the fix:\n\n```javascript\n### lib_compress_zstd_compress.c\n<<<<<<< SEARCH\n/*! ZSTD_copyCCtx_internal() :\n *  Duplicate an existing context `srcCCtx` into another one `dstCCtx`.\n *  Only works during stage ZSTDcs_init (i.e. after creation, but before first call to ZSTD_compressContinue()).\n *  The \"context\", in this case, refers to the hash and chain tables,\n *  entropy tables, and dictionary references.\n * `windowLog` value is enforced if != 0, otherwise value is copied from srcCCtx.\n * @return : 0, or an error code */\nstatic size_t ZSTD_copyCCtx_internal(ZSTD_CCtx* dstCCtx,\n                            const ZSTD_CCtx* srcCCtx,\n                            unsigned windowLog,\n                            ZSTD_frameParameters fParams,\n                            U64 pledgedSrcSize,\n                            ZSTD_buffered_policy_e zbuff)\n{\n    DEBUGLOG(5, \"ZSTD_copyCCtx_internal\");\n    if (srcCCtx->stage!=ZSTDcs_init) return ERROR(stage_wrong);\n\n    memcpy(&dstCCtx->customMem, &srcCCtx->customMem, sizeof(ZSTD_customMem));\n    {   ZSTD_CCtx_params params = dstCCtx->requestedParams;\n        /* Copy only compression parameters related to tables. */\n        params.cParams = srcCCtx->appliedParams.cParams;\n        if (windowLog) params.cParams.windowLog = windowLog;\n        params.fParams = fParams;\n        ZSTD_resetCCtx_internal(dstCCtx, params, pledgedSrcSize,\n                                ZSTDcrp_noMemset, zbuff);\n    }\n\n    /* copy tables */\n    {   size_t const chainSize = (srcCCtx->appliedParams.cParams.strategy == ZSTD_fast) ? 0 : ((size_t)1 << srcCCtx->appliedParams.cParams.chainLog);\n        size_t const hSize =  (size_t)1 << srcCCtx->appliedParams.cParams.hashLog;\n        size_t const h3Size = (size_t)1 << srcCCtx->blockState.matchState.hashLog3;\n        size_t const tableSpace = (chainSize + hSize + h3Size) * sizeof(U32);\n        assert((U32*)dstCCtx->blockState.matchState.chainTable == (U32*)dstCCtx->blockState.matchState.hashTable + hSize);  /* chainTable must follow hashTable */\n        assert((U32*)dstCCtx->blockState.matchState.hashTable3 == (U32*)dstCCtx->blockState.matchState.chainTable + chainSize);\n        memcpy(dstCCtx->blockState.matchState.hashTable, srcCCtx->blockState.matchState.hashTable, tableSpace);   /* presumes all tables follow each other */\n    }\n=======\n/*! ZSTD_copyCCtx_internal() :\n *  Duplicate an existing context `srcCCtx` into another one `dstCCtx`.\n *  Only works during stage ZSTDcs_init (i.e. after creation, but before first call to ZSTD_compressContinue()).\n *  The \"context\", in this case, refers to the hash and chain tables,\n *  entropy tables, and dictionary references.\n * `windowLog` value is enforced if != 0, otherwise value is copied from srcCCtx.\n * @return : 0, or an error code */\nstatic size_t ZSTD_copyCCtx_internal(ZSTD_CCtx* dstCCtx,\n                            const ZSTD_CCtx* srcCCtx,\n                            unsigned windowLog,\n                            ZSTD_frameParameters fParams,\n                            U64 pledgedSrcSize,\n                            ZSTD_buffered_policy_e zbuff)\n{\n    DEBUGLOG(5, \"ZSTD_copyCCtx_internal\");\n    if (srcCCtx->stage!=ZSTDcs_init) return ERROR(stage_wrong);\n\n    memcpy(&dstCCtx->customMem, &srcCCtx->customMem, sizeof(ZSTD_customMem));\n    {   ZSTD_CCtx_params params = dstCCtx->requestedParams;\n        /* Copy only compression parameters related to tables. */\n        params.cParams = srcCCtx->appliedParams.cParams;\n        if (windowLog) params.cParams.windowLog = windowLog;\n        params.fParams = fParams;\n        ZSTD_resetCCtx_internal(dstCCtx, params, pledgedSrcSize,\n                                ZSTDcrp_noMemset, zbuff);\n    }\n\n    /* copy tables */\n    {   size_t const chainSize = (dstCCtx->appliedParams.cParams.strategy == ZSTD_fast) ? 0 : ((size_t)1 << dstCCtx->appliedParams.cParams.chainLog);\n        size_t const hSize =  (size_t)1 << dstCCtx->appliedParams.cParams.hashLog;\n        size_t const h3Size = (size_t)1 << dstCCtx->blockState.matchState.hashLog3;\n        size_t const tableSpace = (chainSize + hSize + h3Size) * sizeof(U32);\n        assert((U32*)dstCCtx->blockState.matchState.chainTable == (U32*)dstCCtx->blockState.matchState.hashTable + hSize);  /* chainTable must follow hashTable */\n        assert((U32*)dstCCtx->blockState.matchState.hashTable3 == (U32*)dstCCtx->blockState.matchState.chainTable + chainSize);\n        memcpy(dstCCtx->blockState.matchState.hashTable, srcCCtx->blockState.matchState.hashTable, tableSpace);   /* presumes all tables follow each other */\n    }\n>>>>>>> REPLACE\n```\n\nThe fix changes the table size calculations to use `dstCCtx->appliedParams.cParams` instead of `srcCCtx->appliedParams.cParams`. This ensures that after `ZSTD_resetCCtx_internal` has potentially adjusted the parameters (especially for high compression levels), we use the correct sizes for the destination context's allocated tables when copying data."}, {"filename": "lib_zstd.h.txt", "content": "Looking at the issue, the user reports:\n1. Crashes after calling `ZSTD_createCDict` with compression level >= 14\n2. The crash occurs when calling `ZSTD_compress_generic` (heap-buffer-overflow in `ZSTD_copyCCtx_internal zstd_compress.c:1043`)\n3. This seems to be fixed in the dev branch\n\nThe issue is in the header file, but the actual bug would be in the implementation. However, since we only have the header file to work with, let me analyze what could be wrong.\n\nLooking at the `ZSTD_createCDict` function:\n```c\nZSTDLIB_API ZSTD_CDict* ZSTD_createCDict(const void* dictBuffer, size_t dictSize,\n                                         int compressionLevel);\n```\n\nThe problem is likely related to memory allocation or buffer sizing when using high compression levels (>= 14) with dictionaries. The issue mentions it's fixed in dev, which suggests there was a bug in how the CDict was being created or how memory was being allocated for higher compression levels.\n\nSince the crash happens in `ZSTD_copyCCtx_internal` when using `ZSTD_compress_generic`, this suggests that when a CDict is created with high compression levels, the internal structures aren't properly sized, leading to a buffer overflow when the context is copied or used.\n\nHowever, looking at just the header file provided, I cannot see an obvious bug in the API declarations themselves. The issue is likely in the implementation file (`zstd_compress.c`), not in the header file.\n\nBut wait - let me look more carefully at the advanced API section. I notice there are estimation functions that might be relevant:\n\n```c\nZSTDLIB_API size_t ZSTD_estimateCDictSize(size_t dictSize, int compressionLevel);\nZSTDLIB_API size_t ZSTD_estimateCDictSize_advanced(size_t dictSize, ZSTD_compressionParameters cParams, ZSTD_dictLoadMethod_e dictLoadMethod);\n```\n\nThe issue might be that `ZSTD_estimateCDictSize` doesn't properly account for the memory requirements of compression levels >= 14, leading to insufficient memory allocation.\n\nHowever, since this is a header file and the actual bug would be in the implementation, and the issue states it's \"fixed in dev branch\", I cannot make a meaningful fix to this header file alone. The header file API declarations appear correct.\n\nGiven that I can only see the header file and not the implementation, and the issue explicitly states the crash occurs in `zstd_compress.c:1043` (which is not provided), I cannot provide a fix for this specific issue based solely on the header file.\n\nThe bug is in the implementation code, not in the API declarations shown in this header file."}]}
