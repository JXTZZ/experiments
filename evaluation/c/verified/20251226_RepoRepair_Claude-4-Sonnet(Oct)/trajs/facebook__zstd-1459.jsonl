{"instance_id": "facebook__zstd-1459", "rag_files": [{"filename": "1459.txt", "content": "repo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTDMT.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_harness.c_write.file.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_pthread.join.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTDMT.tryGetInputRange.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_loadFiles.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v03.c_ZSTD.decodeSeqHeaders.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompressDstFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_zstdcli.c.main.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress_internal.h_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compressFilename.dstFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v06.c_ZSTDv06.execSequence.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.c_ZSTDv07.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_legacy.h_ZSTD.freeLegacyStreamContext.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v05.c_ZSTDv05.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_fileio.c.sizeCheck.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_ZWRAPC.finishWithErrorMsg.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_internal.h_ZSTD.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.h_ZSTDMT.flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_FileSystem.h_anonymous.function.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v06.h_ZSTDv06.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.noCompressLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_HUF.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_createCStream.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.storeLastLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_fse.h_FSE.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_setOverlapLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.c_ZSTDv07.execSequence.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.makeParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_fse_compress.c_FSE.writeNCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTDMT.flushProduced.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_comp.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_compressStream2.simpleArgs.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.equivalentParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.h_ZBUFFv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress_test.c_zstd_compress_test.release.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_Options.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_createFileCompressionResources.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v06.c_ZSTDv06.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zlibWrapper_gzlib.c.gzseek64.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_anonymous.function.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTDMT_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_private.h_ERR.getErrorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstdseek_compress.c_ZSTD_seekable.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_linux_zstd.h_ZSTD.resetDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_fileio.c.outBuff.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress_internal.h_ZSTD_window.needOverflowCorrection.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.c_ZSTDv07.copyRawBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_r.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v03.c_ERR.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_FSE.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTDMT.flushNextJob.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_common.c_ZSTD_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_opt.h_ZSTD.readMINMATCH.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_error.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_saveDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_seekable.h_ZSTD_seekable.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_ZWRAPD.finishWithErrorMsg.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_isRegularFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.buildCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_builders_randomDictBuilder_io.c.saveDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_fillBuffer.fromHandle.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress_block.c_ZSTD.copy4.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_zstdcli.c.printVersion.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.c_ZBUFFv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_prepareFileList.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress.c_ZSTD.execSequenceLong.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v03.c_ZSTDv03.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD_initCStream_usingCDict_const_ZSTD_CDict_cdict_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_seekable.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_decompress.c_ZSTD.freeDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v05.c_HUFv05_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_matching_main.c.main.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_lazy.h_ZSTD.preserveUnsortedMark.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress_internal.h_ZSTD_window.correctOverflow.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_ZWRAPD.finishWithError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.setCCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_isDirectory.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress.c_ZSTD.execSequence.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_determineDstName_const_char.srcFileName.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_CCtx.refPrefix.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compressFilename.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress.c_ZSTD.copyRawBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_setSeparateFiles.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_createDictBuffer.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v01.c_HUF_decompress.usingDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_common.c_FSE_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTDMT_flushStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v01.c_ZSTD.copyUncompressedBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_decompress.c_ZSTD.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.toFlushNow.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_linux_zstd.h_ZSTD_initDStream_size_t_maxWindowSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress_test.c.output.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD_initCStream_ZSTD_parameters_params_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v03.c_ZSTD.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.h_ZSTDMT.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_zstdcli.c.badusage.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v05.c_ZBUFFv05_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_initCStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_internal.h_ZSTD.invalidateRepCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_HUF.selectDecoder.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD_resetCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_zstdcli.c.exeNameMatch.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_COVER.checkParameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.noCompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress_internal.h_ZSTD.referenceExternalSequences.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_HUF_decompress4X.usingDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_setDStreamParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_openDstFile_const_char.dstFileName.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v04.c_ZBUFFv04_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_getFileStat.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_overlapLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_matching_main.c.compare.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress.c_HUF.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_setSparseWrite.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_HUF.readCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_CCtxParam.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.writeFrameHeader.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_CCtxParams.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_errors.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_builders_randomDictBuilder_io.h.saveDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_private.h_ERR_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_sparseFileSupport.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_overwriteMode.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v06.c_HUFv06_decompress4X2.usingDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_linux_zstd.h_ZSTD_decompressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v02.c_ZSTD.wildcopy.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZBUFF.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.c_ZSTDv07.buildSeqTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_freeFileCompressionResources.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_linux_zstd.h_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_help.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.c_HUFv07_decompress4X.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.assertEqualCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v04.c_ZSTD.checkContinuity.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v04.c_ZSTDv04.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress_block.c_ZSTD.execSequenceLong.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_listFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_private.h_ERR.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_outputThread_void.arg.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_matching_main.c.verify.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_lazy.c_ZSTD_insertAndFindFirstIndex.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_linux_zstd.h_ZSTD.flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_fileio.c.addHandler.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_decompress.c_ZSTD.execSequence.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v06.c_FSEv06_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_getFileSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v02.c_ERR_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v07.c_HUFv07_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_decompress.c_ZSTD_createDStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTDMT_serialState.ensureFinished.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD_compress_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_resetDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_openSrcFile_const_char.srcFileName.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_programs_fileio.c.getFileInfo.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstdseek_decompress.c_ZSTD_seekable_read.FILE.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress.c_ZSTD.freeDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_isLink.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_ZSTD.isUpdateAuthorized.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_isRegFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_ZBUFF.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_linux_zstd.h_ZSTD_initCCtx_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_CStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_zstd_internal.h_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_seekable.h_ZSTD_seekable.initAdvanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_setRemoveSrcFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v03.c_FSE.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_dstFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compress.c_HUF.getNbBits.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompress.c_HUF_decompress4X.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_decompressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_passThrough.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_loadFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_linux_zstd.h_ZSTD.findDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_separateFiles.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_CCtx.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_v06.c_ZBUFFv06.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_compressFilename.srcFile.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_fwriteSparse.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_load.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zlibWrapper_gzlib.c.gzdopen.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_compress.c_ZSTD.writeEpilogue.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_ZWRAPC.finishWithError.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_builders_randomDictBuilder_main.c.main.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_setCCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstd_error_private.h_ERR.getErrorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1459\\c_facebook_zstd_1459_zstdseek_decompress.c_ZSTD_seekable.initFile.txt"}], "buggy_files": [{"filename": "1459.txt", "content": "Looking at the GitHub problem description, I need to identify the issue and find the relevant files.\n\n## 1. Wrong Behavior Identification\n\nThe problem is that running `zstd filename -o filename` (compressing a file to itself) deletes the file contents before erroring out. This causes data loss because the CLI opens the output file for writing (which truncates it) before validating that the input and output are the same file.\n\n## 2. Cause Analysis\n\nThe root cause is that the CLI doesn't validate input/output file conflicts before opening files for writing. The typical flow is:\n1. Parse command line arguments\n2. Open output file for writing (this truncates the file)\n3. Open input file for reading\n4. Discover they're the same file and error out\n5. File contents are already lost due to step 2\n\nThe fix should validate that input and output files are different before opening either file for writing.\n\n## 3. Most Related Files\n\nBased on the repository information, the files most likely to contain this logic are:\n\n```\nprograms/zstdcli.c\nprograms/fileio.c\nprograms/fileio.h\nprograms/util.c\nprograms/util.h\n```\n\nThe `programs/zstdcli.c` file contains the main CLI logic and argument parsing, while `programs/fileio.c` handles the actual file I/O operations including opening input and output files. The utility files likely contain helper functions for file validation that could be used to check if two paths refer to the same file before opening them."}], "repair_results": [{"filename": "programs_fileio.c.txt", "content": "Looking at the issue, the problem is that when running `zstd filename -o filename` (compressing a file to itself), the CLI deletes the file contents before detecting the error. This happens because the output file is opened (and truncated) before checking if it's the same as the input file.\n\nLet me trace through the code:\n\n1. `FIO_compressFilename` calls `FIO_compressFilename_srcFile`\n2. `FIO_compressFilename_srcFile` opens the source file, then calls `FIO_compressFilename_dstFile`\n3. `FIO_compressFilename_dstFile` calls `FIO_openDstFile` which opens the destination file with mode \"wb\" (which truncates it)\n4. Only after this does the actual compression happen\n\nThe fix should be to check if the source and destination files are the same BEFORE opening the destination file for writing. We need to add this check in `FIO_compressFilename_dstFile` before calling `FIO_openDstFile`.\n\nHere's the fix:\n\n```c\n###programs_fileio.c\n<<<<<<< SEARCH\nstatic int FIO_compressFilename_dstFile(cRess_t ress,\n                                        const char* dstFileName,\n                                        const char* srcFileName,\n                                        int compressionLevel)\n{\n    int closeDstFile = 0;\n    int result;\n    stat_t statbuf;\n    int transfer_permissions = 0;\n\n    assert(ress.srcFile != NULL);\n\n    if (ress.dstFile == NULL) {\n        closeDstFile = 1;\n        DISPLAYLEVEL(6, \"FIO_compressFilename_dstFile: opening dst: %s\", dstFileName);\n        ress.dstFile = FIO_openDstFile(dstFileName);\n        if (ress.dstFile==NULL) return 1;  /* could not open dstFileName */\n=======\nstatic int FIO_compressFilename_dstFile(cRess_t ress,\n                                        const char* dstFileName,\n                                        const char* srcFileName,\n                                        int compressionLevel)\n{\n    int closeDstFile = 0;\n    int result;\n    stat_t statbuf;\n    int transfer_permissions = 0;\n\n    assert(ress.srcFile != NULL);\n\n    if (ress.dstFile == NULL) {\n        /* Check if source and destination are the same file before opening destination */\n        if (strcmp(srcFileName, stdinmark) && strcmp(dstFileName, stdoutmark)) {\n            stat_t srcStatbuf, dstStatbuf;\n            if (UTIL_getFileStat(srcFileName, &srcStatbuf) && UTIL_getFileStat(dstFileName, &dstStatbuf)) {\n                /* Both files exist, check if they're the same */\n#if defined(_MSC_VER)\n                if (srcStatbuf.st_dev == dstStatbuf.st_dev && srcStatbuf.st_ino == dstStatbuf.st_ino) {\n#else\n                if (srcStatbuf.st_dev == dstStatbuf.st_dev && srcStatbuf.st_ino == dstStatbuf.st_ino) {\n#endif\n                    DISPLAYLEVEL(1, \"zstd: %s: cannot compress a file to itself \\n\", srcFileName);\n                    return 1;\n                }\n            }\n        }\n\n        closeDstFile = 1;\n        DISPLAYLEVEL(6, \"FIO_compressFilename_dstFile: opening dst: %s\", dstFileName);\n        ress.dstFile = FIO_openDstFile(dstFileName);\n        if (ress.dstFile==NULL) return 1;  /* could not open dstFileName */\n>>>>>>> REPLACE\n```\n\nThis fix:\n1. Before opening the destination file, checks if both source and destination files exist\n2. Uses `stat` to compare device and inode numbers to determine if they're the same file\n3. Returns an error with a clear message if they are the same file\n4. Only opens the destination file (which would truncate it) after this check passes\n\nThis prevents data loss by detecting the error before any file modification occurs."}, {"filename": "programs_fileio.h.txt", "content": "Looking at this issue, the problem is that when running `zstd filename -o filename` (compressing a file to itself), zstd deletes the file contents before detecting the error. This is a data loss bug.\n\nThe issue is in the file I/O logic - the output file is being opened (and truncated) before checking if it's the same as the input file. However, I notice that the code provided only shows the header file `programs_fileio.h`, not the implementation file where the actual bug would be.\n\nThe bug would be in the implementation file (likely `programs/fileio.c`), where the file opening logic needs to be fixed to check if input and output files are the same BEFORE opening the output file for writing.\n\nSince I only have the header file, I cannot provide the exact fix. However, the typical fix would involve:\n\n1. Checking if the input and output filenames refer to the same file (using stat/inode comparison or canonical path comparison)\n2. Performing this check BEFORE opening the output file for writing\n3. Returning an error if they are the same\n\nThe header file itself doesn't need changes - it's just the interface. The bug is in the implementation of functions like `FIO_compressFilename()` or `FIO_compressMultipleFilenames()`.\n\nWithout access to the actual implementation file (`programs/fileio.c` or similar), I cannot provide a specific *SEARCH/REPLACE* edit. Could you please provide the implementation file where these functions are defined? The fix needs to be made in the C source file, not the header file."}, {"filename": "programs_util.c.txt", "content": "Looking at the issue, the problem is that running `zstd filename -o filename` (compressing a file to itself) deletes the file contents before erroring. This is a data loss bug.\n\nHowever, I notice that the code provided is from `programs_util.c`, which contains utility functions for file operations, directory listing, time functions, etc. The actual bug is likely in the main zstd compression code that handles the `-o` output flag, not in this utility file.\n\nThe issue states that the CLI should error **before** the file contents are deleted. This suggests we need to add a check to prevent output file from being the same as input file before opening the output file for writing (which would truncate it).\n\nSince the provided code is only from `programs_util.c` and doesn't contain the actual compression logic or output file handling, I cannot see where the bug occurs. The bug would typically be in a file like `fileio.c` or `zstdcli.c` where:\n1. Input and output filenames are processed\n2. The output file is opened (which truncates it)\n3. Compression is attempted\n\nWithout seeing the actual file that contains the compression logic and file I/O handling, I cannot provide the exact fix. However, based on the code provided, I can see that this file contains utility functions that could be used to help detect this issue.\n\nLet me check if there's anything in the provided code that could be related... The code shows various file utility functions like `UTIL_isRegularFile`, `UTIL_getFileSize`, etc., but none of them handle the input/output file comparison logic.\n\n**The issue cannot be fixed with the code provided** because:\n1. The provided code (`programs_util.c`) only contains utility functions\n2. The actual bug is in the file I/O logic where output files are opened, which is not shown\n3. We need to see the code that handles the `-o` flag and opens output files for writing\n\nTo properly fix this issue, I would need to see files like:\n- `fileio.c` or similar - where file I/O operations happen\n- `zstdcli.c` or the main CLI handler - where command-line arguments are processed\n- Any file that opens the output file for writing\n\nThe fix would typically involve:\n1. Comparing the input and output file paths (resolving symlinks, relative paths, etc.)\n2. Checking if they refer to the same file (using inode comparison on Unix or similar on Windows)\n3. Returning an error **before** opening the output file for writing\n\nSince I cannot provide a fix for code that isn't shown, I must indicate that the bug is not in the provided `programs_util.c` file."}, {"filename": "programs_util.h.txt", "content": "Looking at the issue, the problem is that when running `zstd filename -o filename` (compressing a file and outputting to the same filename), zstd deletes the contents of the file before erroring out. This causes data loss.\n\nHowever, I notice that the code segment provided is from `programs_util.h`, which is a header file containing utility function declarations and inline functions. The actual bug is likely in the main zstd program logic that handles file operations, not in this header file.\n\nThe issue describes a problem with the command-line interface behavior where:\n1. The output file is opened/created (truncating the input file if they're the same)\n2. Then an error is detected (input and output are the same file)\n3. But by then, the file contents are already deleted\n\nThis type of logic would typically be in the main CLI code (likely in a file like `fileio.c` or `zstd.c`), not in the utility header file shown. The fix would need to:\n1. Check if the input and output files are the same BEFORE opening the output file for writing\n2. Error out early if they are the same\n\nSince the provided code segment is only from `programs_util.h` and doesn't contain the actual file I/O logic that causes this bug, I cannot provide a fix based solely on this file. The bug is not in the utility header file - it's in the main program logic that handles compression operations.\n\nTo properly fix this issue, I would need to see the actual file handling code, likely in files such as:\n- `programs/fileio.c` - where file I/O operations are performed\n- `programs/zstdcli.c` - where command-line arguments are processed\n\nCould you please provide the relevant source files that contain the file opening and compression logic? The header file shown doesn't contain the code that causes this bug."}, {"filename": "programs_zstdcli.c.txt", "content": "Looking at the issue, the problem is that when running `zstd filename -o filename` (compressing a file and using the same filename as output), the CLI deletes the contents of the file before detecting the error that input and output are the same.\n\nLet me trace through the code to understand the flow:\n\n1. The command line parsing happens in the `main` function\n2. When `-o` is specified, `nextArgumentIsOutFileName` is set and the next argument becomes `outFileName`\n3. The actual compression happens in `FIO_compressFilename` or `FIO_compressMultipleFilenames` (from fileio.h/fileio.c)\n\nThe issue states that the file contents are deleted before the error is raised. This suggests that the output file is opened (truncating it) before checking if it's the same as the input file.\n\nThe fix should be to add a check in the main function to detect when the input and output filenames are the same, and error out before any file operations occur.\n\nLooking at the code flow:\n- Around line 1165-1170, there's logic that handles the case when `filenameIdx==1` and `outFileName` is set\n- This is where we should add the validation\n\nHere's the fix:\n\n```javascript\n###programs_zstdcli.c\n<<<<<<< SEARCH\n        if ((filenameIdx==1) && outFileName)\n          operationResult = FIO_compressFilename(outFileName, filenameTable[0], dictFileName, cLevel, compressionParams);\n        else\n          operationResult = FIO_compressMultipleFilenames(filenameTable, filenameIdx, outFileName, suffix, dictFileName, cLevel, compressionParams);\n=======\n        if ((filenameIdx==1) && outFileName) {\n          /* Check if input and output are the same file */\n          if (strcmp(outFileName, stdoutmark) && strcmp(filenameTable[0], stdinmark) && !strcmp(outFileName, filenameTable[0])) {\n            DISPLAYLEVEL(1, \"zstd: %s: cannot write to same file as input \\n\", filenameTable[0]);\n            CLEAN_RETURN(1);\n          }\n          operationResult = FIO_compressFilename(outFileName, filenameTable[0], dictFileName, cLevel, compressionParams);\n        } else\n          operationResult = FIO_compressMultipleFilenames(filenameTable, filenameIdx, outFileName, suffix, dictFileName, cLevel, compressionParams);\n>>>>>>> REPLACE\n```\n\nThis fix:\n1. Checks if both input and output are actual files (not stdin/stdout)\n2. Compares the filenames to see if they're the same\n3. If they are the same, displays an error message and exits before any file operations occur\n4. This prevents the file from being truncated/deleted before the error is detected"}]}
