--- a/src/libponyc/expr/reference.c
+++ b/src/libponyc/expr/reference.c
@@ -670,9 +670,6 @@
 
     case TK_ID:
     {
-      if(!def_before_use(opt, def, ast, name))
-        return false;
-
       ast_t* type = ast_type(def);
 
       if(type != NULL && ast_id(type) == TK_INFERTYPE)
@@ -688,6 +685,9 @@
         return false;
 
       if(!valid_reference(opt, ast, type, status))
+        return false;
+
+      if(!def_before_use(opt, def, ast, name))
         return false;
 
       ast_t* var = ast_parent(def);
