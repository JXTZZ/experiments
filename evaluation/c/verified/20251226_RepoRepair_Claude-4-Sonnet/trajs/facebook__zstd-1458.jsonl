{"instance_id": "facebook__zstd-1458", "rag_files": [{"filename": "1458.txt", "content": "repo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_benchMemAdvancedNoAlloc.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_cLevelToCCtxParams.srcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD_decompressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_dSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_zstd_internal.h_ZSTD.invalidateRepCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_g.debugLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_common.c_ZSTD_calloc_size_t_size_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_bitstream.h_BIT.initDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_CStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_ZSTD_createDStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_FSE.normalizeCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_decompress.c_ZSTD.DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCCtxSize.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_nbWorkers.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse_compress.c_FSE_countFast.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_construct.BWT.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v01.c_FSE.abs.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_FSE.normalizeCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCCtxSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_g.searchStrength.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_programs_dibio.c.maxMemory.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v05.c_MEM.64bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD_compress.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_internal.h_ZSTD_defaultAllocFunction_void_opaque_size_t.size.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v02.c_HUF.decodeLastSymbolX4.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v04.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.freeCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.h_ZSTDMT_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_maxMemory.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v04.c_FSE_buildDTable.raw.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_adjustCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_internal.h_OF_defaultNorm_DefaultMaxOff.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_internal.h_ZSTD_getSeqStore_const_ZSTD_CCtx.ctx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v06.c_FSEv06.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v02.c_BIT.skipBits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTDMT_allocJobsTable_U32_nbJobsPtr_ZSTD_customMem.cMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.compressSequences.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_cParam.withinBounds.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCCtxSize.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateDCtxSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_XXH_malloc_size_t.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_internal.h_ZSTD.defaultFreeFunction.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_minCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v06.h_ZSTDv06.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_huf.h_HUF_readDTableX2.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_CCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_entropy_common.c_HUF.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.CStreamWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_matching_ldm.c.ipow.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse.h_FSE_count.simple.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_huf.h_HUF.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_opt.c_ZSTD.rescaleFreqs.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_reset_matchState_ZSTD_matchState_t_ms_void_ptr_ZSTD_compressionParameters_const_cParams_ZSTD_compResetPolicy_e_const_crp_U32_const.forCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_getBlockSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v06.c_ZSTDv06.sizeofDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v04.h_ZSTDv04.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCStreamSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_lazy.c_ZSTD_compressBlock_lazy2.dictMatchState.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_check_compressionLevel_monotonicIncrease.memoryBudget.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zlibWrapper_gzlib.c.gztell.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_decompress.c_highest_set.bit.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.count.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_ldm.c_ZSTD_ldm.reduceTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v06.c_MEM.read64.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.CStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v03.c_MEM.32bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_sizeof.CDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.maxCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_tr.insertionsort.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCStreamSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v07.c_HUFv07.fillDTableX4Level2.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD_compressBlock_doubleFast_extDict.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCStreamSize.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.maxCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v03.c_FSE.buildDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v07.c_FSEv07.readNCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v05.c_MEM.read16.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_f7b.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.selectBlockCompressor.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.CStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_sizeof.CStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCStreamSize_advanced.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.CDictWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_POOL.resize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v06.c_OF_defaultNorm_MaxOff.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_FSE_count.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD_compressBegin.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v05.c_FSEv05_createDTable_unsigned.tableLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstdseek_compress.c_ZSTD_seekable.createCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v04.c_FSE.tableStep.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_freeCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.h_ZSTDMT.flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse_compress.c_FSE_count_parallel.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.estimateCStreamSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_ZSTD_estimateDStreamSize.fromFrame.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.initCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_ddict.c_ZSTD.estimateDDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_decompress.c_SEQ_MAX_CODES.3.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_internal.h_OF_defaultNorm_MaxOff.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zero.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_initCStream.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_resetCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.h_ZSTDMT_createCCtx_advanced_unsigned_nbWorkers_ZSTD_customMem.cMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.h_ZSTDMT.setMTCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.CStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_compressBlock.btopt2.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_HUF.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCCtxSize_advanced.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCCtxSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_FSE_count_parallel.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v05.c_FSEv05.tableStep.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_builders_fastCover_fastCover.c_g.displayLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_ZDICT.finalizeDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v01.c_FSE.tableStep.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCCtxSize_advanced.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v05.c_FSEv05.readNCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.cLevelToCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.compressLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v02.c_MEM.64bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_zstd_internal.h_LL_defaultNorm_MaxLL.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v02.c_MEM.readLEST.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTDMT_expandCCtxPool_ZSTDMT_CCtxPool_srcPool_int.nbWorkers.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_initStaticCStream_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.minGain.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_HUF.estimateCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.compressCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCStreamSize.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_CCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCStreamSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v06.c_FSEv06.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCCtxSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTDMT_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_MEM.32bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.maxCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_highbit64.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_decompress.h_free.dictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse_decompress.c_FSE_buildDTable.raw.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateDStreamSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.selectEncodingType.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.checkDictNCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_sizeof.matchState.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_ldm.h_ZSTD_ldm.getMaxNbSeq.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compressFilename.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCStreamSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCCtxSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.seqToCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.getCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.compress.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_huf_decompress.c_HUF.fillDTableX4.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_ss_partition_const_int_PA_int_first_int_last_int.depth.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_FSE.freeCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v07.c_FSEv07_buildDTable.raw.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCStreamSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_internal.h_LL_defaultNorm_MaxLL.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v04.c_MEM.64bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_CStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_blockSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v01.c_ZSTD.32bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_defaultCParameters_4_ZSTD_MAX_CLEVEL.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_huf.h_HUF.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_memLimit.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_f1d.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_FSE_sizeof.CTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.minCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_FSE_countFast.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCStreamSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCStreamSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_compressContinue.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_programs_benchzstd.c.maxMemory.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_initStaticCStream_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_error_private.h_ERR.getErrorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCStreamSize_advanced.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_programs_zstdcli.c.defaultCoverParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_FASTCOVER_defaultAccelParameters_FASTCOVER_MAX_ACCEL.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_ZBUFF_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse.h_FSE.endOfDState.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_createCDict_const_void_dict_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_FSE.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZBUFF.recommendedCOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_opt.c_ZSTD_literalsContribution.cached.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_FSE_count.simple.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_xxhash.c_xxh32.digest.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_CCtxParams.init.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v07.c_OF_defaultNorm_MaxOff.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_sizeof.CStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_CCtx.setPledgedSrcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse.h_FSE.NCountWriteBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_FASTCOVER.checkParameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_matching_ldm.h_LDM.printCompressStats.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse_compress.c_FSE.writeNCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress2.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v05.c_ZSTDv05.decodeSeqHeaders.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCCtxSize.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v04.c_ZSTDv04.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse.h_FSE_optimalTableLog.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_COVER_map.init.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD_initCStream_usingCDict_const_ZSTD_CDict_cdict_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress_internal.h_ZSTD_window.needOverflowCorrection.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_ldm.c_ZSTD_ldm.fillLdmHashTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_ZSTD.estimateDStreamSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_cParam.getBounds.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_f7c.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_ZSTD.DDictDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_HUF.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_initAdvancedParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_programs_bench.c.maxMemory.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_decompress.c_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_tr.introsort.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.estimateCDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_DCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_CCtxParams_init.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_FSE_countFast.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v02.c_HUF.fillDTableX6LevelN.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTDMT.freeBufferPool.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_CCtx.getParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_huf.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_mem.h_ZSTD.32bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_FSE_count.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.CDictWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_builders_randomDictBuilder_io.c_g.maxMemory.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_zstd_opt.h_ZSTD.BtGetAllMatches.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_common.c_FSE.readNCount.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_estimateCDictSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_zstd_internal.h_ZSTD_stackAllocAll_void_opaque_size_t.size.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_COVER_map.index.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.reduceTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_ZBUFF.recommendedDInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_benchCLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCCtxSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_HUF.fillDTableX2.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_HUF_decompress1X1_DCtx.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v03.c_MEM.64bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_fse.h_FSE_countFast.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_compress.c_ZSTD.CStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_FSE_createCTable_unsigned_maxSymbolValue_unsigned.tableLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_HUF_compress1X_usingCTable_internal.default.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v07.c_ML.defaultNormLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_COVER_map_pair_t.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_ZBUFF.recommendedDOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_sizeof.DStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZBUFF.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_opt.c_ZSTD.fCost.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_intmax.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateCCtxSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_linux_zstd.h_ZSTD.compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_createCDict_advanced_const_void_dict_size_t_dictSize_unsigned_byReference_ZSTD_dictMode_e_dictMode_ZSTD_compressionParameters_cParams_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_compressBlock_btopt.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD.estimateCCtxSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_decompress.c_ZSTD_dParam.withinBounds.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_CStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compress.c_ZSTD_compress.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_fetch.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_estimateDDictSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_v05.c_FSEv05.freeDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_sizeof.DDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_Range.h_anonymous.function.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compressCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_zstd_zstd_internal.h_ZSTD.initStack.txt\nrepo_document_file\\c\\facebook\\zstd\\1458\\c_facebook_zstd_1458_compressBound.txt"}], "buggy_files": [{"filename": "1458.txt", "content": "Looking at the GitHub problem description, I need to identify the issue and find the relevant files.\n\n## 1. Wrong Behavior Identification\n\nThe problem is in the `ZSTD_estimateCStreamSize()` function at line 895 in `lib/compress/zstd_compress.c`. The function:\n- Initializes result to zero\n- Enumerates compression levels from 1 up to the supplied level\n- For negative compression levels (which are valid in ZSTD), the enumeration never runs since negative levels are less than 1\n- This causes the function to always return zero for negative levels, which is inaccurate\n\n## 2. Cause Analysis\n\nThe root cause is that the enumeration loop starts at level 1, but ZSTD supports negative compression levels (fast compression modes). The loop should either:\n- Start from `ZSTD_minCLevel()` instead of 1, or\n- Be replaced entirely by calling `ZSTD_estimateCStreamSize_internal()` directly\n\n## 3. Most Related Files\n\nBased on the problem description mentioning the specific file and function, and looking at the repository information:\n\n```\nlib/compress/zstd/compress.c\nlib/compress/zstd_compress.c\nlib/common/zstd/internal.h\nlib/common/zstd/common.c\nlib/zstd.h\n```\n\nThe primary file is `lib/compress/zstd_compress.c` (mentioned in the GitHub issue), but since it's not in the repository listing, `lib/compress/zstd/compress.c` is likely the equivalent file. The other files are related as they would contain supporting functions like `ZSTD_minCLevel()`, `ZSTD_estimateCStreamSize_internal()`, and relevant declarations."}], "repair_results": [{"filename": "lib_common_zstd_common.c.txt", "content": "Looking at the issue, it describes a problem with `ZSTD_estimateCStreamSize()` in `lib/compress/zstd_compress.c` (not the file shown above, which is `lib_common_zstd_common.c`). The issue states that:\n\n1. The function initializes result to zero\n2. It enumerates levels from 1 up to the supplied level\n3. For negative levels (which are less than 1), the enumeration never runs, so it returns zero\n4. This is inaccurate for negative compression levels\n\nHowever, the code segment provided is from `lib_common_zstd_common.c`, which doesn't contain the buggy function. The issue is actually in `zstd_compress.c` at line 895 according to the GitHub link.\n\nSince the provided code segment doesn't contain the bug described in the issue, I cannot create a SEARCH/REPLACE edit for it. The bug is in a different file (`lib/compress/zstd_compress.c`) that wasn't provided.\n\nTo fix this issue properly, I would need to see the actual `ZSTD_estimateCStreamSize()` function from `lib/compress/zstd_compress.c`. The fix would likely involve:\n\n1. Starting the enumeration at `ZSTD_minCLevel()` instead of 1\n2. Skipping level 0 if needed\n3. Or potentially replacing the function entirely with `ZSTD_estimateCStreamSize_internal()` if the enumeration isn't needed\n\n**I cannot provide a fix because the buggy code is not in the file segment provided.** The file shown (`lib_common_zstd_common.c`) contains utility functions for version info, error management, and custom allocators, but not the `ZSTD_estimateCStreamSize()` function that has the bug.\n\nCould you please provide the code segment from `lib/compress/zstd_compress.c` that contains the `ZSTD_estimateCStreamSize()` function around line 895?"}, {"filename": "lib_common_zstd_internal.h.txt", "content": "Looking at the issue, I need to find the code mentioned in the GitHub link. The issue states that in `lib/compress/zstd_compress.c` around line 895, there's a function that:\n\n1. Initializes result to zero\n2. Enumerates levels from 1 up to the supplied level\n3. Has a bug where negative levels (which are less than 1) always return zero\n\nThe issue mentions that the enumeration should either:\n- Start at `ZSTD_minCLevel()` and skip level 0, OR\n- Be replaced entirely by calling `ZSTD_estimateCStreamSize_internal()` directly\n\nHowever, the code segment provided doesn't show the buggy function. The provided code is from `lib_common_zstd_internal.h` which contains common definitions and utilities, not the compression estimation functions.\n\nSince I cannot see the actual buggy code in `zstd_compress.c`, I need to make an educated guess about what the function looks like based on the issue description. The function is likely `ZSTD_estimateCStreamSize()` which should handle negative compression levels properly.\n\nBased on the issue description, the bug is that the function enumerates from level 1 to the supplied level, but negative levels are valid compression levels in zstd (they represent faster compression with less memory usage). The fix should start enumeration from `ZSTD_minCLevel()` instead of 1.\n\nHowever, since the actual buggy code is not provided in the code segments, I cannot create a proper SEARCH/REPLACE block. The provided file `lib_common_zstd_internal.h` doesn't contain the buggy function mentioned in the issue.\n\nLet me note that without seeing the actual buggy code from `lib/compress/zstd_compress.c`, I cannot provide an accurate fix. The issue clearly states the problem is in `zstd_compress.c` around line 895, but that file was not provided in the code segments.\n\nIf you could provide the actual code from `lib/compress/zstd_compress.c` containing the `ZSTD_estimateCStreamSize()` function, I would be able to create the appropriate fix."}, {"filename": "lib_compress_zstd_compress.c.txt", "content": "Looking at the issue, I need to find the `ZSTD_estimateCStreamSize()` function and understand the problem with negative compression levels.\n\nThe issue states that:\n1. The result is initialized to zero\n2. The routine enumerates levels from 1 up to the supplied level\n3. However, negative levels are less than one, so the return value is always zero for negative levels (which is inaccurate)\n\nLet me find the relevant function:\n\n```c\nsize_t ZSTD_estimateCStreamSize(int compressionLevel)\n{\n    int level;\n    size_t memBudget = 0;\n    for (level=1; level<=compressionLevel; level++) {\n        size_t const newMB = ZSTD_estimateCStreamSize_internal(level);\n        if (newMB > memBudget) memBudget = newMB;\n    }\n    return memBudget;\n}\n```\n\nThe problem is clear: when `compressionLevel` is negative (e.g., -1, -2, etc.), the loop `for (level=1; level<=compressionLevel; level++)` never executes because 1 is already greater than any negative number. This means `memBudget` stays at 0 and the function returns 0, which is incorrect.\n\nAccording to the issue, the fix should start enumeration at `ZSTD_minCLevel()` and skip level 0. Looking at the code, I can see:\n\n```c\nint ZSTD_minCLevel(void) { return (int)-ZSTD_TARGETLENGTH_MAX; }\n```\n\nAnd there's also a similar function `ZSTD_estimateCCtxSize()` that has the same bug:\n\n```c\nsize_t ZSTD_estimateCCtxSize(int compressionLevel)\n{\n    int level;\n    size_t memBudget = 0;\n    for (level=1; level<=compressionLevel; level++) {\n        size_t const newMB = ZSTD_estimateCCtxSize_internal(level);\n        if (newMB > memBudget) memBudget = newMB;\n    }\n    return memBudget;\n}\n```\n\nHere are the fixes:\n\n```c\n###lib_compress_zstd_compress.c\n<<<<<<< SEARCH\nsize_t ZSTD_estimateCCtxSize(int compressionLevel)\n{\n    int level;\n    size_t memBudget = 0;\n    for (level=1; level<=compressionLevel; level++) {\n        size_t const newMB = ZSTD_estimateCCtxSize_internal(level);\n        if (newMB > memBudget) memBudget = newMB;\n    }\n    return memBudget;\n}\n=======\nsize_t ZSTD_estimateCCtxSize(int compressionLevel)\n{\n    int level;\n    size_t memBudget = 0;\n    for (level=ZSTD_minCLevel(); level<=compressionLevel; level++) {\n        if (level == 0) continue;  /* skip level 0 */\n        size_t const newMB = ZSTD_estimateCCtxSize_internal(level);\n        if (newMB > memBudget) memBudget = newMB;\n    }\n    return memBudget;\n}\n>>>>>>> REPLACE\n```\n\n```c\n###lib_compress_zstd_compress.c\n<<<<<<< SEARCH\nsize_t ZSTD_estimateCStreamSize(int compressionLevel)\n{\n    int level;\n    size_t memBudget = 0;\n    for (level=1; level<=compressionLevel; level++) {\n        size_t const newMB = ZSTD_estimateCStreamSize_internal(level);\n        if (newMB > memBudget) memBudget = newMB;\n    }\n    return memBudget;\n}\n=======\nsize_t ZSTD_estimateCStreamSize(int compressionLevel)\n{\n    int level;\n    size_t memBudget = 0;\n    for (level=ZSTD_minCLevel(); level<=compressionLevel; level++) {\n        if (level == 0) continue;  /* skip level 0 */\n        size_t const newMB = ZSTD_estimateCStreamSize_internal(level);\n        if (newMB > memBudget) memBudget = newMB;\n    }\n    return memBudget;\n}\n>>>>>>> REPLACE\n```"}, {"filename": "lib_zstd.h.txt", "content": "Looking at the issue, I need to find the `ZSTD_estimateCStreamSize()` function that is mentioned. The issue states that this function is located at https://github.com/facebook/zstd/blob/f15f1bfefb218a29f777493302be892a89dfe1be/lib/compress/zstd_compress.c#L895.\n\nThe issue describes that:\n1. The result is initialized to zero\n2. The routine enumerates levels from 1 up to the supplied level\n3. However, negative levels are less than one, so the return value is always zero for negative levels (which is incorrect)\n\nThe fix suggested is to either:\n- Start enumeration at `ZSTD_minCLevel()` and skip level 0, OR\n- Replace `ZSTD_estimateCStreamSize()` entirely with `ZSTD_estimateCStreamSize_internal()`\n\nHowever, I notice that the provided code file is `lib_zstd.h` which is a header file, not the implementation file `zstd_compress.c`. The header file only contains function declarations, not implementations.\n\nLooking at the header file, I can see:\n```c\nZSTDLIB_API size_t ZSTD_estimateCStreamSize(int compressionLevel);\n```\n\nBut the actual implementation with the bug would be in a `.c` file that wasn't provided. Since I can only work with the files provided, and the issue mentions that the function implementation is in `lib/compress/zstd_compress.c` (which is not in the provided code), I cannot directly fix the bug in the implementation.\n\nHowever, based on the issue description and the pattern I can see in the header file where there's also:\n```c\nZSTDLIB_API int ZSTD_minCLevel(void);  /*!< minimum negative compression level allowed */\n```\n\nThe fix would need to be applied to the implementation file. Since that file is not provided, I cannot generate the SEARCH/REPLACE blocks.\n\nLet me check if there's any related code in the header that might need updating... Looking more carefully, I don't see any implementation code in the provided header file that would contain the bug described in the issue.\n\n**The bug is in the implementation file `lib/compress/zstd_compress.c` which was not provided in the code segments.** The header file `lib_zstd.h` only contains declarations and would not need to be modified to fix this bug.\n\nTo properly fix this issue, I would need the actual implementation file containing the `ZSTD_estimateCStreamSize()` function body where the enumeration loop exists."}]}
