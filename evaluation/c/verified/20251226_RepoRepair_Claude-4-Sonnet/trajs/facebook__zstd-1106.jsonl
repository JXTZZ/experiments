{"instance_id": "facebook__zstd-1106", "rag_files": [{"filename": "1106.txt", "content": "repo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_opt.h_ZSTD.readMINMATCH.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_initCCtxParams.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v03.c_ZSTD.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_estimateCCtxSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_estimateCCtxSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_ZSTD.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.getErrorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v05.c_ZSTDv05_decodeFrameHeader.Part1.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_HUF.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_resetErr.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD_initCStream_usingCDict_const_ZSTD_CDict_cdict_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.writeEpilogue.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_internal.h_ZSTD_fcs_fieldSize.4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CCtx_params.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_programs_fileio.c.params.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v01.h_ZSTDv01.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_matching_ldm.c_LDM.encodeLiteralLengthAndLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.getCParamsFromCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_fse_compress.c_FSE.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompressLz4Frame.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_ZSTD.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_initCStream.srcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v03.c_ZSTD.wildcopy.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZDICT_trainFromBuffer.unsafe.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compressBegin_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_cLevelToCCtxParams.srcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_opt.h_ZSTD_compressBlock_btopt.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_trbudget.check.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.noCompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_common.c_ZSTD_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_freeCompressionJobs.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.getParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_legacy.h_ZSTD.findFrameCompressedSizeLegacy.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_HUF_compress1X.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.h_ZSTDv02.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_ZSTD_frameHeaderSize.min.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.clampCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_xxhash.c.xxh32.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_internal.h_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_compressBegin.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_huf_compress.c_HUF_compressCTable.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v07.c_ZSTDv07_frameHeaderSize.min.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v05.h_ZSTDv05.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v05.c_ZSTDv05.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_lazy.h_ZSTD_compressBlock_lazy.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_HUF.decompress4X4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_getFrameContentSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_internal.h_ZSTD.frameIdSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_ZSTDv02.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_CCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v05.c_ZSTDv05_decompress.continueDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_HUF.validateCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_CCtxParam.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.storeLastLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD.estimateDCtxSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.findDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZBUFF.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_frameHeaderSize.min.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_common.c_ZSTD.getErrorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v03.c_ZSTDv03.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.resetCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_HUF_decompress1X_DCtx.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_HUF.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTDMT_updateCParams.whileCompressing.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD.getFrameContentSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_HUF.decompress4X4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZBUFF.recommendedDInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_fse.h_FSE_decompress.usingDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v01.c_ZSTD.frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_adjustCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_ZSTD.frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c.computeNbChunks.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_fast.c_ZSTD_compressBlock.fast.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_zstd_internal.h_ZSTD_fcs_fieldSize.4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_FSE.countFast.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_ZBUFF.decompressInit.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_benchMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD.frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.c_ZSTDv06.getFrameParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.writeFrameHeader.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZWRAP.setPledgedSrcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_opt.c_ZSTD.rescaleFreqs.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.getFrameContentSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v03.c_ZSTD.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.sufficientBuff.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_errors.h_ZSTD.getErrorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTDMT.writeLastEmptyBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD.generateNxBytes.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.writeEpilogue.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTDMT.setMTCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v07.c_ZSTDv07.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD.DStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_initCCtxParams.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_zstd_internal.h_ZSTD_stackAllocAll_void_opaque_size_t.size.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_findDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.buildSeqTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_seekable.h_ZSTD.seekTableFooterSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.DDictWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_opt.h_ZSTD.getLiteralPrice.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.getParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_estimateCStreamSize.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.continueCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v07.h_ZSTDv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_randLength.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_BtFindBestMatch.selectMLS.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_huf.h_HUF_buildCTable.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_setCCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_FSE.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_HUF.readDTableX6.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZBUFF.recommendedDInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_programs_fileio.c.readsize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v01.c_ZSTDv01.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v07.c_ZSTDv07.decodeSeqHeaders.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.writeFrameHeader.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZDICT.analyzeEntropy.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD_estimateDStreamSize.fromFrame.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_resetCCtx.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.c_ZSTDv06_frameHeaderSize.max.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_ZSTD.wildcopy.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZBUFF.recommendedCInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v05.c_ZSTDv05.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_huf.h_HUF.selectDecoder.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CCtx.getParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZBUFF_compressInit.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_compressContinue.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress_internal.h_ZSTD_compressBegin_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_createCResources.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_getTotalCappedFileSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.cLevelToCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_CCtxParams_init.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_CCtxParams.init.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_common.c_HUF.readStats.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v03.c_ZSTD.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_legacy.h_ZSTD_getDecompressedSize.legacy.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.isUpdateAuthorized.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v07.c_HUFv07.fillDTableX4Level2.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.nextInputType.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress_test.c_zstd_compress_test.open.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.decodeFrameHeader.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_compressContinue.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_internal.h_LL_defaultNorm_MaxLL.1.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ldm.c_ZSTD_compressBlock_ldm.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.h_ZSTDMT_initCStream.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_resetCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zlibWrapper_gzread.c.gzread.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ldm.h_ZSTD_ldm.adjustParameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstdseek_compress.c_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstdseek_compress.c_ZSTD_seekable.compressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_ZBUFF.recommendedDOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_compress.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.assignParamsToCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CCtxParams.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.skippableHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_common.c_ZSTD.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CCtx.setParametersUsingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.c_ZSTDv06_fcs_fieldSize.4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress_test.c_zstd_compress_test.release.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_DCtx_loadDictionary.byReference.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.h_ZSTDMT.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_fast.h_ZSTD.fillHashTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_common.c_FSE.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_traverse.frame.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_HUF_decompress4X2.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_btrfs_zstd.c_zstd_get_btrfs.parameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.frameHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.c_ZBUFFv06_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CCtxParam.getParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD_decompress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_getDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_ZSTD.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD_initStaticDCtx_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_ZSTDv04_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_CCtx.setPledgedSrcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v07.c_ZSTDv07.getFrameParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v03.c_HUF.decompress4X4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD_DCtx.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_HUF.readDTableX4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_check_compressionLevel_monotonicIncrease.memoryBudget.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_compressBegin_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD_createDStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.c_ZSTD.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstdErrorHelp.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_lazy.h_ZSTD_compressBlock.lazy2.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress_test.c_buffer.out.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_encodeSequences.default.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.referenceExternalSequences.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_FSE_buildDTable.rle.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_MEM.write16.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_estimateCCtxSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_estimateDStreamSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_FSE_init.dtable.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_estimateCCtxSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v07.c_ZSTDv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.getBlockSizeMax.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.c_ZSTDv06.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_COVER_map.init.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_ZSTD.getLongOffsetsShare.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_HUF.selectDecoder.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.decompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_g.one.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_internal.h_ZSTD.defaultFreeFunction.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.seqToCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_errors.h_ZSTD_getErrorString_ZSTD_ErrorCode.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_HUF.decompress4X2.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_ZSTD.blockHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD_frameHeaderSize.prefix.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.CCtxWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.CStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_getFileSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_huf_compress.c_HUF_compress4X.repeat.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.h_ZSTD.hash3.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CCtx.setPledgedSrcSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_seekable.h_ZSTD_seekable.getFrameDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v01.c_HUF.decodeSymbol.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_skippableHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zlibWrapper_gzlib.c.gzbuffer.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.h_ZSTDMT_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.h_ZSTDv06.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_compress.c_ZSTD.compressSequences.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_huf.h_HUF_compress4X.repeat.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.c_ZSTDv06.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v05.c_ZSTDv05_frameHeaderSize.min.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.findDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_seekable.h_ZSTD_seekable.getFrameCompressedOffset.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTDMT_serialState.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_decompress.c_HUF.decodeStreamX4.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.h_ZSTDMT_CCtxParam.setMTCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_CStreamInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstdseek_compress.c_ZSTD_seekable.initCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD.adjustCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v06.c_ZSTDv06_frameHeaderSize.min.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_zstd_decompress.c_ZSTD.getFrameContentSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_freeCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v04.h_ZSTDv04.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_linux_zstd.h_ZSTD_frameHeaderSize.max.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v03.h_ZSTDv03.findFrameCompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_v02.c_ZSTDv02.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_compressBlock_lazy.extDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_compress.c_ZSTD_adjustCParams.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1106\\c_facebook_zstd_1106_programs_fileio.c.errorCode.txt"}], "buggy_files": [{"filename": "1106.txt", "content": "Looking at the GitHub problem description, I need to identify the issue and find the relevant files.\n\n## 1. Wrong Behavior Identified\n\nThe issue is that `ZSTD_CCtx_setPledgedSrcSize()` doesn't always validate that the input size matches the pledged size. Specifically, `ZSTD_compressContinue_internal()` only applies the size check if the content size is being written into the frame header, but not in all cases.\n\n## 2. Cause Analysis\n\nThe root cause is inconsistent validation logic in the compression implementation:\n- The pledged source size validation is conditional rather than universal\n- The validation only occurs when content size is written to the frame header\n- This creates unpredictable behavior where sometimes size mismatches are caught and sometimes they're not\n- The documentation in `zstd.h` is also unclear about when to expect errors related to pledged size validation\n\n## 3. Most Related Files\n\nBased on the repository information and the nature of the problem, here are the files most likely to need editing:\n\n```\nlib/zstd.h\nlib/compress/zstd/compress.c\nlib/compress/zstd/compress/internal.h\nlib/common/zstd/internal.h\nlib/common/zstd/errors.h\n```\n\nThese files are selected because:\n1. `lib/zstd.h` - Contains the public API documentation that needs clarification about pledged size validation behavior\n2. `lib/compress/zstd/compress.c` - Likely contains `ZSTD_CCtx_setPledgedSrcSize()` and `ZSTD_compressContinue_internal()` implementations\n3. `lib/compress/zstd/compress/internal.h` - Contains internal compression structures and function declarations\n4. `lib/common/zstd/internal.h` - Contains common internal definitions used across compression functions\n5. `lib/common/zstd/errors.h` - May need updates if new error codes are needed for consistent validation"}], "repair_results": [{"filename": "lib_common_zstd_errors.h.txt", "content": "Looking at the issue, it's about documentation in `zstd.h` regarding `ZSTD_CCtx_setPledgedSrcSize()` and the behavior of pledged size validation. However, the code segment provided is from `lib_common_zstd_errors.h`, which defines error codes.\n\nThe issue mentions that:\n1. `ZSTD_CCtx_setPledgedSrcSize()` doesn't always validate that input size matches the pledged size\n2. The validation only happens in `ZSTD_compressContinue_internal()` when content size is written to the frame header\n3. The documentation in `zstd.h` should be clarified about when to expect errors\n4. The \"Note 2\" comment about \"single round\" needs better explanation\n\nSince the actual issue is about documentation in `zstd.h` (which is not provided in the code segments), but we're given `zstd_errors.h`, I need to check if there's a related error code that should be added or documented.\n\nLooking at the error codes, I can see `ZSTD_error_srcSize_wrong = 72` which seems relevant to this issue about source size validation.\n\nHowever, since the provided code segment is only the error header file and the actual issue is about documentation in `zstd.h` (which contains the API documentation for `ZSTD_CCtx_setPledgedSrcSize()`), I cannot make the necessary changes because the relevant file is not provided.\n\nBased on the issue description, the bug is not actually in the code logic but in the **documentation**. The file that needs to be edited would be `zstd.h` where the function `ZSTD_CCtx_setPledgedSrcSize()` is documented.\n\nSince I cannot locate the actual bug in the provided code segment (which only contains error code definitions and is not the problematic code), I'll note that:\n\n**The issue is NOT in the provided file `lib_common_zstd_errors.h`**. This file only contains error code definitions and is working correctly. The actual documentation issue is in `zstd.h` which has not been provided in the code segments.\n\nIf you can provide the `zstd.h` file content, particularly the section documenting `ZSTD_CCtx_setPledgedSrcSize()`, I can create the appropriate SEARCH/REPLACE edits to improve the documentation as requested in the issue."}, {"filename": "lib_common_zstd_internal.h.txt", "content": "Looking at the issue, the problem is about documentation in `zstd.h` for `ZSTD_CCtx_setPledgedSrcSize()`. The issue states that:\n\n1. The function doesn't always validate that input size matches the pledged size\n2. The validation only happens if content size is written into the frame header\n3. The existing \"Note 2\" comment about \"single round\" needs clarification\n\nHowever, the code segment provided is from `lib_common_zstd_internal.h`, which is an internal header file, not `zstd.h` (the public API header). The issue is specifically about documentation in `zstd.h`, which is not shown in the provided code segments.\n\nSince the provided code segment doesn't contain the relevant documentation that needs to be fixed (it's in `zstd.h`, not in `zstd_internal.h`), and the issue is purely about improving documentation comments rather than fixing actual code bugs, I cannot provide a SEARCH/REPLACE edit for the file shown.\n\nThe issue requires changes to `zstd.h` to:\n1. Document when `ZSTD_CCtx_setPledgedSrcSize()` validates the pledged size vs actual size\n2. Clarify what \"single round\" means in Note 2 (e.g., calling `ZSTD_compress_generic()` with `ZSTD_e_end` on the initial invocation)\n\nWithout the actual `zstd.h` file content being provided in the code segments, I cannot generate the appropriate SEARCH/REPLACE edits to fix this documentation issue.\n\n**The provided code segment (`lib_common_zstd_internal.h`) does not contain the bug or documentation issue described.** The issue is in `zstd.h` which was not included in the code segments."}, {"filename": "lib_compress_zstd_compress.c.txt", "content": "Looking at the issue, I need to understand the problem:\n\n1. `ZSTD_CCtx_setPledgedSrcSize()` doesn't always validate that the input size matches the pledged size\n2. The validation only happens in `ZSTD_compressContinue_internal()` when the content size is being written into the frame header\n3. The documentation in `zstd.h` needs to be clearer about when validation occurs and what \"single round\" means\n\nLet me examine the code to find where the validation happens:\n\nIn `ZSTD_compressContinue_internal()`, I can see:\n```c\nif (cctx->appliedParams.fParams.contentSizeFlag) {  /* control src size */\n    if (cctx->consumedSrcSize+1 > cctx->pledgedSrcSizePlusOne) {\n        DEBUGLOG(4, \"error : pledgedSrcSize = %u, while realSrcSize >= %u\",\n            (U32)cctx->pledgedSrcSizePlusOne-1, (U32)cctx->consumedSrcSize);\n        return ERROR(srcSize_wrong);\n    }\n}\n```\n\nAnd in `ZSTD_compressEnd()`:\n```c\nif (cctx->appliedParams.fParams.contentSizeFlag) {  /* control src size */\n    DEBUGLOG(4, \"end of frame : controlling src size\");\n    if (cctx->pledgedSrcSizePlusOne != cctx->consumedSrcSize+1) {\n        DEBUGLOG(4, \"error : pledgedSrcSize = %u, while realSrcSize = %u\",\n            (U32)cctx->pledgedSrcSizePlusOne-1, (U32)cctx->consumedSrcSize);\n        return ERROR(srcSize_wrong);\n}   }\n```\n\nSo the validation only happens when `contentSizeFlag` is set. This is the behavior that needs to be documented.\n\nSince the issue mentions that the documentation is in `zstd.h` (which is not shown in the provided code), I'll focus on improving the code comments where `ZSTD_CCtx_setPledgedSrcSize` is implemented and where the validation occurs.\n\n```c\n### lib_compress_zstd_compress.c\n<<<<<<< SEARCH\nZSTDLIB_API size_t ZSTD_CCtx_setPledgedSrcSize(ZSTD_CCtx* cctx, unsigned long long pledgedSrcSize)\n{\n    DEBUGLOG(4, \"ZSTD_CCtx_setPledgedSrcSize to %u bytes\", (U32)pledgedSrcSize);\n    if (cctx->streamStage != zcss_init) return ERROR(stage_wrong);\n    cctx->pledgedSrcSizePlusOne = pledgedSrcSize+1;\n    return 0;\n}\n=======\nZSTDLIB_API size_t ZSTD_CCtx_setPledgedSrcSize(ZSTD_CCtx* cctx, unsigned long long pledgedSrcSize)\n{\n    DEBUGLOG(4, \"ZSTD_CCtx_setPledgedSrcSize to %u bytes\", (U32)pledgedSrcSize);\n    if (cctx->streamStage != zcss_init) return ERROR(stage_wrong);\n    cctx->pledgedSrcSizePlusOne = pledgedSrcSize+1;\n    /* Note: Validation of pledgedSrcSize against actual source size only occurs\n     * when contentSizeFlag is enabled (fParams.contentSizeFlag == 1).\n     * If contentSizeFlag is disabled, no validation is performed.\n     * Validation happens at compression end in ZSTD_compressEnd(). */\n    return 0;\n}\n>>>>>>> REPLACE\n```\n\n```c\n### lib_compress_zstd_compress.c\n<<<<<<< SEARCH\nstatic size_t ZSTD_compressContinue_internal (ZSTD_CCtx* cctx,\n                              void* dst, size_t dstCapacity,\n                        const void* src, size_t srcSize,\n                               U32 frame, U32 lastFrameChunk)\n{\n    ZSTD_matchState_t* ms = &cctx->blockState.matchState;\n    size_t fhSize = 0;\n\n    DEBUGLOG(5, \"ZSTD_compressContinue_internal, stage: %u, srcSize: %u\",\n                cctx->stage, (U32)srcSize);\n    if (cctx->stage==ZSTDcs_created) return ERROR(stage_wrong);   /* missing init (ZSTD_compressBegin) */\n\n    if (frame && (cctx->stage==ZSTDcs_init)) {\n        fhSize = ZSTD_writeFrameHeader(dst, dstCapacity, cctx->appliedParams,\n                                       cctx->pledgedSrcSizePlusOne-1, cctx->dictID);\n        if (ZSTD_isError(fhSize)) return fhSize;\n        dstCapacity -= fhSize;\n        dst = (char*)dst + fhSize;\n        cctx->stage = ZSTDcs_ongoing;\n    }\n\n    if (!srcSize) return fhSize;  /* do not generate an empty block if no input */\n\n    if (!ZSTD_window_update(&ms->window, src, srcSize)) {\n        ms->nextToUpdate = ms->window.dictLimit;\n    }\n    if (cctx->appliedParams.ldmParams.enableLdm)\n        ZSTD_window_update(&cctx->ldmState.window, src, srcSize);\n\n    DEBUGLOG(5, \"ZSTD_compressContinue_internal (blockSize=%u)\", (U32)cctx->blockSize);\n    {   size_t const cSize = frame ?\n                             ZSTD_compress_frameChunk (cctx, dst, dstCapacity, src, srcSize, lastFrameChunk) :\n                             ZSTD_compressBlock_internal (cctx, dst, dstCapacity, src, srcSize);\n        if (ZSTD_isError(cSize)) return cSize;\n        cctx->consumedSrcSize += srcSize;\n        cctx->producedCSize += (cSize + fhSize);\n        if (cctx->appliedParams.fParams.contentSizeFlag) {  /* control src size */\n            if (cctx->consumedSrcSize+1 > cctx->pledgedSrcSizePlusOne) {\n                DEBUGLOG(4, \"error : pledgedSrcSize = %u, while realSrcSize >= %u\",\n                    (U32)cctx->pledgedSrcSizePlusOne-1, (U32)cctx->consumedSrcSize);\n                return ERROR(srcSize_wrong);\n            }\n        }\n        return cSize + fhSize;\n    }\n}\n=======\nstatic size_t ZSTD_compressContinue_internal (ZSTD_CCtx* cctx,\n                              void* dst, size_t dstCapacity,\n                        const void* src, size_t srcSize,\n                               U32 frame, U32 lastFrameChunk)\n{\n    ZSTD_matchState_t* ms = &cctx->blockState.matchState;\n    size_t fhSize = 0;\n\n    DEBUGLOG(5, \"ZSTD_compressContinue_internal, stage: %u, srcSize: %u\",\n                cctx->stage, (U32)srcSize);\n    if (cctx->stage==ZSTDcs_created) return ERROR(stage_wrong);   /* missing init (ZSTD_compressBegin) */\n\n    if (frame && (cctx->stage==ZSTDcs_init)) {\n        fhSize = ZSTD_writeFrameHeader(dst, dstCapacity, cctx->appliedParams,\n                                       cctx->pledgedSrcSizePlusOne-1, cctx->dictID);\n        if (ZSTD_isError(fhSize)) return fhSize;\n        dstCapacity -= fhSize;\n        dst = (char*)dst + fhSize;\n        cctx->stage = ZSTDcs_ongoing;\n    }\n\n    if (!srcSize) return fhSize;  /* do not generate an empty block if no input */\n\n    if (!ZSTD_window_update(&ms->window, src, srcSize)) {\n        ms->nextToUpdate = ms->window.dictLimit;\n    }\n    if (cctx->appliedParams.ldmParams.enableLdm)\n        ZSTD_window_update(&cctx->ldmState.window, src, srcSize);\n\n    DEBUGLOG(5, \"ZSTD_compressContinue_internal (blockSize=%u)\", (U32)cctx->blockSize);\n    {   size_t const cSize = frame ?\n                             ZSTD_compress_frameChunk (cctx, dst, dstCapacity, src, srcSize, lastFrameChunk) :\n                             ZSTD_compressBlock_internal (cctx, dst, dstCapacity, src, srcSize);\n        if (ZSTD_isError(cSize)) return cSize;\n        cctx->consumedSrcSize += srcSize;\n        cctx->producedCSize += (cSize + fhSize);\n        /* Pledged source size validation: only performed when contentSizeFlag is enabled.\n         * This check verifies we haven't exceeded the pledged size during compression. */\n        if (cctx->appliedParams.fParams.contentSizeFlag) {  /* control src size */\n            if (cctx->consumedSrcSize+1 > cctx->pledgedSrcSizePlusOne) {\n                DEBUGLOG(4, \"error : pledgedSrcSize = %u, while realSrcSize >= %u\",\n                    (U32)cctx->pledgedSrcSizePlusOne-1, (U32)cctx->consumedSrcSize);\n                return ERROR(srcSize_wrong);\n            }\n        }\n        return cSize + fhSize;\n    }\n}\n>>>>>>> REPLACE\n```\n\n```c\n### lib_compress_zstd_compress.c\n<<<<<<< SEARCH\nsize_t ZSTD_compressEnd (ZSTD_CCtx* cctx,\n                         void* dst, size_t dstCapacity,\n                   const void* src, size_t srcSize)\n{\n    size_t endResult;\n    size_t const cSize = ZSTD_compressContinue_internal(cctx,\n                                dst, dstCapacity, src, srcSize,\n                                1 /* frame mode */, 1 /* last chunk */);\n    if (ZSTD_isError(cSize)) return cSize;\n    endResult = ZSTD_writeEpilogue(cctx, (char*)dst + cSize, dstCapacity-cSize);\n    if (ZSTD_isError(endResult)) return endResult;\n    if (cctx->appliedParams.fParams.contentSizeFlag) {  /* control src size */\n        DEBUGLOG(4, \"end of frame : controlling src size\");\n        if (cctx->pledgedSrcSizePlusOne != cctx->consumedSrcSize+1) {\n            DEBUGLOG(4, \"error : pledgedSrcSize = %u, while realSrcSize = %u\",\n                (U32)cctx->pledgedSrcSizePlusOne-1, (U32)cctx->consumedSrcSize);\n            return ERROR(srcSize_wrong);\n    }   }\n    return cSize + endResult;\n}\n=======\nsize_t ZSTD_compressEnd (ZSTD_CCtx* cctx,\n                         void* dst, size_t dstCapacity,\n                   const void* src, size_t srcSize)\n{\n    size_t endResult;\n    size_t const cSize = ZSTD_compressContinue_internal(cctx,\n                                dst, dstCapacity, src, srcSize,\n                                1 /* frame mode */, 1 /* last chunk */);\n    if (ZSTD_isError(cSize)) return cSize;\n    endResult = ZSTD_writeEpilogue(cctx, (char*)dst + cSize, dstCapacity-cSize);\n    if (ZSTD_isError(endResult)) return endResult;\n    /* Final pledged source size validation: only performed when contentSizeFlag is enabled.\n     * This check ensures the actual compressed size exactly matches the pledged size.\n     * If contentSizeFlag is disabled (e.g., when using ZSTD_compress_generic with ZSTD_e_end\n     * in a single call without prior size pledge), no validation occurs. */\n    if (cctx->appliedParams.fParams.contentSizeFlag) {  /* control src size */\n        DEBUGLOG(4, \"end of frame : controlling src size\");\n        if (cctx->pledgedSrcSizePlusOne != cctx->consumedSrcSize+1) {\n            DEBUGLOG(4, \"error : pledgedSrcSize = %u, while realSrcSize = %u\",\n                (U32)cctx->pledgedSrcSizePlusOne-1, (U32)cctx->consumedSrcSize);\n            return ERROR(srcSize_wrong);\n    }   }\n    return cSize + endResult;\n}\n>>>>>>> REPLACE\n```"}, {"filename": "lib_zstd.h.txt", "content": "Looking at the issue, I need to:\n\n1. Improve the documentation for `ZSTD_CCtx_setPledgedSrcSize()` to clarify when validation occurs\n2. Clarify what \"single round\" means in Note 2\n\nLet me locate the relevant documentation in the code and make the necessary improvements:\n\n```c\n### lib_zstd.h\n<<<<<<< SEARCH\n/*! ZSTD_CCtx_setPledgedSrcSize() :\n *  Total input data size to be compressed as a single frame.\n *  This value will be controlled at the end, and result in error if not respected.\n * @result : 0, or an error code (which can be tested with ZSTD_isError()).\n *  Note 1 : 0 means zero, empty.\n *           In order to mean \"unknown content size\", pass constant ZSTD_CONTENTSIZE_UNKNOWN.\n *           ZSTD_CONTENTSIZE_UNKNOWN is default value for any new compression job.\n *  Note 2 : If all data is provided and consumed in a single round,\n *           this value is overriden by srcSize instead. */\nZSTDLIB_API size_t ZSTD_CCtx_setPledgedSrcSize(ZSTD_CCtx* cctx, unsigned long long pledgedSrcSize);\n=======\n/*! ZSTD_CCtx_setPledgedSrcSize() :\n *  Total input data size to be compressed as a single frame.\n *  Value will be written in frame header, unless if explicitly forbidden using ZSTD_p_contentSizeFlag.\n *  This value will also be controlled at the end, and trigger an error if not respected.\n * @result : 0, or an error code (which can be tested with ZSTD_isError()).\n *  Note 1 : pledgedSrcSize==0 actually means zero, empty.\n *           In order to mean \"unknown content size\", pass constant ZSTD_CONTENTSIZE_UNKNOWN.\n *           ZSTD_CONTENTSIZE_UNKNOWN is default value for any new compression job.\n *  Note 2 : If all data is provided and consumed in a single round,\n *           for example with ZSTD_compress2(), or invoking immediately ZSTD_compressStream2() with ZSTD_e_end,\n *           or ZSTD_compress_generic() with ZSTD_e_end,\n *           this value is overriden by srcSize instead.\n *  Note 3 : Whenever all input data is provided and consumed in a single round,\n *           pledgedSrcSize doesn't matter. However, if the input data is provided in multiple rounds,\n *           pledgedSrcSize becomes important for performance and correctness.\n *  Note 4 : If pledgedSrcSize is not known at the time of initialization, use ZSTD_CONTENTSIZE_UNKNOWN.\n *           Note that, for compatibility with older programs, \"0\" also disables frame content size field.\n *           It may be enabled in the future.\n *  Note 5 : Whenever possible, pledge a value within valid range (0 to ZSTD_CONTENTSIZE_MAX).\n *           Incorrect pledged src size will trigger an error if and only if pledgedSrcSize is written in frame header.\n *           It's not always the case : during streaming compression for example, pledgedSrcSize == ZSTD_CONTENTSIZE_UNKNOWN,\n *           in which case, no content size will be written into frame header, and no error will be triggered,\n *           even if input size doesn't match the pledge. */\nZSTDLIB_API size_t ZSTD_CCtx_setPledgedSrcSize(ZSTD_CCtx* cctx, unsigned long long pledgedSrcSize);\n>>>>>>> REPLACE\n```"}]}
