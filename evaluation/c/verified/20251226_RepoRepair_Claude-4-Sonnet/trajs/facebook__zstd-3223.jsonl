{"instance_id": "facebook__zstd-3223", "rag_files": [{"filename": "3223.txt", "content": "repo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_module.c_zstd_get.params.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress_block.c_ZSTD.execSequenceLong.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_openSrcFile_const_FIO_prefs_t_const_prefs_const_char.srcFileName.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZBUFF.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.compressCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTDMT_getCCtx_ZSTDMT_CCtxPool.pool.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZWRAP.isUsingZSTDdecompression.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.toFlushNow.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.assertEqualCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZSTD.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_decompress.c_ZSTD.decompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_initCStream.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_isFIFO.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_decompress.c_ZSTD_createDStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_initErr.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress_block.c_ZSTD.safecopyDstBeforeSrc.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.compressCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.noCompressLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZSTD.execSequenceLong.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.flushStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.isUpdateAuthorized.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_createCStream_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_fillBuffer.fromHandle.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZSTD.decompressContinueStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd.h_zstd_flush.stream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.decompressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.writeSkippableFrame.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZSTD_DCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.skippableHeaderSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_test.c_zstd_compress_test.write.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_freeCResources.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_createCStream.void.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_CCtxParams.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_AIO_ReadPool.executeReadJob.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.resetDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_isFIFOStat.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD_initCStream_usingCDict_const_ZSTD_CDict_cdict_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compressCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_internal.h_ZSTD.isSkipFrame.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD_compress.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_compress_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_programs_zstdcli.c.main.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_CCtx.refPrefix.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_programs_zstdcli.c.printVersion.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_overwriteMode.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZBUFF_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_internal.h_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD_initCStream_ZSTD_parameters_params_unsigned_long_long_pledgedSrcSize_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_internal.h_ZSTD_window.correctOverflow.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.limitCopy.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_compress_usingCDict.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_requireUserConfirmation.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_createFileCompressionResources.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_v01.c_ZSTD.copyUncompressedBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZWRAP.initializeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_v03.c_ZSTDv03.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_seekable.h_ZSTD_seekable.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_module.c_zstd_out.buffer.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZSTD_createDStream.void.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_inBuffer.forEndFlush.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_CCtxParams.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.getParams.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd.h_zstd.parameters.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.copySequencesToSeqStoreNoBlockDelim.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_programs_fileio.c.compressedFileExtensions.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_errors.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compressBegin_usingCDict.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_module.c_zstd_compress.cctx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_compressBegin_usingCDict.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_common.c_ZSTD_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_decompress.c_ZSTD.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.h_ZSTDMT.compressStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_decompress.c_ZSTD.freeDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.noCompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_CCtxParams_init.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_AIO_WritePool.enqueueAndReacquireWriteJob.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_matching_ldm_common.c_LDM.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_programs_fileio.c.outBuff.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_programs_zstdcli.c.printDefaultCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_seekable.h_ZSTD_seekable.getFrameDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZBUFF_compressInit.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_module.c_zstd_flush.stream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.findDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_trace.h_ZSTD_CCtx_params.s.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.loadZstdDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_literals.c_ZSTD.compressLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_compress.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd.h_zstd_init_dstream_size_t_max_window_size_void_workspace_size_t_workspace.size.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstdErrorHelp.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.compressEnd.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_openDstFile_FIO_ctx_t_fCtx_FIO_prefs_t_const_prefs_const_char_srcFileName_const_char_dstFileName_const_int.mode.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZBUFF.compressInit.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_internal.h_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_HUF.getNbBits.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZBUFF.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_HUF.readCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress2.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.setCCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTDMT_compress_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_v02.c_ZSTD.execSequence.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTDMT_updateCParams.whileCompressing.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_v07.c_HUFv07_decompress4X.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_removeMultiFilesWarning.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD_compressContinue.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.DStreamOutSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTDMT_flushStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_CCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_HUF.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.h_ZSTDMT.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress_test.c_buffer.out.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.h_ZSTDMT_CCtxParam.setMTCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_anonymous.function.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress_block.c_ZSTD.execSequenceSplitLitBuffer.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZBUFF.compressInitDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress_module.c_zstd_out.buffer.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_struct.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.writeEpilogue.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_v05.c_HUFv05.decodeStreamX2.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.disableLiteralsCompression.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZBUFF.compressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_TELL.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_DCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZBUFF.recommendedDInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zlibWrapper_gzlib.c.gzeof.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_determineDstName_const_char.srcFileName.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_g_ZWRAP.useZSTDcompression.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTDMT.writeLastEmptyBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTDMT_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_seekable.h_ZSTD_seekTable.offsetToFrameIndex.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZBUFF.decompressInit.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD_decompressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_CCtx_params.s.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_module.c_zstd_end.stream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZBUFF.compressFlush.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_compress.usingCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_compressStream2.simpleArgs.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_determineHasStdinInput.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_ZSTD_initStaticDStream_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd.h_zstd_out.buffer.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd.h_zstd_in.buffer.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_createCDict_const_void_dictBuffer_size_t_dictSize_int.compressionLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.compressBound.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD.freeCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_squashfs_zstd_wrapper.c_zstd.uncompress.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress.c_HUF_decompress4X.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_programs_fileio.c.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_bitstream.h_anonymous.struct.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_literals.h_ZSTD.noCompressLiterals.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress_test.c.output.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_passThrough.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_fileExist.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_setHasStdoutOutput.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_AIO_WritePool.setFile.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_decompress_module.c_zstd_in.buffer.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZBUFF.decompressInitDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD_compress.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_harness.c.output.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress_internal.h_ZSTD_initCStream.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_ZWRAP.useZSTDcompression.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstdseek_compress.c_ZSTD_seekable.endStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compress.c_ZSTD_CCtxParam.getParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_resetDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_outputThread_void.arg.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_lazy.h_ZSTD_compressBlock.btlazy2.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_v02.h_ZSTDv02_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_CCtxParams.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstdseek_compress.c_ZSTD_seekable.createCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_const_char_dir1_const_char.dir2.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd.h_zstd_decompress.dctx.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD_initCStream.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_zstd_compress.c_ZSTD_compress.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_openSrcFile_const_char.srcFileName.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_openDstFile_const_char.dstFileName.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD_outBuffer.s.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_load.txt\nrepo_document_file\\c\\facebook\\zstd\\3223\\c_facebook_zstd_3223_linux_zstd.h_ZSTD.compressBlock.txt"}], "buggy_files": [{"filename": "3223.txt", "content": "Looking at the GitHub problem description, I need to identify the issue and find the relevant files to fix it.\n\n## 1. Identifying the wrong behavior\n\nThe issue is with `zstdcat` passthrough behavior:\n- `zstdcat hello` works correctly (outputs \"hello\") - this is passthrough behavior for uncompressed files\n- `zstdcat hello -o file` fails with \"unsupported format\" instead of writing \"hello\" to the output file\n- `zstd -dcf hello -o file` also fails with \"unsupported format\"\n\nThe expected behavior is that when an output file is specified with `-o`, the passthrough behavior should still work for uncompressed files, writing the original content to the output file.\n\n## 2. Analyzing the cause\n\nThe problem appears to be in the file I/O logic where:\n1. When no output file is specified, `zstdcat` correctly detects that the input file is not compressed and passes it through to stdout\n2. When an output file is specified with `-o`, the passthrough detection/handling is not working properly, and it tries to decompress the file as if it were compressed\n\nThe issue likely lies in the file processing logic where the presence of the `-o` flag changes the code path and bypasses or incorrectly handles the passthrough behavior for uncompressed files.\n\n## 3. Finding the most relevant files\n\nBased on the repository information and the nature of the problem, the most relevant files are:\n\n```\nprograms/fileio.c\nprograms/zstdcli.c\n```\n\nThese two files are the most critical because:\n\n1. **programs/fileio.c** - This file contains the core file I/O operations including functions like `FIO_decompressMultipleFilenames`, `FIO_compressFilename`, and other file handling logic. The passthrough behavior and output file handling would be implemented here.\n\n2. **programs/zstdcli.c** - This file contains the main CLI logic, argument parsing (including `-o` flag handling), and the coordination between different operation modes. The issue might be in how the CLI processes the combination of passthrough detection and output file specification.\n\nThe problem is likely in the interaction between these two files - where the CLI parsing in `zstdcli.c` sets up the parameters, and `fileio.c` executes the file operations but doesn't properly handle passthrough when an output file is specified."}], "repair_results": [{"filename": "programs_fileio.c.txt", "content": "Looking at the issue, the problem is that when using `zstdcat` (or `zstd -dcf`) with an output file specified via `-o`, the passthrough behavior for non-zstd files is not working. The passthrough should copy the input file to the output when the file is not in a supported compressed format.\n\nLet me trace through the code:\n\n1. When decompressing, `FIO_decompressFrames()` is called\n2. It reads the file header and checks the magic number\n3. If the file is not a recognized format and `prefs->overwrite` is true and output is stdout, it calls `FIO_passThrough()`\n4. However, the condition `!strcmp (dstFileName, stdoutmark)` prevents passthrough when `-o file` is used\n\nThe issue is in the `FIO_decompressFrames()` function. The passthrough mode should be activated when:\n- The file format is not recognized, AND\n- Either output is stdout OR the force flag is set (which sets `prefs->overwrite`)\n\nLooking at the code more carefully, I can see two locations where this check happens:\n\n1. Around line 2527: When initial header read fails\n2. Around line 2587: When the magic number doesn't match any known format\n\nBoth locations have the condition:\n```c\nif ((prefs->overwrite) && !strcmp (dstFileName, stdoutmark)) {  /* pass-through mode */\n    return FIO_passThrough(&ress);\n}\n```\n\nThis should be changed to allow passthrough when `prefs->overwrite` is true, regardless of whether output is stdout or a file.\n\n```javascript\n###programs_fileio.c\n<<<<<<< SEARCH\n        if (ress.readCtx->srcBufferLoaded < toRead) { /* not enough input to check magic number */\n            if ((prefs->overwrite) && !strcmp (dstFileName, stdoutmark)) {  /* pass-through mode */\n                return FIO_passThrough(&ress);\n            }\n            DISPLAYLEVEL(1, \"zstd: %s: unknown header \\n\", srcFileName);\n            return 1;\n        }\n=======\n        if (ress.readCtx->srcBufferLoaded < toRead) { /* not enough input to check magic number */\n            if (prefs->overwrite) {  /* pass-through mode */\n                return FIO_passThrough(&ress);\n            }\n            DISPLAYLEVEL(1, \"zstd: %s: unknown header \\n\", srcFileName);\n            return 1;\n        }\n>>>>>>> REPLACE\n```\n\n```javascript\n###programs_fileio.c\n<<<<<<< SEARCH\n            DISPLAYLEVEL(1, \"zstd: %s: lz4 file cannot be uncompressed (zstd compiled without HAVE_LZ4) -- ignored \\n\", srcFileName);\n            return 1;\n#endif\n        } else if ((prefs->overwrite) && !strcmp (dstFileName, stdoutmark)) {  /* pass-through mode */\n            return FIO_passThrough(&ress);\n        } else {\n            DISPLAYLEVEL(1, \"zstd: %s: unsupported format \\n\", srcFileName);\n            return 1;\n=======\n            DISPLAYLEVEL(1, \"zstd: %s: lz4 file cannot be uncompressed (zstd compiled without HAVE_LZ4) -- ignored \\n\", srcFileName);\n            return 1;\n#endif\n        } else if (prefs->overwrite) {  /* pass-through mode */\n            return FIO_passThrough(&ress);\n        } else {\n            DISPLAYLEVEL(1, \"zstd: %s: unsupported format \\n\", srcFileName);\n            return 1;\n>>>>>>> REPLACE\n```"}, {"filename": "programs_zstdcli.c.txt", "content": "Looking at the issue, I need to understand the problem:\n\n1. `zstdcat hello` works and outputs \"hello\" (passthrough behavior for uncompressed files)\n2. `zstdcat hello -o file` fails with \"unsupported format\" error\n3. `zstd -dcf hello -o file` also fails with \"unsupported format\" error\n\nThe issue states that when `-o` flag is present along with decompression flags, the passthrough behavior should still work for uncompressed files.\n\nLet me trace through the code to find where this behavior is controlled:\n\n1. When `zstdcat` is invoked, it sets `operation=zom_decompress`, `forceStdout=1`, and `outFileName=stdoutmark`\n2. When `-o file` is specified, `outFileName` gets set to \"file\"\n3. The actual decompression happens in `FIO_decompressFilename` or `FIO_decompressMultipleFilenames`\n\nThe key issue is that the passthrough behavior (which allows decompressing uncompressed files when using force flag) is likely only enabled when writing to stdout, but should also be enabled when `-o` is specified with the force flag.\n\nLooking at the code flow:\n- `zstdcat` sets `forceStdout=1` and `followLinks=1` and `outFileName=stdoutmark`\n- When `-o file` is added, `outFileName` changes from `stdoutmark` to `file`\n- The `forceStdout` flag remains `1`\n\nThe issue mentions that `-c` is not required, only writing to stdout. But when `-o` is specified, we're not writing to stdout anymore. The passthrough behavior should be controlled by the `force` flag (`-f` or the implicit force from `zstdcat`).\n\nLooking more carefully at the preset behaviors for `zstdcat`:\n```c\nif (exeNameMatch(programName, ZSTD_CAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }\n```\n\nThe `FIO_overwriteMode(prefs)` is called, which likely sets the force flag in preferences. This should enable passthrough behavior.\n\nHowever, when `-o` is specified, the code path changes. Let me look at the decompression section:\n\n```c\nif (filenames->tableSize == 1 && outFileName) {\n    operationResult = FIO_decompressFilename(fCtx, prefs, outFileName, filenames->fileNames[0], dictFileName);\n} else {\n    operationResult = FIO_decompressMultipleFilenames(fCtx, prefs, filenames->fileNames, outMirroredDirName, outDirName, outFileName, dictFileName);\n}\n```\n\nThe issue is that when `outFileName` is set to something other than `stdoutmark`, the `forceStdout` variable doesn't affect the behavior anymore. But the force mode (set via `FIO_overwriteMode(prefs)`) should still enable passthrough.\n\nActually, looking more carefully at the issue description and the code, I think the problem is simpler. When `zstdcat` is used, it should behave like `zstdcat` regardless of whether `-o` is specified. The key is that `zstdcat` implies force mode.\n\nBut wait - looking at the code again:\n```c\nif (exeNameMatch(programName, ZSTD_CAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }\n```\n\n`FIO_overwriteMode(prefs)` is already called for `zstdcat`. So the force flag should already be set in preferences.\n\nThe issue might be that when `-o` is specified, it overrides `outFileName=stdoutmark`, but the logic somewhere checks if output is stdout to enable passthrough, rather than checking the force flag.\n\nSince I can't see the `FIO_decompressFilename` implementation, I need to infer from the command line parsing. The issue states that the expected behavior is that when both force and an output file are present, passthrough should be active.\n\nLooking at the `-f` flag handling:\n```c\ncase 'f': FIO_overwriteMode(prefs); forceStdin=1; forceStdout=1; followLinks=1; allowBlockDevices=1; argument++; break;\n```\n\nSo `-f` sets both `forceStdin` and `forceStdout` to 1.\n\nFor `zstdcat`, only `forceStdout=1` is set, but `forceStdin` is not set. However, `FIO_overwriteMode(prefs)` is called.\n\nI think the issue is that `zstdcat` should also set `forceStdin=1` to enable passthrough behavior even when `-o` is specified. Let me check the other similar commands:\n\n```c\nif (exeNameMatch(programName, ZSTD_ZCAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }\nif (exeNameMatch(programName, ZSTD_GZCAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }\n```\n\nAll of these have the same pattern - they don't set `forceStdin=1`.\n\nBased on the issue description and the behavior of `-f` flag, I believe the fix is to add `forceStdin=1` to the `zstdcat`, `zcat`, and `gzcat` preset behaviors.\n\n```javascript\n###programs_zstdcli.c\n<<<<<<< SEARCH\n    if (exeNameMatch(programName, ZSTD_CAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }     /* supports multiple formats */\n    if (exeNameMatch(programName, ZSTD_ZCAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }    /* behave like zcat, also supports multiple formats */\n=======\n    if (exeNameMatch(programName, ZSTD_CAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; forceStdin=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }     /* supports multiple formats */\n    if (exeNameMatch(programName, ZSTD_ZCAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; forceStdin=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }    /* behave like zcat, also supports multiple formats */\n>>>>>>> REPLACE\n```\n\n```javascript\n###programs_zstdcli.c\n<<<<<<< SEARCH\n    if (exeNameMatch(programName, ZSTD_GZCAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }   /* behave like gzcat, also supports multiple formats */\n=======\n    if (exeNameMatch(programName, ZSTD_GZCAT)) { operation=zom_decompress; FIO_overwriteMode(prefs); forceStdout=1; forceStdin=1; followLinks=1; outFileName=stdoutmark; g_displayLevel=1; }   /* behave like gzcat, also supports multiple formats */\n>>>>>>> REPLACE\n```"}]}
