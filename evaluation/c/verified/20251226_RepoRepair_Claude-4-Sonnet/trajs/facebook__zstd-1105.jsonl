{"instance_id": "facebook__zstd-1105", "rag_files": [{"filename": "1105.txt", "content": "repo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.h_ZSTDv05.nextSrcSizeToDecompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD.decompressBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_BIT.highbit32.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstdVersion.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZBUFF.recommendedCInSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_matching_ldm.h_LDM.outputConfiguration.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_fileio.c.resetError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_common.c_g_debuglog.enable.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT.initJobCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_FSEv07.decodeSymbolFast.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD.checkCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_common.c_ZSTD.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZSTDv07.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_getParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_CCtxParam.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress_test.c_buffer.in.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.c_ZSTDv05.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_COVER_map_at_COVER_map_t_map_U32.key.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_CCtx.refPrefix.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT_CCtxParam.setMTCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_xxhash.h_xxh64.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD.getParamsFromCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_initCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_FSE.countFast.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_g.debugLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD_DDict.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.h_ZBUFFv06_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.c_ZSTDv05.decompressDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD_DCtx.setFormat.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_CCtx.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.h_dictionary.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_POOL_create_size_t_numThreads_size_t.queueSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_FSEv07.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v02.c_FSE.endOfDState.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzread.c.gzungetc.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_getFrameProgression.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_xxhash.h_xxh32.digest.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h_ZSTD_CCtx_params.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_check_compressionLevel_monotonicIncrease.memoryBudget.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_WorkQueue.h_anonymous.function.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress_internal.h_ZSTD.getCParamsFromCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_BITv06.readBits.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h_ZSTD.defaultFreeFunction.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.h_ZBUFFv05_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_test.c_xxhash_test.open.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD_initCCtx_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress_internal.h_ZSTD.referenceExternalSequences.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_xxhash.c_xxh32_copy.state.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_createCResources.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v03.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress_test.c_zstd_decompress_test.init.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_legacy.h_ZSTD.freeLegacyStreamContext.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v01.c_HUF_decompress.usingDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_FSE.updateState.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_zstd_common.c_ZSTD.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress_internal.h_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_mem.h_ZSTD.writeBE32.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_DCtx.refPrefix.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZBUFFv07_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZSTDv07_stats.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD_initDCtx_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_displayLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD.compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v01.c_ZSTDv01.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_MEM.read16.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD.getParamsFromCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compressBegin.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_btrfs_zstd.c_zstd_get_btrfs.parameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzlib.c.lasterr.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_free_frame.context.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_common.c_FSE.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.startNewCompression.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_setOverlapLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_COVER_map.destroy.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_legacy.h_ZSTD_getDecompressedSize.legacy.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_estimateCStreamSize_advanced.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzlib.c.gzeof.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.cLevelToCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_setNotificationLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.h_ZSTDv04.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_entropy_common.c_HUF.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD_initStaticDStream_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_dstCapacity.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZBUFFv04.decompressInit.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_decode_seq.table.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_XXH32.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_HUF.writeCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_estimateCCtxSize.usingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD_inBuffer.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_estimateCStreamSize.usingCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.h_ZSTDv05_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZSTDv07.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_legacy.h_ZSTD.initLegacyStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_private.h_ERR_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT_getCCtx_ZSTDMT_CCtxPool.cctxPool.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzwrite.c.gzsetparams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_initCCtxParams.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_FSEv07_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_huf.h_HUF_decompress4X.usingDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_createCCtxParams_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress_test.c_zstd_compress_test.open.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_MEM.read64.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_createDDict_advanced_const_void_dict_size_t_dictSize_unsigned_byReference_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress_test.c_buffer.in.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT_createSeqPool_unsigned_nbWorkers_ZSTD_customMem.cMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.writeEpilogue.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_CCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_mem.h_ZSTD.readLE32.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZSTDv07.estimateDCtxSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_HUFv07.decodeStreamX2.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h_ZSTD.highbit32.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_MEM.write16.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_FSE_update.state.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_zstd_common.c_ZSTD.stackFree.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_prepareFileList.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_XXH32.copyState.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZBUFF.decompressInit.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ScopeGuard.h_anonymous.function.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD.resetDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.makeParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_seekable.h_ZSTD_seekable.getNumFrames.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_initStaticCStream_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_additionalParam.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.h_ZBUFFv04_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD.nextInputType.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_setRealTime.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress_internal.h_ZSTD_window.enforceMaxDist.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZDICT_trainFromBuffer.cover.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZWRAPC.finishWithErrorMsg.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_XXH64_createState.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.c_ZSTDv05.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v01.h_ZSTDv01_Dctx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.getParamsFromCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_encodeSequences.default.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v02.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_fileio.c.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_setDStreamParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.setCCtxParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_fileio.c.params.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzlib.c.gzseek64.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_xxhash.c_xxh64_copy.state.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_compressStream.generic.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_CCtx.loadDictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_freeFileCompressionResources.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT_createCCtx_unsigned.nbWorkers.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstdseek_decompress.c_ZSTD_seekable.initBuff.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v01.c_FSE.32bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD.refDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzwrite.c.gzflush.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT_createCCtx_advanced_unsigned_nbThreads_ZSTD_customMem.cMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_COVER.optimizeTrainFromBuffer.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h_ZSTD.invalidateRepCodes.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v03.c_ZSTD.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_fse_compress.c_FSE_countFast.wksp.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v02.c_ZSTD.resetDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v02.h_ZSTDv02_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_initCCtxParams.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_ZBUFFv06_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v03.c_ZSTDv03_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_ZSTDv06.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_freeCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD.limitCopy.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_Options.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZSTDv07.checkContinuity.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_CCtx.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v03.h_ZSTDv03.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h_ZSTD_malloc_size_t_size_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_DCtx.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD.insertBlock.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.c_ZSTDv05.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZSTDv07_createDCtx_advanced_ZSTDv07_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD.getParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT.flushProduced.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_versionNumber.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_ZSTDv06_frameHeaderSize.max.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v01.c_ZSTDv01_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_FSE.initCState2.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD.CCtxWorkspaceBound.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.resetCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD_initDCtx_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZSTD.resetDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_bitstream.h_BIT.mask.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_COVER.checkParameters.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_private.c_ERR_getErrorString_ERR_enum.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZSTDv04_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZBUFF_createCCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_matching_ldm.c_LDM.outputConfiguration.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v02.c_ZSTD.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD_sizeof.DCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_isIncluded.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_setAdditionalParam.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v03.c_ERR.strings.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_zstd_common.c_ZSTD_malloc_size_t_size_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress_test.c.state.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzlib.c.gztell64.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_zstdcli.c.printVersion.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZBUFF.freeDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_zstd_internal.h_ZSTD.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD_compressBlock.greedy.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_BIT.flushBitsFast.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZSTD.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD.resetDStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZWRAP_deflateReset.keepDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzwrite.c.gzfwrite.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_createCCtx_unsigned.numJobs.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD_sizeof.DDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_g.displayLevel.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_matching_ldm_common.c_LDM.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_zstd_internal.h_ZSTD.stackFree.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_CCtxParam.setParameter.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD.resetSeqStore.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_signalErrorToThreads.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT.freeBufferPool.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.c_MEM.write32.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD_compressBegin.usingDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_test.c_buffer.in.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZDICT_getErrorName_size_t.errorCode.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_FSEv07.updateState.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.h_free.dictionary.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzlib.c.gzclearerr.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD.equivalentParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD.getDecompressedSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_ZSTDv06.getFrameParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_setDictIDFlag.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_xxhash.c_xxh64.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_HUFv07_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD.resetCStream.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.h_ZSTDv05.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_HUF_decompress4X.usingDTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_estimateCCtxSize.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_zstdcli.c.defaultCoverParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_createCCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_dictIDFlag.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_mem.h_ZSTD.read32.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_getCParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD_CStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v03.h_ZSTDv03.resetDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_FSE.freeCTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_zstdcli.c.badusage.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.h_ZSTDv06_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.state.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_initStaticDStream_void_workspace_size_t.workspaceSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_destroyCond.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.h_ZSTDv05_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.c_HUFv05.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h_ZSTD_compressBegin_advanced.internal.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v02.c_ZSTD.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_matching_ldm.h_LDM.initializeCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_sizeof.CCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_createDCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT_getCCtx_ZSTDMT_CCtxPool.pool.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v02.c_ZSTD_CCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT.freeJobsTable.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_fileio.c.clearHandler.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zlibWrapper_gzread.c.gzgetc.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_pthread.join.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZSTD.decompressContinue.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD_compressBegin.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v07.c_ZSTDv07_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_ZSTDv06.decodeSequence.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.freeCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.h_ZSTDMT.getNbThreads.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_CCtx_params.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_COVER_tryParameters_data.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZBUFF_createDCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD.getParamsFromCDict.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_FSE.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v01.c_ZSTD.32bits.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_decompress.c_ZSTD_DStream.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_ZSTD_createDCtx_advanced_ZSTD_customMem.customMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h_ZSTD_getSeqStore_const_ZSTD_CCtx.ctx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_FSE.decodeSymbolFast.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_read.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_initCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZWRAP.isUsingZSTDdecompression.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_compress.c_ZSTD.copyCCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_CCtxParams.reset.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress_test.c_file.operations.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_CCtxParams_init.advanced.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v05.c_MEM.read16.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_double_fast.c_ZSTD_compressBlock.doubleFast.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZSTD_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_HUF.isError.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_zstd_internal.h_ZSTD.initStack.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decompress.c_HUF.getDTableDesc.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_setLdmHashEveryLog.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.h_ZSTDMT.getNbWorkers.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_COVER_ctx.destroy.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_decomp.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTDMT_serialState.free.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_compress.c_ZSTD_CCtx.setParametersUsingCCtxParams.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_linux_zstd.h_ZSTD.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.c_ZSTDv06_createDCtx.void.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_internal.h.defaultCustomMem.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.h_ZSTDv06_getErrorName_size_t.code.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_programs_fileio.c.dictBuffSize.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zstd_mem.h_ZSTD.writeLE32.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v03.h_ZSTDv03_Dctx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_XXH32.freeState.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_DCtx.s.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v04.c_ZSTDv04.decompress.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_XXH64.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZWRAP.isUsingZSTDcompression.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_zwd.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_ZDICT.getDictID.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_v06.h_ZSTDv06.copyDCtx.txt\nrepo_document_file\\c\\facebook\\zstd\\1105\\c_facebook_zstd_1105_versionString.void.txt"}], "buggy_files": [{"filename": "1105.txt", "content": "Looking at the GitHub problem description, I need to identify the issue and find the most relevant files to address it.\n\n## 1. Identify the wrong behavior\n\nThe problem is that **callers cannot determine the internal state of ZSTD compression/decompression contexts**. Specifically:\n- `ZSTD_CCtx` and `ZSTD_DCtx` track internal state via enums like `ZSTD_compressionStage_e`, `ZSTD_cStreamStage`, `ZSTD_dStage`, and `ZSTD_dStreamStage`\n- This state information is hidden from callers\n- Callers don't know when it's safe to perform operations or when `ZSTD_CCtx_reset()` or `ZSTD_DCtx_reset()` is needed\n- The request is for a new API to expose context state, potentially similar to `ZSTD_CCtx_setParameter()` but for getting parameters/state\n\n## 2. Analyze the cause\n\nThe cause is the **lack of a public API to query context state and parameters**. The internal state tracking exists but is not exposed through the public interface. The solution requires:\n- Adding new API functions to query context state\n- Potentially adding a `getParameter()` style API as the inverse of `setParameter()`\n- Exposing enough state information to determine if a context needs to be reset\n\n## 3. Find the most related files\n\nBased on the repository information and the need to add new public APIs for querying context state:\n\n```\nlib/zstd.h\nlib/compress/zstd/compress.c\nlib/decompress/zstd/decompress.c\nlib/compress/zstd/compress/internal.h\nlib/common/zstd/internal.h\n```\n\nThese files are most relevant because:\n1. `lib/zstd.h` - The main public header where new API functions would be declared\n2. `lib/compress/zstd/compress.c` - Contains compression context implementation where state query functions would be implemented\n3. `lib/decompress/zstd/decompress.c` - Contains decompression context implementation where state query functions would be implemented  \n4. `lib/compress/zstd/compress/internal.h` - Contains internal compression structures and enums that need to be exposed\n5. `lib/common/zstd/internal.h` - Contains common internal definitions that may need to be referenced for state queries"}], "repair_results": [{"filename": "lib_common_zstd_internal.h.txt", "content": "Looking at the issue, the user is requesting a new API to expose the state of compression/decompression contexts. Specifically, they want to:\n\n1. Query whether a context needs to be reset before starting a new operation\n2. Potentially query compression/decompression parameters (like an inverse of `ZSTD_CCtx_setParameter()`)\n\nHowever, the code segment provided is from `lib_common_zstd_internal.h`, which is an internal header file containing common definitions and utilities. This file doesn't contain the actual context structures or the APIs that would need to be modified.\n\nThe issue is asking for **new API functions** to be added, not fixing bugs in existing code. The provided code segment doesn't show any bugs - it's just internal definitions and utilities.\n\nTo properly address this issue, we would need to:\n\n1. Add new public API functions in `zstd.h` (not shown in the code segments)\n2. Implement those functions in the compression/decompression source files\n3. Possibly expose some internal state enums or create new query parameter enums\n\nSince the code segment provided doesn't contain bugs and the issue is a feature request rather than a bug report, there are no *SEARCH/REPLACE* edits needed for this particular file. The implementation would require:\n\n1. Adding new API functions like `ZSTD_CCtx_getParameter()` and `ZSTD_DCtx_getParameter()` \n2. Adding new parameter enums to query context state (e.g., `ZSTD_c_needsReset`, `ZSTD_d_needsReset`)\n3. Implementing the logic to check internal state and return appropriate values\n\nHowever, since you've asked me to provide SEARCH/REPLACE edits based on the issue and code provided, and the code shown doesn't have bugs to fix, I should clarify:\n\n**There are no bugs in the provided code segment that need fixing.** The issue is a feature request for new APIs that don't exist yet. The provided `zstd_internal.h` file is just showing internal definitions and doesn't need modifications for this feature request - the changes would need to be made in other files (public headers and implementation files) that weren't provided.\n\nIf you have the actual API header files (`zstd.h`) or implementation files where these new functions should be added, please provide those and I can help create the appropriate additions."}, {"filename": "lib_compress_zstd_compress.c.txt", "content": "Looking at the issue, the request is to add a new API that exposes some of the state of the context, specifically to answer the question \"can I start a new operation on the context or do I need to reset it first?\"\n\nThe issue mentions that internally, `ZSTD_CCtx` tracks its state via `ZSTD_compressionStage_e` and `ZSTD_cStreamStage` enums. Looking at the code, I can see that `ZSTD_CCtx` has fields like `streamStage` (of type `ZSTD_cStreamStage`) and `stage` (of type `ZSTD_compressionStage_e`).\n\nThe issue also mentions a broader API that could be the inverse of `ZSTD_CCtx_setParameter()` to query parameters. This would be a `getParameter()` style API.\n\nLet me add a function to query the context state and parameters. Based on the existing `ZSTD_CCtx_setParameter()` function, I'll create a corresponding `ZSTD_CCtx_getParameter()` function.\n\n```c\n### lib_compress_zstd_compress.c\n<<<<<<< SEARCH\nsize_t ZSTD_CCtx_setParameter(ZSTD_CCtx* cctx, ZSTD_cParameter param, unsigned value)\n{\n    DEBUGLOG(4, \"ZSTD_CCtx_setParameter (%u, %u)\", (U32)param, value);\n    if (cctx->streamStage != zcss_init) {\n        if (ZSTD_isUpdateAuthorized(param)) {\n            cctx->cParamsChanged = 1;\n        } else {\n            return ERROR(stage_wrong);\n    }   }\n\n    switch(param)\n    {\n    case ZSTD_p_format :\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_compressionLevel:\n        if (cctx->cdict) return ERROR(stage_wrong);\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_windowLog:\n    case ZSTD_p_hashLog:\n    case ZSTD_p_chainLog:\n    case ZSTD_p_searchLog:\n    case ZSTD_p_minMatch:\n    case ZSTD_p_targetLength:\n    case ZSTD_p_compressionStrategy:\n        if (cctx->cdict) return ERROR(stage_wrong);\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_compressLiterals:\n    case ZSTD_p_contentSizeFlag:\n    case ZSTD_p_checksumFlag:\n    case ZSTD_p_dictIDFlag:\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_forceMaxWindow :  /* Force back-references to remain < windowSize,\n                                   * even when referencing into Dictionary content.\n                                   * default : 0 when using a CDict, 1 when using a Prefix */\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_nbWorkers:\n        if ((value>0) && cctx->staticSize) {\n            return ERROR(parameter_unsupported);  /* MT not compatible with static alloc */\n        }\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_jobSize:\n    case ZSTD_p_overlapSizeLog:\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_enableLongDistanceMatching:\n    case ZSTD_p_ldmHashLog:\n    case ZSTD_p_ldmMinMatch:\n    case ZSTD_p_ldmBucketSizeLog:\n    case ZSTD_p_ldmHashEveryLog:\n        if (cctx->cdict) return ERROR(stage_wrong);\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    default: return ERROR(parameter_unsupported);\n    }\n}\n=======\nsize_t ZSTD_CCtx_setParameter(ZSTD_CCtx* cctx, ZSTD_cParameter param, unsigned value)\n{\n    DEBUGLOG(4, \"ZSTD_CCtx_setParameter (%u, %u)\", (U32)param, value);\n    if (cctx->streamStage != zcss_init) {\n        if (ZSTD_isUpdateAuthorized(param)) {\n            cctx->cParamsChanged = 1;\n        } else {\n            return ERROR(stage_wrong);\n    }   }\n\n    switch(param)\n    {\n    case ZSTD_p_format :\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_compressionLevel:\n        if (cctx->cdict) return ERROR(stage_wrong);\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_windowLog:\n    case ZSTD_p_hashLog:\n    case ZSTD_p_chainLog:\n    case ZSTD_p_searchLog:\n    case ZSTD_p_minMatch:\n    case ZSTD_p_targetLength:\n    case ZSTD_p_compressionStrategy:\n        if (cctx->cdict) return ERROR(stage_wrong);\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_compressLiterals:\n    case ZSTD_p_contentSizeFlag:\n    case ZSTD_p_checksumFlag:\n    case ZSTD_p_dictIDFlag:\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_forceMaxWindow :  /* Force back-references to remain < windowSize,\n                                   * even when referencing into Dictionary content.\n                                   * default : 0 when using a CDict, 1 when using a Prefix */\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_nbWorkers:\n        if ((value>0) && cctx->staticSize) {\n            return ERROR(parameter_unsupported);  /* MT not compatible with static alloc */\n        }\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_jobSize:\n    case ZSTD_p_overlapSizeLog:\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    case ZSTD_p_enableLongDistanceMatching:\n    case ZSTD_p_ldmHashLog:\n    case ZSTD_p_ldmMinMatch:\n    case ZSTD_p_ldmBucketSizeLog:\n    case ZSTD_p_ldmHashEveryLog:\n        if (cctx->cdict) return ERROR(stage_wrong);\n        return ZSTD_CCtxParam_setParameter(&cctx->requestedParams, param, value);\n\n    default: return ERROR(parameter_unsupported);\n    }\n}\n\nsize_t ZSTD_CCtx_getParameter(ZSTD_CCtx* cctx, ZSTD_cParameter param, unsigned* value)\n{\n    DEBUGLOG(4, \"ZSTD_CCtx_getParameter (%u)\", (U32)param);\n    if (!value) return ERROR(GENERIC);\n\n    switch(param)\n    {\n    case ZSTD_p_format :\n        *value = (unsigned)cctx->requestedParams.format;\n        return 0;\n\n    case ZSTD_p_compressionLevel:\n        *value = (unsigned)cctx->requestedParams.compressionLevel;\n        return 0;\n\n    case ZSTD_p_windowLog:\n        *value = cctx->requestedParams.cParams.windowLog;\n        return 0;\n\n    case ZSTD_p_hashLog:\n        *value = cctx->requestedParams.cParams.hashLog;\n        return 0;\n\n    case ZSTD_p_chainLog:\n        *value = cctx->requestedParams.cParams.chainLog;\n        return 0;\n\n    case ZSTD_p_searchLog:\n        *value = cctx->requestedParams.cParams.searchLog;\n        return 0;\n\n    case ZSTD_p_minMatch:\n        *value = cctx->requestedParams.cParams.searchLength;\n        return 0;\n\n    case ZSTD_p_targetLength:\n        *value = cctx->requestedParams.cParams.targetLength;\n        return 0;\n\n    case ZSTD_p_compressionStrategy:\n        *value = (unsigned)cctx->requestedParams.cParams.strategy;\n        return 0;\n\n    case ZSTD_p_compressLiterals:\n        *value = !cctx->requestedParams.disableLiteralCompression;\n        return 0;\n\n    case ZSTD_p_contentSizeFlag:\n        *value = cctx->requestedParams.fParams.contentSizeFlag;\n        return 0;\n\n    case ZSTD_p_checksumFlag:\n        *value = cctx->requestedParams.fParams.checksumFlag;\n        return 0;\n\n    case ZSTD_p_dictIDFlag:\n        *value = !cctx->requestedParams.fParams.noDictIDFlag;\n        return 0;\n\n    case ZSTD_p_forceMaxWindow:\n        *value = cctx->requestedParams.forceWindow;\n        return 0;\n\n    case ZSTD_p_nbWorkers:\n#ifdef ZSTD_MULTITHREAD\n        *value = cctx->requestedParams.nbWorkers;\n#else\n        *value = 0;\n#endif\n        return 0;\n\n    case ZSTD_p_jobSize:\n#ifdef ZSTD_MULTITHREAD\n        *value = cctx->requestedParams.jobSize;\n#else\n        return ERROR(parameter_unsupported);\n#endif\n        return 0;\n\n    case ZSTD_p_overlapSizeLog:\n#ifdef ZSTD_MULTITHREAD\n        *value = cctx->requestedParams.overlapSizeLog;\n#else\n        return ERROR(parameter_unsupported);\n#endif\n        return 0;\n\n    case ZSTD_p_enableLongDistanceMatching:\n        *value = cctx->requestedParams.ldmParams.enableLdm;\n        return 0;\n\n    case ZSTD_p_ldmHashLog:\n        *value = cctx->requestedParams.ldmParams.hashLog;\n        return 0;\n\n    case ZSTD_p_ldmMinMatch:\n        *value = cctx->requestedParams.ldmParams.minMatchLength;\n        return 0;\n\n    case ZSTD_p_ldmBucketSizeLog:\n        *value = cctx->requestedParams.ldmParams.bucketSizeLog;\n        return 0;\n\n    case ZSTD_p_ldmHashEveryLog:\n        *value = cctx->requestedParams.ldmParams.hashEveryLog;\n        return 0;\n\n    default: return ERROR(parameter_unsupported);\n    }\n}\n>>>>>>> REPLACE\n```\n\nNow let's add a function to check if the context needs to be reset:\n\n```c\n### lib_compress_zstd_compress.c\n<<<<<<< SEARCH\n/*! ZSTD_CCtx_reset() :\n *  Also dumps dictionary */\nvoid ZSTD_CCtx_reset(ZSTD_CCtx* cctx)\n{\n    ZSTD_startNewCompression(cctx);\n    cctx->cdict = NULL;\n}\n=======\n/*! ZSTD_CCtx_reset() :\n *  Also dumps dictionary */\nvoid ZSTD_CCtx_reset(ZSTD_CCtx* cctx)\n{\n    ZSTD_startNewCompression(cctx);\n    cctx->cdict = NULL;\n}\n\n/*! ZSTD_CCtx_isResetNeeded() :\n *  @return : 1 if reset is needed before starting a new compression operation, 0 otherwise */\nint ZSTD_CCtx_isResetNeeded(const ZSTD_CCtx* cctx)\n{\n    /* Context is ready for a new operation if it's in init or created stage */\n    return (cctx->streamStage != zcss_init) && (cctx->stage != ZSTDcs_init) && (cctx->stage != ZSTDcs_created);\n}\n>>>>>>> REPLACE\n```"}, {"filename": "lib_decompress_zstd_decompress.c.txt", "content": "Looking at the issue, the request is to add an API that exposes some of the state of the decompression context (`ZSTD_DCtx`) to allow callers to determine if they can start a new operation on the context or if they need to reset it first.\n\nThe issue mentions that internally `ZSTD_DCtx` tracks its state via `ZSTD_dStage` and `ZSTD_dStreamStage` enums. Looking at the code, I can see:\n\n1. `ZSTD_dStage` enum defines stages like `ZSTDds_getFrameHeaderSize`, `ZSTDds_decodeFrameHeader`, etc.\n2. `ZSTD_dStreamStage` enum defines stages like `zdss_init`, `zdss_loadHeader`, `zdss_read`, etc.\n3. The `ZSTD_DCtx` structure has a `stage` field (of type `ZSTD_dStage`) and a `streamStage` field (of type `ZSTD_dStreamStage`)\n\nThe issue asks for an API to query whether a context needs to be reset. Based on the code, a context is \"ready\" for a new operation when it's in the initial state. For streaming decompression, this would be when `streamStage == zdss_init`.\n\nI'll add a function that allows querying if the context needs to be reset. The function should return whether the context is in a state where it can accept a new frame/operation without needing a reset.\n\n```c\n### lib_decompress_zstd_decompress.c\n<<<<<<< SEARCH\nvoid ZSTD_DCtx_reset(ZSTD_DCtx* dctx)\n{\n    (void)ZSTD_initDStream(dctx);\n    dctx->format = ZSTD_f_zstd1;\n    dctx->maxWindowSize = ZSTD_MAXWINDOWSIZE_DEFAULT;\n}\n=======\nvoid ZSTD_DCtx_reset(ZSTD_DCtx* dctx)\n{\n    (void)ZSTD_initDStream(dctx);\n    dctx->format = ZSTD_f_zstd1;\n    dctx->maxWindowSize = ZSTD_MAXWINDOWSIZE_DEFAULT;\n}\n\n/*! ZSTD_DCtx_isResetNeeded() :\n *  Checks if the decompression context needs to be reset before starting a new operation.\n *  @return : 1 if reset is needed (context is in the middle of an operation)\n *            0 if context is ready for a new operation (no reset needed)\n *  Note: This function helps callers determine if ZSTD_DCtx_reset() should be called\n *        before starting a new decompression operation. */\nint ZSTD_DCtx_isResetNeeded(const ZSTD_DCtx* dctx)\n{\n    /* Context is ready for new operation if it's in initial state */\n    return (dctx->streamStage != zdss_init);\n}\n>>>>>>> REPLACE\n```"}, {"filename": "lib_zstd.h.txt", "content": "Looking at the issue, the user is requesting a new API to query the state of compression/decompression contexts. Specifically, they want to:\n\n1. Know if a context needs to be reset before starting a new operation\n2. Query compression/decompression parameters (similar to an inverse of `ZSTD_CCtx_setParameter()`)\n\nThe issue mentions that contexts track their state internally via enums like `ZSTD_compressionStage_e`, `ZSTD_cStreamStage`, `ZSTD_dStage`, and `ZSTD_dStreamStage`, but this state is hidden from callers.\n\nBased on the code provided, I can see there's already a `ZSTD_CCtx_setParameter()` function for setting compression parameters. The natural solution would be to add corresponding \"get\" functions for both compression and decompression contexts.\n\nLet me add the API declarations for querying context state and parameters:\n\n```c\n###lib_zstd.h\n<<<<<<< SEARCH\n/*! ZSTD_CCtx_setParameter() :\n *  Set one compression parameter, selected by enum ZSTD_cParameter.\n *  Setting a parameter is generally only possible during frame initialization (before starting compression).\n *  Exception : when using multi-threading mode (nbThreads >= 1),\n *              following parameters can be updated _during_ compression (within same frame):\n *              => compressionLevel, hashLog, chainLog, searchLog, minMatch, targetLength and strategy.\n *              new parameters will be active on next job, or after a flush().\n *  Note : when `value` type is not unsigned (int, or enum), cast it to unsigned for proper type checking.\n *  @result : informational value (typically, value being set, correctly clamped),\n *            or an error code (which can be tested with ZSTD_isError()). */\nZSTDLIB_API size_t ZSTD_CCtx_setParameter(ZSTD_CCtx* cctx, ZSTD_cParameter param, unsigned value);\n=======\n/*! ZSTD_CCtx_setParameter() :\n *  Set one compression parameter, selected by enum ZSTD_cParameter.\n *  Setting a parameter is generally only possible during frame initialization (before starting compression).\n *  Exception : when using multi-threading mode (nbThreads >= 1),\n *              following parameters can be updated _during_ compression (within same frame):\n *              => compressionLevel, hashLog, chainLog, searchLog, minMatch, targetLength and strategy.\n *              new parameters will be active on next job, or after a flush().\n *  Note : when `value` type is not unsigned (int, or enum), cast it to unsigned for proper type checking.\n *  @result : informational value (typically, value being set, correctly clamped),\n *            or an error code (which can be tested with ZSTD_isError()). */\nZSTDLIB_API size_t ZSTD_CCtx_setParameter(ZSTD_CCtx* cctx, ZSTD_cParameter param, unsigned value);\n\n/*! ZSTD_CCtx_getParameter() :\n *  Get the requested compression parameter value, selected by enum ZSTD_cParameter.\n * @param cctx : compression context\n * @param param : parameter to query\n * @param value : pointer to store the parameter value\n * @result : 0, or an error code (which can be tested with ZSTD_isError()).\n */\nZSTDLIB_API size_t ZSTD_CCtx_getParameter(ZSTD_CCtx* cctx, ZSTD_cParameter param, unsigned* value);\n>>>>>>> REPLACE\n```\n\n```c\n###lib_zstd.h\n<<<<<<< SEARCH\n/*! ZSTD_CCtx_reset() :\n *  Return a CCtx to clean state.\n *  Useful after an error, or to interrupt an ongoing compression job and start a new one.\n *  Any internal data not yet flushed is cancelled.\n *  Dictionary (if any) is dropped.\n *  All parameters are back to default values (compression level is ZSTD_CLEVEL_DEFAULT).\n *  After a reset, all compression parameters can be modified again.\n */\nZSTDLIB_API void ZSTD_CCtx_reset(ZSTD_CCtx* cctx);\n=======\n/*! ZSTD_CCtx_reset() :\n *  Return a CCtx to clean state.\n *  Useful after an error, or to interrupt an ongoing compression job and start a new one.\n *  Any internal data not yet flushed is cancelled.\n *  Dictionary (if any) is dropped.\n *  All parameters are back to default values (compression level is ZSTD_CLEVEL_DEFAULT).\n *  After a reset, all compression parameters can be modified again.\n */\nZSTDLIB_API void ZSTD_CCtx_reset(ZSTD_CCtx* cctx);\n\n/*! ZSTD_CCtx_isResetNeeded() :\n *  Checks if the compression context needs to be reset before starting a new compression operation.\n * @return : 0 if context is ready for a new compression job,\n *           1 if ZSTD_CCtx_reset() should be called before starting a new compression job,\n *           or an error code (which can be tested with ZSTD_isError()).\n *  Note : This function helps callers determine whether it's safe to perform another operation\n *         on the context or whether a call to ZSTD_CCtx_reset() is needed first.\n */\nZSTDLIB_API size_t ZSTD_CCtx_isResetNeeded(const ZSTD_CCtx* cctx);\n>>>>>>> REPLACE\n```\n\n```c\n###lib_zstd.h\n<<<<<<< SEARCH\n/*! ZSTD_DCtx_reset() :\n *  Return a DCtx to clean state.\n *  If a decompression was ongoing, any internal data not yet flushed is cancelled.\n *  All parameters are back to default values, including sticky ones.\n *  Dictionary (if any) is dropped.\n *  Parameters can be modified again after a reset.\n */\nZSTDLIB_API void ZSTD_DCtx_reset(ZSTD_DCtx* dctx);\n=======\n/*! ZSTD_DCtx_reset() :\n *  Return a DCtx to clean state.\n *  If a decompression was ongoing, any internal data not yet flushed is cancelled.\n *  All parameters are back to default values, including sticky ones.\n *  Dictionary (if any) is dropped.\n *  Parameters can be modified again after a reset.\n */\nZSTDLIB_API void ZSTD_DCtx_reset(ZSTD_DCtx* dctx);\n\n/*! ZSTD_DCtx_isResetNeeded() :\n *  Checks if the decompression context needs to be reset before starting a new decompression operation.\n * @return : 0 if context is ready for a new decompression job,\n *           1 if ZSTD_DCtx_reset() should be called before starting a new decompression job,\n *           or an error code (which can be tested with ZSTD_isError()).\n *  Note : This function helps callers determine whether it's safe to perform another operation\n *         on the context or whether a call to ZSTD_DCtx_reset() is needed first.\n */\nZSTDLIB_API size_t ZSTD_DCtx_isResetNeeded(const ZSTD_DCtx* dctx);\n>>>>>>> REPLACE\n```\n\n```c\n###lib_zstd.h\n<<<<<<< SEARCH\n/*! ZSTD_CCtxParam_setParameter() :\n *  Similar to ZSTD_CCtx_setParameter.\n *  Set one compression parameter, selected by enum ZSTD_cParameter.\n *  Parameters must be applied to a ZSTD_CCtx using ZSTD_CCtx_setParametersUsingCCtxParams().\n *  Note : when `value` is an enum, cast it to unsigned for proper type checking.\n * @result : 0, or an error code (which can be tested with ZSTD_isError()).\n */\nZSTDLIB_API size_t ZSTD_CCtxParam_setParameter(ZSTD_CCtx_params* params, ZSTD_cParameter param, unsigned value);\n=======\n/*! ZSTD_CCtxParam_setParameter() :\n *  Similar to ZSTD_CCtx_setParameter.\n *  Set one compression parameter, selected by enum ZSTD_cParameter.\n *  Parameters must be applied to a ZSTD_CCtx using ZSTD_CCtx_setParametersUsingCCtxParams().\n *  Note : when `value` is an enum, cast it to unsigned for proper type checking.\n * @result : 0, or an error code (which can be tested with ZSTD_isError()).\n */\nZSTDLIB_API size_t ZSTD_CCtxParam_setParameter(ZSTD_CCtx_params* params, ZSTD_cParameter param, unsigned value);\n\n/*! ZSTD_CCtxParam_getParameter() :\n *  Similar to ZSTD_CCtx_getParameter.\n *  Get one compression parameter from ZSTD_CCtx_params.\n * @param params : parameters structure\n * @param param : parameter to query\n * @param value : pointer to store the parameter value\n * @result : 0, or an error code (which can be tested with ZSTD_isError()).\n */\nZSTDLIB_API size_t ZSTD_CCtxParam_getParameter(ZSTD_CCtx_params* params, ZSTD_cParameter param, unsigned* value);\n>>>>>>> REPLACE\n```"}]}
