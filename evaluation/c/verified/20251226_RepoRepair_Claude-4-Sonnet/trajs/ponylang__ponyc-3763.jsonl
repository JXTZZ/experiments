{"instance_id": "ponylang__ponyc-3763", "rag_files": [{"filename": "3763.txt", "content": "repo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_alias.c_recover_single_ast_t_type_token_id_rcap_recovery_t_tuple_elem.recover.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.c_check.constraints.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_traits.c_delegated.methods.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.c_reify.typeparamref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_control.h_expr.iftype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_ast.settype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is.signed.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lookup.c_lookup_base_pass_opt_t_opt_ast_t_from_ast_t_orig_ast_t_type_const_char_name_bool_errors_bool_allow.private.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.c_typeparam_set.cap.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_ast_has.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_refer.c_refer_compile.error.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_package.c_package_group_signature_pony.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_sanitise.h_collect_type.params.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast_dup_partial_ast_t_ast_bool_dup_child_bool_dup_type_bool_dup_annotation_bool_dup.symtab.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_expr.h_is_method.return.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_syntax.c_check_provides.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is.constructable.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_symtab.h_symbol_pony.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.h_deferred_reify_new_ast_t_ast_ast_t_typeparams_ast_t_typeargs_ast_t.thistype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_sugar.c_sugar.barelambda.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_genreference.c_gen.addressof.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_eq.typeargs.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_pass.c_ast_pass.record.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.h_reify_ast_t_ast_ast_t_typeparams_ast_t_typeargs_pass_opt_t.opt.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_assemble.c_type_builtin_args_pass_opt_t_opt_ast_t_from_const_char_name_ast_t.typeargs.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.h_reify_method_def_ast_t_ast_ast_t_typeparams_ast_t_typeargs_pass_opt_t.opt.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_names.c_names.arrow.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_match.c_expr_match.capture.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_cycle.c_cycle.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_call.c_check_type.params.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.c_typeparam_current_inner_ast_t_type_ast_t.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reach.h_reach_param_pony.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_call.c_verify_behaviour.call.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_genident.c_gen_is.value.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_operator.h_expr.consume.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.h_typeparam_current_pass_opt_t_opt_ast_t_typeparamref_ast_t.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.c_reify.defaults.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.h_is_subtype.fun.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reach.h_reach_method_instance_reachable_method_name_t_n_ast_t.typeargs.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_id.h_check_id_type.param.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_assemble.c_type_typeexpr_pass_opt_t_opt_token_id_t_ast_t_l_type_ast_t_r.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_arrow_sub.arrow.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reach.c_reachable.method.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_array.c_detect_apply_element_type_pass_opt_t_opt_ast_t_ast_ast_t.def.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_alias.c_chain_type_ast_t_type_token_id_fun_cap_bool_recovered.call.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_assemble.c_type_typeexpr_token_id_t_ast_t_l_type_ast_t_r.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast_all_consumes_in.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_gendesc.h_gendesc.typeid.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_scope.c_scope.assign.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_genlib.c_reachable.methods.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_viewpoint.c_replace.typeparam.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_ast_within.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reference.c_expr.fun.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_control.h_expr_compile.error.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_typeparam_sub.arrow.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_postfix.c_expr.qualify.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_syntax.c_syntax.barelambdatype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_ast_nominal_pkg_id_signature_serialise.trace.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_call.h_expr.call.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_traits.c_embed.fields.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is.concrete.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.h_check.constraints.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_ast_set.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_genfun.c_genfun.method.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_finalisers.c_receiver_def_ast_t.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_operator.c_expr.identity.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.h_reify.defaults.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_traits.c_pass.traits.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast_has.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_names.c_get_package_scope_ast_t_scope_ast_t.ast.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_gendesc.c_trait.count.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_matchtype.c_is_x_match.nominal.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_pass.h_ast_passes.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lambda.c_capture_from.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_literal.c.uifset.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lookup.c_downcast_iso_trn_receiver_to_ref_ast_t.receiver.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_alias.h_chain_type_ast_t_type_token_id_fun_cap_bool_recovered.call.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reference.h_expr.identityof.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast_pony.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.c_typeparam_lower_ast_t.typeparamref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_sanitise.c_collect_type.param.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_refer.c_error_check_used.decl.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_gencall.c_gen.funptr.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_control.c_is_local_or.param.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_expr.c_pass_pre.expr.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_names.c_names.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_pass.c_record_ast.pass.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_assemble.c_set_cap_and_ephemeral_ast_t_type_token_id_cap_token_id.ephemeral.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_expr.h_is_typecheck.error.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_ast_all_consumes_in.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_arrow_sub.nominal.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_scope.c_scope.iftype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.c_deferred_reify_method_def_deferred_reification_t_deferred_ast_t_ast_pass_opt_t.opt.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_control.c_expr_compile.error.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_genheader.c_emit.fun.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_pass.c_ast.passes.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lambda.h_expr.object.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_verify.c_get_fun_def_pass_opt_t_opt_ast_t.ast.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lambda.h_expr.lambda.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_gencall.c_special_case.call.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_flatten.c_flatten.typeparamref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_scope.c_make_iftype_typeparam_pass_opt_t_opt_ast_t_subtype_ast_t_supertype_ast_t.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.h_deferred_reification_pony.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast_signature_pony.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reference.h_expr_compile.intrinsic.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_ast_get_ast_t_ast_const_char_name_sym_status_t.status.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reference.h_expr.paramref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_sugar.c_sugar.location.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_nominal_sub.structural.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_call.c_method_check_type.params.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reference.h_expr.dontcareref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_x_sub.x.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is.eqtype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is.known.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reify.h_deferred_reify_add_method.typeparams.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_cap.h_cap_for.this.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_syntax.c_syntax.lambda.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_frame.h_frame.push.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_frame.h_typecheck_frame.t.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_fun_sub.fun.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_expr.c_pass.expr.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_typeparam_sub.typeparam.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_verify.c_pass.verify.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reach.c_add_type_reach_t_r_ast_t_type_pass_opt_t.opt.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_sugar.c_expand.none.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_pass.c_ast_visit.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_sugar.c_sugar.lambdatype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_alias.c_immutable_or.opaque.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lambda.c_catch_up.provides.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_casemethod.c_process_t.params.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_assemble.h_type_for_fun_ast_t.ast.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.h_is.eqtype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_scope.c_scope.local.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is.bare.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.h_is.subtype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_matchtype.c_is_x_match.typeparam.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_alias.c_recover_type_inner_ast_t_type_token_id_cap_recovery_t_tuple_elem.recover.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lambda.c_expr.lambda.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_traits.h_anonymous.function.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_control.c_expr.recover.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_syntax.c_syntax_lambda.capture.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_literal.h_coerce.literals.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.c_apply.cap.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_syntax.c_syntax_type.param.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.c_typeparamref_current_ast_t_typeparamref_ast_t.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_genheader.c_get_fun_ast_t_type_const_char_name_ast_t.typeargs.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_assemble.c_type_for_fun_ast_t.ast.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_src_libponyc_verify_call.c.verify.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reach.c_add_nominal_reachable_method_stack_t_s_reachable_types_t_r_uint32_t_next_type_id_ast_t.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_call.c_check_receiver.cap.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_options.h_ponyc_opt_std_args.void.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_expr.c_is_typecheck.error.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_scope.c_pass.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_matchtype.c_is_typeparam_match.typeparam.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_scope.c_scope.call.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.c_set_scope_no.parent.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.c_typeparam_current.inner.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_operator.h_expr.as.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_package.c_package_qualified_name_ast_t.package.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_x_sub.typeparam.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_scope.c_scope.method.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_subtype.assume.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_traits.c.rescope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_pony_type.t.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_call.h_method_check_type.params.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lookup.c_lookup_typeparam_pass_opt_t_opt_ast_t_from_ast_t_orig_ast_t_type_const_char_name_bool.errors.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast_set.scope.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_refer.c_refer.seq.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_control.c_expr.iftype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_reach.c_add_isect_or_union_reach_t_r_ast_t_type_pass_opt_t.opt.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_id.c_check_id_type.param.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_casemethod.c_process_t.param.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ponyassert.c_ponyint_assert.fail.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_call.c_method.chain.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_refer.c_refer.iftype.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_matchtype.c_is_x_match.arrow.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_src_libponyc_verify_call.h.verify.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.c_typeparam_constraint_ast_t.typeparamref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.h_typeparam_lower_ast_t.typeparamref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_sanitise.h_sanitise_type_ast_t.type.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_typeparam.h_typeparam_upper_ast_t.typeparamref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_syntax.c_syntax.fun.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_lambda.c_find_possible_fun.defs.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_refer.c_qualify.typeref.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_typeparam_sub.x.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_ast.h_ast_dup_ast_t.ast.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.c_is_reified_fun_sub.fun.txt\nrepo_document_file\\c\\ponylang\\ponyc\\3763\\c_ponylang_ponyc_3763_subtype.h_is_sub.provides.txt"}], "buggy_files": [{"filename": "3763.txt", "content": "Looking at this GitHub problem, I need to analyze the assertion failure and identify the root cause.\n\n## 1. Identify the wrong behavior\n\nThe problem shows an assertion failure in the Pony compiler:\n```\n/tmp/cirrus-ci-build/src/libponyc/pass/scope.c:291: scope_iftype: Assertion `ast_id(typeparam_store) == TK_NONE` failed.\n```\n\nThis occurs when compiling code that uses `iftype` within a lambda that has generic type parameters. The assertion expects `typeparam_store` to be `TK_NONE`, but it's actually `TK_TYPEPARAMS`, suggesting the scope pass is being run multiple times on the same AST node.\n\n## 2. Analyze the cause behind the wrong behavior\n\nFrom the backtrace and problem description, the issue appears to be:\n\n1. The original function has generic type parameters `T: (U8 | I8)`\n2. A lambda is created inside this function that uses `iftype T <: U8`\n3. During lambda processing, the compiler runs the scope pass on the lambda's AST\n4. The `iftype` construct within the lambda triggers `scope_iftype` \n5. However, the `typeparam_store` has already been populated from a previous scope pass run\n6. The assertion fails because it expects a clean state (`TK_NONE`) but finds existing type parameters (`TK_TYPEPARAMS`)\n\nThe root cause seems to be that when lambdas are processed and expanded, the scope pass is run again on AST nodes that have already been processed, without properly resetting or handling the existing type parameter state.\n\n## 3. Find the most related files\n\nBased on the backtrace and the nature of the problem:\n\n```\nsrc/libponyc/pass/scope.c\nsrc/libponyc/expr/lambda.c\nsrc/libponyc/pass/pass.c\nsrc/libponyc/pass/expr.c\nsrc/libponyc/type/typeparam.c\n```\n\nThe most critical file is `scope.c` where the assertion fails, followed by `lambda.c` which handles lambda processing and likely triggers the duplicate scope pass, then the general pass management files that control when and how passes are executed."}], "repair_results": [{"filename": "src_libponyc_pass_scope.c.txt", "content": "Looking at this issue, I can see the problem:\n\n1. The code is hitting an assertion failure at line 291 in `scope.c` (which corresponds to the `scope_iftype` function)\n2. The assertion `ast_id(typeparam_store) == TK_NONE` is failing because `typeparam_store` already has `TK_TYPEPARAMS` as its ID\n3. This suggests the scope pass is running twice on the same iftype node - once for the original function, and again when the lambda is expanded\n\nThe issue is that when a lambda captures a type parameter and contains an `iftype`, the `scope_iftype` function gets called multiple times on the same AST node. The first time it runs, it replaces `typeparam_store` (which starts as `TK_NONE`) with the new `typeparams` node. The second time it runs, `typeparam_store` is already `TK_TYPEPARAMS`, causing the assertion to fail.\n\nThe fix is to check if the scope pass has already been run on this `iftype` node, and skip processing if it has. We can do this by checking if `typeparam_store` is already populated before trying to replace it.\n\n```javascript\n###src_libponyc_pass_scope.c\n<<<<<<< SEARCH\nstatic ast_result_t scope_iftype(pass_opt_t* opt, ast_t* ast)\n{\n  pony_assert(ast_id(ast) == TK_IFTYPE);\n\n  AST_GET_CHILDREN(ast, subtype, supertype, body, typeparam_store);\n\n  ast_t* typeparams = ast_from(ast, TK_TYPEPARAMS);\n=======\nstatic ast_result_t scope_iftype(pass_opt_t* opt, ast_t* ast)\n{\n  pony_assert(ast_id(ast) == TK_IFTYPE);\n\n  AST_GET_CHILDREN(ast, subtype, supertype, body, typeparam_store);\n\n  // If the scope pass has already been run on this iftype, skip it.\n  // This can happen when a lambda captures a type parameter and the\n  // lambda's iftype gets processed multiple times.\n  if(ast_id(typeparam_store) != TK_NONE)\n    return AST_OK;\n\n  ast_t* typeparams = ast_from(ast, TK_TYPEPARAMS);\n>>>>>>> REPLACE\n```\n\nThis fix checks if `typeparam_store` has already been populated (i.e., it's not `TK_NONE`). If it has been populated, it means the scope pass has already run on this `iftype` node, so we return early. This prevents the assertion failure and allows the compiler to handle the case where the scope pass runs multiple times on the same `iftype` node (which can happen when lambdas capture type parameters)."}]}
